{
    "absolute_path_to_file_in_container": "/gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java",
    "errors": [
        {
            "line_number": 64,
            "message": "[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[64,61] cannot find symbol",
            "additional_info": "  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder",
            "file_name": "ClasspathScanner.java",
            "BCs": [
                {
                    "element": "org.reflections.util.FilterBuilder.apply",
                    "nature": "DELETION",
                    "kind": "METHOD_REMOVED"
                },
                {
                    "element": "org.reflections.util.FilterBuilder",
                    "nature": "MUTATION",
                    "kind": "SUPERTYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public abstract java.util.Set org.reflections.util.QueryFunction.apply(java.lang.Object)"
            ],
            "uid": "8a373e9e-b639-5fd7-a68b-3e9542425ff5"
        },
        {
            "line_number": 69,
            "message": "[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[69,51] cannot find symbol",
            "additional_info": "  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder",
            "file_name": "ClasspathScanner.java",
            "BCs": [
                {
                    "element": "org.reflections.util.FilterBuilder.apply",
                    "nature": "DELETION",
                    "kind": "METHOD_REMOVED"
                },
                {
                    "element": "org.reflections.util.FilterBuilder",
                    "nature": "MUTATION",
                    "kind": "SUPERTYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public abstract java.util.Set org.reflections.util.QueryFunction.apply(java.lang.Object)"
            ],
            "uid": "8a373e9e-b639-5fd7-a68b-3e9542425ff5"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*----------------------------------------------------------------\n *  Copyright (c) ThoughtWorks, Inc.\n *  Licensed under the Apache License, Version 2.0\n *  See LICENSE.txt in the project root for license information.\n *----------------------------------------------------------------*/\npackage com.thoughtworks.gauge.scan;\n\nimport com.thoughtworks.gauge.ClasspathHelper;\nimport org.reflections.Configuration;\nimport org.reflections.Reflections;\nimport org.reflections.scanners.MethodAnnotationsScanner;\nimport org.reflections.scanners.SubTypesScanner;\nimport org.reflections.util.ConfigurationBuilder;\nimport org.reflections.util.FilterBuilder;\nimport org.reflections.vfs.SystemDir;\nimport org.reflections.vfs.Vfs;\nimport org.reflections.vfs.ZipDir;\n\nimport java.io.File;\nimport java.net.URL;\nimport java.util.jar.JarFile;\n\nimport static com.thoughtworks.gauge.GaugeConstant.PACKAGE_TO_SCAN;\n\n/**\n * Scans the current Classpath and passes to all the scanners passed.\n */\npublic class ClasspathScanner {\n\n    private Reflections reflections;\n\n    public void scan(IScanner... scanners) {\n        reflections = createReflections();\n        for (IScanner scanner : scanners) {\n            scanner.scan(reflections);\n        }\n    }\n\n    private Reflections createReflections() {\n        Vfs.addDefaultURLTypes(new Vfs.UrlType() {\n            @Override\n            public boolean matches(URL url) {\n                return \"file\".equals(url.getProtocol());\n            }\n\n            @Override\n            public Vfs.Dir createDir(URL url) throws Exception {\n                File file = Vfs.getFile(url);\n                return file.isDirectory() ? new SystemDir(file) : new ZipDir(new JarFile(Vfs.getFile(url)));\n            }\n        });\n\n        Configuration config = new ConfigurationBuilder()\n                .setScanners(new MethodAnnotationsScanner(), new SubTypesScanner())\n                .addUrls(ClasspathHelper.getUrls())\n                .filterInputsBy(this::shouldScan);\n\n        return new Reflections(config);\n    }\n\n    private boolean shouldScan(String s) {\n        final String packagesToScan = System.getenv(PACKAGE_TO_SCAN);\n        if (packagesToScan == null || packagesToScan.isEmpty()) {\n            return new FilterBuilder().include(\".+\\\\.class\").apply(s);\n        }\n        final String[] packages = packagesToScan.split(\",\");\n        for (String packageToScan : packages) {\n            String regex = String.format(\".?\\\\.??%s\\\\..+\\\\.class\", packageToScan);\n            if (new FilterBuilder().include(regex).apply(s)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: reflections 0.9.9->0.10.2. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.reflections.util.FilterBuilder.apply\n~~ SUPERTYPE_REMOVED <- org.reflections.util.FilterBuilder\n++ public abstract java.util.Set org.reflections.util.QueryFunction.apply(java.lang.Object)\n\nThe error is triggered in the following specific lines in the previous code:\n            return new FilterBuilder().include(\".+\\\\.class\").apply(s);\n            if (new FilterBuilder().include(regex).apply(s)) {\nwith the following error message:\n[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[64,61] cannot find symbol  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder\n[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[69,51] cannot find symbol  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "            return new FilterBuilder().include(\".+\\\\.class\").apply(s);\n            if (new FilterBuilder().include(regex).apply(s)) {",
    "error_message": "[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[64,61] cannot find symbol  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder\n[ERROR] /gauge-java/src/main/java/com/thoughtworks/gauge/scan/ClasspathScanner.java:[69,51] cannot find symbol  symbol:   method apply(java.lang.String)\n  location: class org.reflections.util.FilterBuilder",
    "api_diff": "-- org.reflections.util.FilterBuilder.apply\n~~ SUPERTYPE_REMOVED <- org.reflections.util.FilterBuilder\n++ public abstract java.util.Set org.reflections.util.QueryFunction.apply(java.lang.Object)",
    "original_code": "/*----------------------------------------------------------------\n *  Copyright (c) ThoughtWorks, Inc.\n *  Licensed under the Apache License, Version 2.0\n *  See LICENSE.txt in the project root for license information.\n *----------------------------------------------------------------*/\npackage com.thoughtworks.gauge.scan;\n\nimport com.thoughtworks.gauge.ClasspathHelper;\nimport org.reflections.Configuration;\nimport org.reflections.Reflections;\nimport org.reflections.scanners.MethodAnnotationsScanner;\nimport org.reflections.scanners.SubTypesScanner;\nimport org.reflections.util.ConfigurationBuilder;\nimport org.reflections.util.FilterBuilder;\nimport org.reflections.vfs.SystemDir;\nimport org.reflections.vfs.Vfs;\nimport org.reflections.vfs.ZipDir;\n\nimport java.io.File;\nimport java.net.URL;\nimport java.util.jar.JarFile;\n\nimport static com.thoughtworks.gauge.GaugeConstant.PACKAGE_TO_SCAN;\n\n/**\n * Scans the current Classpath and passes to all the scanners passed.\n */\npublic class ClasspathScanner {\n\n    private Reflections reflections;\n\n    public void scan(IScanner... scanners) {\n        reflections = createReflections();\n        for (IScanner scanner : scanners) {\n            scanner.scan(reflections);\n        }\n    }\n\n    private Reflections createReflections() {\n        Vfs.addDefaultURLTypes(new Vfs.UrlType() {\n            @Override\n            public boolean matches(URL url) {\n                return \"file\".equals(url.getProtocol());\n            }\n\n            @Override\n            public Vfs.Dir createDir(URL url) throws Exception {\n                File file = Vfs.getFile(url);\n                return file.isDirectory() ? new SystemDir(file) : new ZipDir(new JarFile(Vfs.getFile(url)));\n            }\n        });\n\n        Configuration config = new ConfigurationBuilder()\n                .setScanners(new MethodAnnotationsScanner(), new SubTypesScanner())\n                .addUrls(ClasspathHelper.getUrls())\n                .filterInputsBy(this::shouldScan);\n\n        return new Reflections(config);\n    }\n\n    private boolean shouldScan(String s) {\n        final String packagesToScan = System.getenv(PACKAGE_TO_SCAN);\n        if (packagesToScan == null || packagesToScan.isEmpty()) {\n            return new FilterBuilder().include(\".+\\\\.class\").apply(s);\n        }\n        final String[] packages = packagesToScan.split(\",\");\n        for (String packageToScan : packages) {\n            String regex = String.format(\".?\\\\.??%s\\\\..+\\\\.class\", packageToScan);\n            if (new FilterBuilder().include(regex).apply(s)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n",
    "project": "gauge-java",
    "libraryName": "reflections",
    "libraryGroupID": "org.reflections",
    "newVersion": "0.10.2",
    "previousVersion": "0.9.9",
    "breakingCommit": "a4c360001134c2e3a9f7fbde88a07a9fd767e78e"
}