{
    "absolute_path_to_file_in_container": "/ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java",
    "errors": [
        {
            "line_number": 3,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[3,35] package com.flowpowered.math.vector does not exist",
            "additional_info": "",
            "file_name": "SkinApplier.java",
            "BCs": [],
            "Additions": [],
            "uid": "e026e36c-0faa-5fcb-b4c8-cec5c84feeb2"
        },
        {
            "line_number": 12,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[12,37] cannot find symbol",
            "additional_info": "  symbol:   class CommandSource\n  location: package org.spongepowered.api.command",
            "file_name": "SkinApplier.java",
            "BCs": [
                {
                    "element": "org.spongepowered.api.command.CommandSource",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "dc82ae77-ea00-50f9-837b-7aa4e310e8e3"
        },
        {
            "line_number": 13,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[13,38] package org.spongepowered.api.data.key does not exist",
            "additional_info": "",
            "file_name": "SkinApplier.java",
            "BCs": [],
            "Additions": [],
            "uid": "4da4c441-1b65-5721-8285-6f19f6d54f2b"
        },
        {
            "line_number": 23,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[23,19] cannot find symbol",
            "additional_info": "  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier",
            "file_name": "SkinApplier.java",
            "BCs": [
                {
                    "element": "org.spongepowered.api.command.CommandSource",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "e2408011-4dfd-5e6c-bdda-99e4307a9b9e"
        },
        {
            "line_number": 26,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[26,49] cannot find symbol",
            "additional_info": "  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier",
            "file_name": "SkinApplier.java",
            "BCs": [
                {
                    "element": "org.spongepowered.api.command.CommandSource",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "e2408011-4dfd-5e6c-bdda-99e4307a9b9e"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage com.github.games647.changeskin.sponge.task;\n\nimport com.flowpowered.math.vector.Vector3d;\nimport com.github.games647.changeskin.core.model.UserPreference;\nimport com.github.games647.changeskin.core.model.skin.SkinModel;\nimport com.github.games647.changeskin.core.shared.task.SharedApplier;\nimport com.github.games647.changeskin.sponge.ChangeSkinSponge;\n\nimport java.util.UUID;\n\nimport org.spongepowered.api.Sponge;\nimport org.spongepowered.api.command.CommandSource;\nimport org.spongepowered.api.data.key.Keys;\nimport org.spongepowered.api.entity.living.player.Player;\nimport org.spongepowered.api.entity.living.player.tab.TabListEntry;\nimport org.spongepowered.api.scheduler.Task;\nimport org.spongepowered.api.world.Location;\nimport org.spongepowered.api.world.World;\n\npublic class SkinApplier extends SharedApplier {\n\n    private final ChangeSkinSponge plugin;\n    private final CommandSource invoker;\n    private final Player receiver;\n\n    public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin\n            , boolean keepSkin) {\n        super(plugin.getCore(), targetSkin, keepSkin);\n\n        this.plugin = plugin;\n        this.invoker = invoker;\n        this.receiver = receiver;\n    }\n\n    @Override\n    public void run() {\n        if (!isConnected()) {\n            return;\n        }\n\n        //uuid was successful resolved, we could now make a cooldown check\n        if (invoker instanceof Player) {\n            UUID uniqueId = ((Player) invoker).getUniqueId();\n            core.getCooldownService().trackPlayer(uniqueId);\n        }\n\n        if (core.getStorage() != null) {\n            UserPreference preferences = core.getStorage().getPreferences(receiver.getUniqueId());\n            save(preferences);\n        }\n\n        applySkin();\n    }\n\n    @Override\n    protected boolean isConnected() {\n        return receiver.isOnline();\n    }\n\n    @Override\n    protected void applyInstantUpdate() {\n        plugin.getApi().applySkin(receiver, targetSkin);\n\n        sendUpdate();\n        plugin.sendMessage(invoker, \"skin-changed\");\n    }\n\n    @Override\n    protected void sendMessage(String key) {\n        plugin.sendMessage(invoker, key);\n    }\n\n    @Override\n    protected void runAsync(Runnable runnable) {\n        Task.builder().async()\n                .execute(runnable)\n                .submit(plugin);\n    }\n\n    private void sendUpdate() {\n        sendUpdateSelf();\n\n        //triggers an update for others player to see the new skin\n        receiver.offer(Keys.VANISH, true);\n        receiver.offer(Keys.VANISH, false);\n    }\n\n    private void sendUpdateSelf() {\n        receiver.getTabList().removeEntry(receiver.getUniqueId());\n        receiver.getTabList().addEntry(TabListEntry.builder()\n                .displayName(receiver.getDisplayNameData().displayName().get())\n                .latency(receiver.getConnection().getLatency())\n                .list(receiver.getTabList())\n                .gameMode(receiver.getGameModeData().type().get())\n                .profile(receiver.getProfile())\n                .build());\n\n        Location<World> oldLocation = receiver.getLocation();\n        Vector3d rotation = receiver.getRotation();\n        World receiverWorld = receiver.getWorld();\n        Sponge.getServer().getWorlds()\n                .stream()\n                .filter(world -> !world.equals(receiverWorld))\n                .findFirst()\n                .ifPresent(world -> {\n                    receiver.setLocation(world.getSpawnLocation());\n                    receiver.setLocationAndRotation(oldLocation, rotation);\n                });\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: spongeapi 7.4.0->8.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.spongepowered.api.command.CommandManager\n-- org.spongepowered.api.command.CommandSource\n-- org.spongepowered.api.network.ChannelRegistrar\n-- org.spongepowered.api.plugin.Plugin\n-- org.spongepowered.api.event.game.state.GamePreInitializationEvent\n-- org.spongepowered.api.event.game.state.GameInitializationEvent\n-- org.spongepowered.api.event.game.state.GameStoppingServerEvent\n-- org.spongepowered.api.command.spec.CommandSpec\n-- org.spongepowered.api.network.ChannelBuf\n-- org.spongepowered.api.network.RawDataListener\n-- org.spongepowered.api.event.network.ClientConnectionEvent\n-- org.spongepowered.api.command.spec.CommandExecutor\n-- org.spongepowered.api.command.CommandException\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable,boolean)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,boolean)\n++ public abstract interface null org.spongepowered.api.command.CommandExecutor\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component)\n++ public abstract interface null org.spongepowered.api.network.channel.raw.RawDataChannel\n\nThe error is triggered in the following specific lines in the previous code:\nimport com.flowpowered.math.vector.Vector3d;\nimport org.spongepowered.api.command.CommandSource;\nimport org.spongepowered.api.data.key.Keys;\n    private final CommandSource invoker;\n    public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin\nwith the following error message:\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[3,35] package com.flowpowered.math.vector does not exist\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[12,37] cannot find symbol  symbol:   class CommandSource\n  location: package org.spongepowered.api.command\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[13,38] package org.spongepowered.api.data.key does not exist\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[23,19] cannot find symbol  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[26,49] cannot find symbol  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import com.flowpowered.math.vector.Vector3d;\nimport org.spongepowered.api.command.CommandSource;\nimport org.spongepowered.api.data.key.Keys;\n    private final CommandSource invoker;\n    public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin",
    "error_message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[3,35] package com.flowpowered.math.vector does not exist\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[12,37] cannot find symbol  symbol:   class CommandSource\n  location: package org.spongepowered.api.command\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[13,38] package org.spongepowered.api.data.key does not exist\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[23,19] cannot find symbol  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/task/SkinApplier.java:[26,49] cannot find symbol  symbol:   class CommandSource\n  location: class com.github.games647.changeskin.sponge.task.SkinApplier",
    "api_diff": "-- org.spongepowered.api.command.CommandManager\n-- org.spongepowered.api.command.CommandSource\n-- org.spongepowered.api.network.ChannelRegistrar\n-- org.spongepowered.api.plugin.Plugin\n-- org.spongepowered.api.event.game.state.GamePreInitializationEvent\n-- org.spongepowered.api.event.game.state.GameInitializationEvent\n-- org.spongepowered.api.event.game.state.GameStoppingServerEvent\n-- org.spongepowered.api.command.spec.CommandSpec\n-- org.spongepowered.api.network.ChannelBuf\n-- org.spongepowered.api.network.RawDataListener\n-- org.spongepowered.api.event.network.ClientConnectionEvent\n-- org.spongepowered.api.command.spec.CommandExecutor\n-- org.spongepowered.api.command.CommandException\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable,boolean)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,boolean)\n++ public abstract interface null org.spongepowered.api.command.CommandExecutor\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component)\n++ public abstract interface null org.spongepowered.api.network.channel.raw.RawDataChannel",
    "original_code": "package com.github.games647.changeskin.sponge.task;\n\nimport com.flowpowered.math.vector.Vector3d;\nimport com.github.games647.changeskin.core.model.UserPreference;\nimport com.github.games647.changeskin.core.model.skin.SkinModel;\nimport com.github.games647.changeskin.core.shared.task.SharedApplier;\nimport com.github.games647.changeskin.sponge.ChangeSkinSponge;\n\nimport java.util.UUID;\n\nimport org.spongepowered.api.Sponge;\nimport org.spongepowered.api.command.CommandSource;\nimport org.spongepowered.api.data.key.Keys;\nimport org.spongepowered.api.entity.living.player.Player;\nimport org.spongepowered.api.entity.living.player.tab.TabListEntry;\nimport org.spongepowered.api.scheduler.Task;\nimport org.spongepowered.api.world.Location;\nimport org.spongepowered.api.world.World;\n\npublic class SkinApplier extends SharedApplier {\n\n    private final ChangeSkinSponge plugin;\n    private final CommandSource invoker;\n    private final Player receiver;\n\n    public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin\n            , boolean keepSkin) {\n        super(plugin.getCore(), targetSkin, keepSkin);\n\n        this.plugin = plugin;\n        this.invoker = invoker;\n        this.receiver = receiver;\n    }\n\n    @Override\n    public void run() {\n        if (!isConnected()) {\n            return;\n        }\n\n        //uuid was successful resolved, we could now make a cooldown check\n        if (invoker instanceof Player) {\n            UUID uniqueId = ((Player) invoker).getUniqueId();\n            core.getCooldownService().trackPlayer(uniqueId);\n        }\n\n        if (core.getStorage() != null) {\n            UserPreference preferences = core.getStorage().getPreferences(receiver.getUniqueId());\n            save(preferences);\n        }\n\n        applySkin();\n    }\n\n    @Override\n    protected boolean isConnected() {\n        return receiver.isOnline();\n    }\n\n    @Override\n    protected void applyInstantUpdate() {\n        plugin.getApi().applySkin(receiver, targetSkin);\n\n        sendUpdate();\n        plugin.sendMessage(invoker, \"skin-changed\");\n    }\n\n    @Override\n    protected void sendMessage(String key) {\n        plugin.sendMessage(invoker, key);\n    }\n\n    @Override\n    protected void runAsync(Runnable runnable) {\n        Task.builder().async()\n                .execute(runnable)\n                .submit(plugin);\n    }\n\n    private void sendUpdate() {\n        sendUpdateSelf();\n\n        //triggers an update for others player to see the new skin\n        receiver.offer(Keys.VANISH, true);\n        receiver.offer(Keys.VANISH, false);\n    }\n\n    private void sendUpdateSelf() {\n        receiver.getTabList().removeEntry(receiver.getUniqueId());\n        receiver.getTabList().addEntry(TabListEntry.builder()\n                .displayName(receiver.getDisplayNameData().displayName().get())\n                .latency(receiver.getConnection().getLatency())\n                .list(receiver.getTabList())\n                .gameMode(receiver.getGameModeData().type().get())\n                .profile(receiver.getProfile())\n                .build());\n\n        Location<World> oldLocation = receiver.getLocation();\n        Vector3d rotation = receiver.getRotation();\n        World receiverWorld = receiver.getWorld();\n        Sponge.getServer().getWorlds()\n                .stream()\n                .filter(world -> !world.equals(receiverWorld))\n                .findFirst()\n                .ifPresent(world -> {\n                    receiver.setLocation(world.getSpawnLocation());\n                    receiver.setLocationAndRotation(oldLocation, rotation);\n                });\n    }\n}\n",
    "project": "ChangeSkin",
    "libraryName": "spongeapi",
    "libraryGroupID": "org.spongepowered",
    "newVersion": "8.0.0",
    "previousVersion": "7.4.0",
    "breakingCommit": "402082609522c66a3b790aedafd0570148a7d53f"
}