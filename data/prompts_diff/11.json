{
    "absolute_path_to_file_in_container": "/pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java",
    "errors": [
        {
            "line_number": 21,
            "message": "[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[21,33] package com.mysql.jdbc.exceptions does not exist",
            "additional_info": "",
            "file_name": "MySqlQueryExceptionHandler.java",
            "BCs": [],
            "Additions": [],
            "uid": "5b66b0e8-b19e-5645-aca5-455aa09227a6"
        },
        {
            "line_number": 40,
            "message": "[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[40,37] cannot find symbol",
            "additional_info": "  symbol:   class MySQLTimeoutException\n  location: class com.feedzai.commons.sql.abstraction.engine.impl.mysql.MySqlQueryExceptionHandler",
            "file_name": "MySqlQueryExceptionHandler.java",
            "BCs": [
                {
                    "element": "com.mysql.jdbc.exceptions.jdbc4.MySQLTimeoutException",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                },
                {
                    "element": "com.mysql.jdbc.exceptions.MySQLTimeoutException",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public null com.mysql.cj.jdbc.exceptions.MySQLTimeoutException",
                "++ public null com.mysql.cj.jdbc.exceptions.MySQLTimeoutException",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String,int)",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String,int)",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String)",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String)",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException()",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException()",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String)",
                "++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String)"
            ],
            "uid": "c813d779-6f67-5ce9-a892-21b4505edce4"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2019 Feedzai\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.feedzai.commons.sql.abstraction.engine.impl.mysql;\n\nimport com.feedzai.commons.sql.abstraction.engine.handler.QueryExceptionHandler;\n\nimport com.mysql.jdbc.exceptions.MySQLTimeoutException;\n\nimport java.sql.SQLException;\n\n/**\n * A specific implementation of {@link QueryExceptionHandler} for MySQL engine.\n *\n * @author Jos\u00e9 Fidalgo (jose.fidalgo@feedzai.com)\n * @since 2.5.1\n */\npublic class MySqlQueryExceptionHandler extends QueryExceptionHandler {\n\n    /**\n     * The MySQL error code that indicates a unique constraint violation.\n     */\n    private static final int UNIQUE_CONSTRAINT_VIOLATION_ERROR_CODE = 1062;\n\n    @Override\n    public boolean isTimeoutException(final SQLException exception) {\n        return exception instanceof MySQLTimeoutException || super.isTimeoutException(exception);\n    }\n\n    @Override\n    public boolean isUniqueConstraintViolationException(final SQLException exception) {\n        return UNIQUE_CONSTRAINT_VIOLATION_ERROR_CODE == exception.getErrorCode()\n                || super.isUniqueConstraintViolationException(exception);\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: mysql-connector-java 5.1.49->8.0.28. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.mysql.jdbc.exceptions.jdbc4.MySQLTimeoutException\n-- com.mysql.jdbc.exceptions.MySQLTimeoutException\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String)\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String)\n++ public null com.mysql.cj.jdbc.exceptions.MySQLTimeoutException\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException()\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String,int)\n\nThe error is triggered in the following specific lines in the previous code:\nimport com.mysql.jdbc.exceptions.MySQLTimeoutException;\n        return exception instanceof MySQLTimeoutException || super.isTimeoutException(exception);\nwith the following error message:\n[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[21,33] package com.mysql.jdbc.exceptions does not exist\n[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[40,37] cannot find symbol  symbol:   class MySQLTimeoutException\n  location: class com.feedzai.commons.sql.abstraction.engine.impl.mysql.MySqlQueryExceptionHandler\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import com.mysql.jdbc.exceptions.MySQLTimeoutException;\n        return exception instanceof MySQLTimeoutException || super.isTimeoutException(exception);",
    "error_message": "[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[21,33] package com.mysql.jdbc.exceptions does not exist\n[ERROR] /pdb/src/main/java/com/feedzai/commons/sql/abstraction/engine/impl/mysql/MySqlQueryExceptionHandler.java:[40,37] cannot find symbol  symbol:   class MySQLTimeoutException\n  location: class com.feedzai.commons.sql.abstraction.engine.impl.mysql.MySqlQueryExceptionHandler",
    "api_diff": "-- com.mysql.jdbc.exceptions.jdbc4.MySQLTimeoutException\n-- com.mysql.jdbc.exceptions.MySQLTimeoutException\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String)\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String)\n++ public null com.mysql.cj.jdbc.exceptions.MySQLTimeoutException\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException()\n++ public MySQLTimeoutException com.mysql.cj.jdbc.exceptions.MySQLTimeoutException(java.lang.String,java.lang.String,int)",
    "original_code": "/*\n * Copyright 2019 Feedzai\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.feedzai.commons.sql.abstraction.engine.impl.mysql;\n\nimport com.feedzai.commons.sql.abstraction.engine.handler.QueryExceptionHandler;\n\nimport com.mysql.jdbc.exceptions.MySQLTimeoutException;\n\nimport java.sql.SQLException;\n\n/**\n * A specific implementation of {@link QueryExceptionHandler} for MySQL engine.\n *\n * @author Jos\u00e9 Fidalgo (jose.fidalgo@feedzai.com)\n * @since 2.5.1\n */\npublic class MySqlQueryExceptionHandler extends QueryExceptionHandler {\n\n    /**\n     * The MySQL error code that indicates a unique constraint violation.\n     */\n    private static final int UNIQUE_CONSTRAINT_VIOLATION_ERROR_CODE = 1062;\n\n    @Override\n    public boolean isTimeoutException(final SQLException exception) {\n        return exception instanceof MySQLTimeoutException || super.isTimeoutException(exception);\n    }\n\n    @Override\n    public boolean isUniqueConstraintViolationException(final SQLException exception) {\n        return UNIQUE_CONSTRAINT_VIOLATION_ERROR_CODE == exception.getErrorCode()\n                || super.isUniqueConstraintViolationException(exception);\n    }\n}\n",
    "project": "pdb",
    "libraryName": "mysql-connector-java",
    "libraryGroupID": "mysql",
    "newVersion": "8.0.28",
    "previousVersion": "5.1.49",
    "breakingCommit": "0305beafdecb0b28f7c94264ed20cdc4e41ff067"
}