{
    "absolute_path_to_file_in_container": "/polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java",
    "errors": [
        {
            "line_number": 37,
            "message": "[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[37,10] Implicit super constructor Representer() is undefined. Must explicitly invoke another constructor",
            "additional_info": "",
            "file_name": "ModelRepresenter.java",
            "BCs": [],
            "Additions": [
                "++ public Representer org.yaml.snakeyaml.representer.Representer(org.yaml.snakeyaml.DumperOptions)"
            ],
            "uid": "a839bfed-53a6-5288-96e6-839d1bd4da08"
        },
        {
            "line_number": 218,
            "message": "[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[218,27] Exception IntrospectionException is not compatible with throws clause in Representer.getProperties(Class<? extends Object>)",
            "additional_info": "",
            "file_name": "ModelRepresenter.java",
            "BCs": [
                {
                    "element": "org.yaml.snakeyaml.introspector.PropertyUtils.getProperties",
                    "nature": "MUTATION",
                    "kind": "METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION"
                },
                {
                    "element": "org.yaml.snakeyaml.representer.Representer.getProperties",
                    "nature": "MUTATION",
                    "kind": "METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION"
                }
            ],
            "Additions": [
                "++ public Representer org.yaml.snakeyaml.representer.Representer(org.yaml.snakeyaml.DumperOptions)"
            ],
            "uid": "cefefb2b-0906-56bb-9a71-78ab5e5ec3ac"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/**\n * Copyright (c) 2012 to original author or authors\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n */\npackage org.sonatype.maven.polyglot.yaml;\n\nimport org.apache.maven.model.Contributor;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.model.Developer;\nimport org.apache.maven.model.Model;\nimport org.apache.maven.model.Plugin;\nimport org.codehaus.plexus.util.xml.Xpp3Dom;\nimport org.yaml.snakeyaml.error.YAMLException;\nimport org.yaml.snakeyaml.introspector.Property;\nimport org.yaml.snakeyaml.nodes.Node;\nimport org.yaml.snakeyaml.nodes.NodeTuple;\nimport org.yaml.snakeyaml.nodes.Tag;\nimport org.yaml.snakeyaml.representer.Represent;\nimport org.yaml.snakeyaml.representer.Representer;\n\nimport java.beans.IntrospectionException;\nimport java.util.*;\n\nimport static java.lang.String.format;\n\n/**\n * YAML model representer.\n *\n * @author jvanzyl\n * @author bentmann\n * @since 0.7\n */\nclass ModelRepresenter extends Representer {\n  public ModelRepresenter() {\n    this.representers.put(Xpp3Dom.class, new RepresentXpp3Dom());\n    Represent stringRepresenter = this.representers.get(String.class);\n    this.representers.put(Boolean.class, stringRepresenter);\n    this.multiRepresenters.put(Number.class, stringRepresenter);\n    this.multiRepresenters.put(Date.class, stringRepresenter);\n    this.multiRepresenters.put(Enum.class, stringRepresenter);\n    this.multiRepresenters.put(Calendar.class, stringRepresenter);\n  }\n\n  protected NodeTuple representJavaBeanProperty(Object javaBean, Property property,\n                                                Object propertyValue, Tag customTag) {\n    if (property != null && property.getName().equals(\"pomFile\")) {\n      // \"pomFile\" is not a part of POM http://maven.apache.org/xsd/maven-4.0.0.xsd\n      return null;\n    }\n\n    if (propertyValue == null) return null;\n    if (propertyValue instanceof Map) {\n      Map map = (Map) propertyValue;\n      if (map.isEmpty()) return null;\n    }\n    if (propertyValue instanceof List) {\n      List map = (List) propertyValue;\n      if (map.isEmpty()) return null;\n    }\n    if (javaBean instanceof Dependency) {\n      //skip optional if it is false\n      if (skipBoolean(property, \"optional\", propertyValue, false)) return null;\n      //skip type if it is jar\n      if (skipString(property, \"type\", propertyValue, \"jar\")) return null;\n    }\n    if (javaBean instanceof Plugin) {\n      //skip extensions if it is false\n      if (skipBoolean(property, \"extensions\", propertyValue, false)) return null;\n      //skip inherited if it is true\n      if (skipBoolean(property, \"inherited\", propertyValue, true)) return null;\n    }\n    return super.representJavaBeanProperty(javaBean, property, propertyValue, customTag);\n  }\n\n  private boolean skipString(Property property, String name, Object propertyValue, String value) {\n    if (name.equals(property.getName())) {\n      String v = (String) propertyValue;\n      return (value.equals(v));\n    }\n    return false;\n  }\n\n  private boolean skipBoolean(Property property, String name, Object propertyValue, boolean value) {\n    if (name.equals(property.getName())) {\n      Boolean v = (Boolean) propertyValue;\n      return (v.equals(value));\n    }\n    return false;\n  }\n\n\n  private class RepresentXpp3Dom implements Represent {\n    private static final String ATTRIBUTE_PREFIX = \"attr/\";\n\n    public Node representData(Object data) {\n      return representMapping(Tag.MAP, toMap((Xpp3Dom) data), null);\n    }\n\n    private Map<String, Object> toMap(Xpp3Dom node) {\n      Map<String, Object> map = new LinkedHashMap<>();\n\n      int n = node.getChildCount();\n      for (int i = 0; i < n; i++) {\n        Xpp3Dom child = node.getChild(i);\n        String childName = child.getName();\n\n        String singularName = null;\n        int childNameLength = childName.length();\n        if (\"reportPlugins\".equals(childName)) {\n          singularName = \"plugin\";\n        } else if (childNameLength > 3 && childName.endsWith(\"ies\")) {\n          singularName = childName.substring(0, childNameLength - 3);\n        } else if (childNameLength > 1 && childName.endsWith(\"s\")) {\n          singularName = childName.substring(0, childNameLength - 1);\n        }\n\n        Object childValue = child.getValue();\n        if (childValue == null) {\n          boolean isList = singularName != null;\n          if (isList) { // check for eventual list construction\n            for (int j = 0, grandChildCount = child.getChildCount(); j < grandChildCount; j++) {\n              String grandChildName = child.getChild(j).getName();\n              isList &= grandChildName.equals(singularName);\n            }\n          }\n          if (isList) {\n            childValue = toList(child, singularName);\n          } else {\n            childValue = toMap(child);\n          }\n        }\n        map.put(childName, childValue);\n      }\n\n      for (String attrName : node.getAttributeNames()) {\n        map.put(ATTRIBUTE_PREFIX + attrName, node.getAttribute(attrName));\n      }\n\n      return map;\n    }\n\n    private List<Object> toList(Xpp3Dom node, String childName) {\n      List<Object> list = new ArrayList<>();\n\n      int n = node.getChildCount();\n      for (int i = 0; i < n; i++) {\n        Xpp3Dom child = node.getChild(i);\n\n        if (!childName.equals(child.getName())) {\n          throw new YAMLException(format(\"child name: '%s' does not match expected name: '%s' at node %s\",\n              child.getName(), childName, node));\n        }\n\n        Object childValue = child.getValue();\n        if (childValue == null) {\n          childValue = toMap(child);\n        }\n        list.add(childValue);\n      }\n\n      return list;\n    }\n  }\n\n  // Model elements order {\n  //TODO move to polyglot-common, or to org.apache.maven:maven-model\n  private static List<String> ORDER_MODEL = new ArrayList<String>(Arrays.asList(\n\t\t  \"modelEncoding\",\n          \"modelVersion\",\n          \"parent\",\n          \"groupId\",\n          \"artifactId\",\n          \"version\",\n          \"packaging\",\n\n          \"name\",\n          \"description\",\n          \"url\",\n          \"inceptionYear\",\n          \"organization\",\n          \"licenses\",\n          \"developers\",\n          \"contributers\",\n          \"mailingLists\",\n          \"scm\",\n          \"issueManagement\",\n          \"ciManagement\",\n\n          \"properties\",\n          \"prerequisites\",\n          \"modules\",\n          \"dependencyManagement\",\n          \"dependencies\",\n          \"distributionManagement\",\n          //\"repositories\",\n          //\"pluginRepositories\",\n          \"build\",\n          \"profiles\",\n          \"reporting\"\n          ));\n  private static List<String> ORDER_DEVELOPER = new ArrayList<String>(Arrays.asList(\n\t\t  \"name\", \"id\", \"email\"));\n  private static List<String> ORDER_CONTRIBUTOR = new ArrayList<String>(Arrays.asList(\n\t\t  \"name\", \"id\", \"email\"));\n  private static List<String> ORDER_DEPENDENCY = new ArrayList<String>(Arrays.asList(\n\t\t  \"groupId\", \"artifactId\", \"version\", \"type\", \"classifier\", \"scope\"));\n  private static List<String> ORDER_PLUGIN = new ArrayList<String>(Arrays.asList(\n\t\t  \"groupId\", \"artifactId\", \"version\", \"inherited\", \"extensions\", \"configuration\"));\n  //}\n\n  /*\n   * Change the default order. Important data goes first.\n   */\n  @Override\n  protected Set<Property> getProperties(Class<? extends Object> type)\n          throws IntrospectionException {\n    if (type.isAssignableFrom(Model.class)) {\n      return sortTypeWithOrder(type, ORDER_MODEL);\n    } else if (type.isAssignableFrom(Developer.class)) {\n      return sortTypeWithOrder(type, ORDER_DEVELOPER);\n    } else if (type.isAssignableFrom(Contributor.class)) {\n      return sortTypeWithOrder(type, ORDER_CONTRIBUTOR);\n    }  else if (type.isAssignableFrom(Dependency.class)) {\n      return sortTypeWithOrder(type, ORDER_DEPENDENCY);\n    }  else if (type.isAssignableFrom(Plugin.class)) {\n      return sortTypeWithOrder(type, ORDER_PLUGIN);\n    } else {\n      return super.getProperties(type);\n    }\n  }\n\n  private Set<Property> sortTypeWithOrder(Class<? extends Object> type, List<String> order)\n          throws IntrospectionException {\n      Set<Property> standard = super.getProperties(type);\n      Set<Property> sorted = new TreeSet<Property>(new ModelPropertyComparator(order));\n      sorted.addAll(standard);\n      return sorted;\n  }\n\n  private class ModelPropertyComparator implements Comparator<Property> {\n    private List<String> names;\n\n    public ModelPropertyComparator(List<String> names) {\n      this.names = names;\n    }\n\n    public int compare(Property o1, Property o2) {\n      // important go first\n      for (String name : names) {\n        int c = compareByName(o1, o2, name);\n        if (c != 0) {\n          return c;\n        }\n      }\n      // all the rest\n      return o1.compareTo(o2);\n    }\n\n    private int compareByName(Property o1, Property o2, String name) {\n      if (o1.getName().equals(name)) {\n        return -1;\n      } else if (o2.getName().equals(name)) {\n        return 1;\n      }\n      return 0;// compare further\n    }\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: snakeyaml 1.17->2.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n~~ METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION <- org.yaml.snakeyaml.introspector.PropertyUtils.getProperties\n~~ METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION <- org.yaml.snakeyaml.representer.Representer.getProperties\n++ public Representer org.yaml.snakeyaml.representer.Representer(org.yaml.snakeyaml.DumperOptions)\n\nThe error is triggered in the following specific lines in the previous code:\n  public ModelRepresenter() {\n  protected Set<Property> getProperties(Class<? extends Object> type)\nwith the following error message:\n[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[37,10] Implicit super constructor Representer() is undefined. Must explicitly invoke another constructor\n[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[218,27] Exception IntrospectionException is not compatible with throws clause in Representer.getProperties(Class<? extends Object>)\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "  public ModelRepresenter() {\n  protected Set<Property> getProperties(Class<? extends Object> type)",
    "error_message": "[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[37,10] Implicit super constructor Representer() is undefined. Must explicitly invoke another constructor\n[ERROR] /polyglot-maven/polyglot-yaml/src/main/java/org/sonatype/maven/polyglot/yaml/ModelRepresenter.java:[218,27] Exception IntrospectionException is not compatible with throws clause in Representer.getProperties(Class<? extends Object>)",
    "api_diff": "~~ METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION <- org.yaml.snakeyaml.introspector.PropertyUtils.getProperties\n~~ METHOD_NO_LONGER_THROWS_CHECKED_EXCEPTION <- org.yaml.snakeyaml.representer.Representer.getProperties\n++ public Representer org.yaml.snakeyaml.representer.Representer(org.yaml.snakeyaml.DumperOptions)",
    "original_code": "/**\n * Copyright (c) 2012 to original author or authors\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n */\npackage org.sonatype.maven.polyglot.yaml;\n\nimport org.apache.maven.model.Contributor;\nimport org.apache.maven.model.Dependency;\nimport org.apache.maven.model.Developer;\nimport org.apache.maven.model.Model;\nimport org.apache.maven.model.Plugin;\nimport org.codehaus.plexus.util.xml.Xpp3Dom;\nimport org.yaml.snakeyaml.error.YAMLException;\nimport org.yaml.snakeyaml.introspector.Property;\nimport org.yaml.snakeyaml.nodes.Node;\nimport org.yaml.snakeyaml.nodes.NodeTuple;\nimport org.yaml.snakeyaml.nodes.Tag;\nimport org.yaml.snakeyaml.representer.Represent;\nimport org.yaml.snakeyaml.representer.Representer;\n\nimport java.beans.IntrospectionException;\nimport java.util.*;\n\nimport static java.lang.String.format;\n\n/**\n * YAML model representer.\n *\n * @author jvanzyl\n * @author bentmann\n * @since 0.7\n */\nclass ModelRepresenter extends Representer {\n  public ModelRepresenter() {\n    this.representers.put(Xpp3Dom.class, new RepresentXpp3Dom());\n    Represent stringRepresenter = this.representers.get(String.class);\n    this.representers.put(Boolean.class, stringRepresenter);\n    this.multiRepresenters.put(Number.class, stringRepresenter);\n    this.multiRepresenters.put(Date.class, stringRepresenter);\n    this.multiRepresenters.put(Enum.class, stringRepresenter);\n    this.multiRepresenters.put(Calendar.class, stringRepresenter);\n  }\n\n  protected NodeTuple representJavaBeanProperty(Object javaBean, Property property,\n                                                Object propertyValue, Tag customTag) {\n    if (property != null && property.getName().equals(\"pomFile\")) {\n      // \"pomFile\" is not a part of POM http://maven.apache.org/xsd/maven-4.0.0.xsd\n      return null;\n    }\n\n    if (propertyValue == null) return null;\n    if (propertyValue instanceof Map) {\n      Map map = (Map) propertyValue;\n      if (map.isEmpty()) return null;\n    }\n    if (propertyValue instanceof List) {\n      List map = (List) propertyValue;\n      if (map.isEmpty()) return null;\n    }\n    if (javaBean instanceof Dependency) {\n      //skip optional if it is false\n      if (skipBoolean(property, \"optional\", propertyValue, false)) return null;\n      //skip type if it is jar\n      if (skipString(property, \"type\", propertyValue, \"jar\")) return null;\n    }\n    if (javaBean instanceof Plugin) {\n      //skip extensions if it is false\n      if (skipBoolean(property, \"extensions\", propertyValue, false)) return null;\n      //skip inherited if it is true\n      if (skipBoolean(property, \"inherited\", propertyValue, true)) return null;\n    }\n    return super.representJavaBeanProperty(javaBean, property, propertyValue, customTag);\n  }\n\n  private boolean skipString(Property property, String name, Object propertyValue, String value) {\n    if (name.equals(property.getName())) {\n      String v = (String) propertyValue;\n      return (value.equals(v));\n    }\n    return false;\n  }\n\n  private boolean skipBoolean(Property property, String name, Object propertyValue, boolean value) {\n    if (name.equals(property.getName())) {\n      Boolean v = (Boolean) propertyValue;\n      return (v.equals(value));\n    }\n    return false;\n  }\n\n\n  private class RepresentXpp3Dom implements Represent {\n    private static final String ATTRIBUTE_PREFIX = \"attr/\";\n\n    public Node representData(Object data) {\n      return representMapping(Tag.MAP, toMap((Xpp3Dom) data), null);\n    }\n\n    private Map<String, Object> toMap(Xpp3Dom node) {\n      Map<String, Object> map = new LinkedHashMap<>();\n\n      int n = node.getChildCount();\n      for (int i = 0; i < n; i++) {\n        Xpp3Dom child = node.getChild(i);\n        String childName = child.getName();\n\n        String singularName = null;\n        int childNameLength = childName.length();\n        if (\"reportPlugins\".equals(childName)) {\n          singularName = \"plugin\";\n        } else if (childNameLength > 3 && childName.endsWith(\"ies\")) {\n          singularName = childName.substring(0, childNameLength - 3);\n        } else if (childNameLength > 1 && childName.endsWith(\"s\")) {\n          singularName = childName.substring(0, childNameLength - 1);\n        }\n\n        Object childValue = child.getValue();\n        if (childValue == null) {\n          boolean isList = singularName != null;\n          if (isList) { // check for eventual list construction\n            for (int j = 0, grandChildCount = child.getChildCount(); j < grandChildCount; j++) {\n              String grandChildName = child.getChild(j).getName();\n              isList &= grandChildName.equals(singularName);\n            }\n          }\n          if (isList) {\n            childValue = toList(child, singularName);\n          } else {\n            childValue = toMap(child);\n          }\n        }\n        map.put(childName, childValue);\n      }\n\n      for (String attrName : node.getAttributeNames()) {\n        map.put(ATTRIBUTE_PREFIX + attrName, node.getAttribute(attrName));\n      }\n\n      return map;\n    }\n\n    private List<Object> toList(Xpp3Dom node, String childName) {\n      List<Object> list = new ArrayList<>();\n\n      int n = node.getChildCount();\n      for (int i = 0; i < n; i++) {\n        Xpp3Dom child = node.getChild(i);\n\n        if (!childName.equals(child.getName())) {\n          throw new YAMLException(format(\"child name: '%s' does not match expected name: '%s' at node %s\",\n              child.getName(), childName, node));\n        }\n\n        Object childValue = child.getValue();\n        if (childValue == null) {\n          childValue = toMap(child);\n        }\n        list.add(childValue);\n      }\n\n      return list;\n    }\n  }\n\n  // Model elements order {\n  //TODO move to polyglot-common, or to org.apache.maven:maven-model\n  private static List<String> ORDER_MODEL = new ArrayList<String>(Arrays.asList(\n\t\t  \"modelEncoding\",\n          \"modelVersion\",\n          \"parent\",\n          \"groupId\",\n          \"artifactId\",\n          \"version\",\n          \"packaging\",\n\n          \"name\",\n          \"description\",\n          \"url\",\n          \"inceptionYear\",\n          \"organization\",\n          \"licenses\",\n          \"developers\",\n          \"contributers\",\n          \"mailingLists\",\n          \"scm\",\n          \"issueManagement\",\n          \"ciManagement\",\n\n          \"properties\",\n          \"prerequisites\",\n          \"modules\",\n          \"dependencyManagement\",\n          \"dependencies\",\n          \"distributionManagement\",\n          //\"repositories\",\n          //\"pluginRepositories\",\n          \"build\",\n          \"profiles\",\n          \"reporting\"\n          ));\n  private static List<String> ORDER_DEVELOPER = new ArrayList<String>(Arrays.asList(\n\t\t  \"name\", \"id\", \"email\"));\n  private static List<String> ORDER_CONTRIBUTOR = new ArrayList<String>(Arrays.asList(\n\t\t  \"name\", \"id\", \"email\"));\n  private static List<String> ORDER_DEPENDENCY = new ArrayList<String>(Arrays.asList(\n\t\t  \"groupId\", \"artifactId\", \"version\", \"type\", \"classifier\", \"scope\"));\n  private static List<String> ORDER_PLUGIN = new ArrayList<String>(Arrays.asList(\n\t\t  \"groupId\", \"artifactId\", \"version\", \"inherited\", \"extensions\", \"configuration\"));\n  //}\n\n  /*\n   * Change the default order. Important data goes first.\n   */\n  @Override\n  protected Set<Property> getProperties(Class<? extends Object> type)\n          throws IntrospectionException {\n    if (type.isAssignableFrom(Model.class)) {\n      return sortTypeWithOrder(type, ORDER_MODEL);\n    } else if (type.isAssignableFrom(Developer.class)) {\n      return sortTypeWithOrder(type, ORDER_DEVELOPER);\n    } else if (type.isAssignableFrom(Contributor.class)) {\n      return sortTypeWithOrder(type, ORDER_CONTRIBUTOR);\n    }  else if (type.isAssignableFrom(Dependency.class)) {\n      return sortTypeWithOrder(type, ORDER_DEPENDENCY);\n    }  else if (type.isAssignableFrom(Plugin.class)) {\n      return sortTypeWithOrder(type, ORDER_PLUGIN);\n    } else {\n      return super.getProperties(type);\n    }\n  }\n\n  private Set<Property> sortTypeWithOrder(Class<? extends Object> type, List<String> order)\n          throws IntrospectionException {\n      Set<Property> standard = super.getProperties(type);\n      Set<Property> sorted = new TreeSet<Property>(new ModelPropertyComparator(order));\n      sorted.addAll(standard);\n      return sorted;\n  }\n\n  private class ModelPropertyComparator implements Comparator<Property> {\n    private List<String> names;\n\n    public ModelPropertyComparator(List<String> names) {\n      this.names = names;\n    }\n\n    public int compare(Property o1, Property o2) {\n      // important go first\n      for (String name : names) {\n        int c = compareByName(o1, o2, name);\n        if (c != 0) {\n          return c;\n        }\n      }\n      // all the rest\n      return o1.compareTo(o2);\n    }\n\n    private int compareByName(Property o1, Property o2, String name) {\n      if (o1.getName().equals(name)) {\n        return -1;\n      } else if (o2.getName().equals(name)) {\n        return 1;\n      }\n      return 0;// compare further\n    }\n  }\n}\n",
    "project": "polyglot-maven",
    "libraryName": "snakeyaml",
    "libraryGroupID": "org.yaml",
    "newVersion": "2.0",
    "previousVersion": "1.17",
    "breakingCommit": "1e17e176460ab4283e463e62fece844d341da7f0"
}