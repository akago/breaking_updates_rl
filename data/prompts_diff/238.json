{
    "absolute_path_to_file_in_container": "/quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java",
    "errors": [
        {
            "line_number": 43,
            "message": "[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[43,9] constructor SslFilter in class org.apache.mina.filter.ssl.SslFilter cannot be applied to given types;",
            "additional_info": "  required: javax.net.ssl.SSLContext\n  found: javax.net.ssl.SSLContext,boolean\n  reason: actual and formal argument lists differ in length",
            "file_name": "SSLFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "c7040e1b-68f7-57a6-ba43-3efb1a43d72a"
        },
        {
            "line_number": 78,
            "message": "[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[78,38] cannot find symbol",
            "additional_info": "  symbol:   variable PEER_ADDRESS\n  location: class quickfix.mina.ssl.SSLFilter",
            "file_name": "SSLFilter.java",
            "BCs": [
                {
                    "element": "org.apache.mina.filter.ssl.SslFilter.PEER_ADDRESS",
                    "nature": "DELETION",
                    "kind": "FIELD_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "454a10f1-ef74-53f1-90ea-5296c519ec2f"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*******************************************************************************\n * Copyright (c) quickfixengine.org  All rights reserved.\n *\n * This file is part of the QuickFIX FIX Engine\n *\n * This file may be distributed under the terms of the quickfixengine.org\n * license as defined by quickfixengine.org and appearing in the file\n * LICENSE included in the packaging of this file.\n *\n * This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING\n * THE WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE.\n *\n * See http://www.quickfixengine.org/LICENSE for licensing information.\n *\n * Contact ask@quickfixengine.org if any conditions of this licensing\n * are not clear to you.\n ******************************************************************************/\n\npackage quickfix.mina.ssl;\n\nimport java.net.InetSocketAddress;\nimport java.net.SocketAddress;\nimport javax.net.ssl.SSLContext;\n\nimport javax.net.ssl.SSLException;\nimport org.apache.mina.core.filterchain.IoFilterChain;\nimport org.apache.mina.core.session.IoSession;\nimport org.apache.mina.filter.ssl.SslFilter;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * An extended SSL filter based on MINA {@link SslFilter} that applies\n * some adaptations.\n */\npublic class SSLFilter extends SslFilter {\n\n    private final Logger log = LoggerFactory.getLogger(getClass());\n    private boolean useSNI;\n\n    public SSLFilter(SSLContext sslContext, boolean autoStart) {\n        super(sslContext, autoStart);\n    }\n\n    public SSLFilter(SSLContext sslContext) {\n        super(sslContext);\n    }\n\n    /**\n     * Called from {@link SslFilter#onPreAdd} every time a new\n     * session is created which makes it impossible to override enabled cipher\n     * suites configuration.\n     */\n    @Override\n    public void setEnabledCipherSuites(String[] cipherSuites) {\n    }\n\n    public void setCipherSuites(String[] cipherSuites) {\n        super.setEnabledCipherSuites(cipherSuites);\n    }\n\n    /**\n     * Called before filter is added into the chain.\n     * We activate Server Name Indication if it is enabled in the session config.\n     */\n    @Override\n    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\n        throws SSLException {\n\n        if (useSNI) {\n            IoSession session = parent.getSession();\n            SocketAddress remoteAddress = session.getRemoteAddress();\n\n            if (remoteAddress instanceof InetSocketAddress) {\n                // activate the SNI support in the JSSE SSLEngine\n                log.info(\"Activating TLS SNI support for peer address: {}\", remoteAddress);\n                session.setAttribute(PEER_ADDRESS, remoteAddress);\n            }\n        }\n\n        super.onPreAdd(parent, name, nextFilter);\n    }\n\n    public void setUseSNI(boolean useSNI) {\n        this.useSNI = useSNI;\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: mina-core 2.1.5->2.2.1. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.apache.mina.filter.ssl.SslFilter.setUseClientMode\n++ METHOD_ADDED_TO_INTERFACE <- org.apache.mina.core.session.IoSession\n-- org.apache.mina.filter.ssl.SslFilter.PEER_ADDRESS\n-- org.apache.mina.filter.ssl.SslFilter.initiateHandshake\n\nThe error is triggered in the following specific lines in the previous code:\n        super(sslContext, autoStart);\n                session.setAttribute(PEER_ADDRESS, remoteAddress);\nwith the following error message:\n[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[43,9] constructor SslFilter in class org.apache.mina.filter.ssl.SslFilter cannot be applied to given types;  required: javax.net.ssl.SSLContext\n  found: javax.net.ssl.SSLContext,boolean\n  reason: actual and formal argument lists differ in length\n[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[78,38] cannot find symbol  symbol:   variable PEER_ADDRESS\n  location: class quickfix.mina.ssl.SSLFilter\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "        super(sslContext, autoStart);\n                session.setAttribute(PEER_ADDRESS, remoteAddress);",
    "error_message": "[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[43,9] constructor SslFilter in class org.apache.mina.filter.ssl.SslFilter cannot be applied to given types;  required: javax.net.ssl.SSLContext\n  found: javax.net.ssl.SSLContext,boolean\n  reason: actual and formal argument lists differ in length\n[ERROR] /quickfixj/quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java:[78,38] cannot find symbol  symbol:   variable PEER_ADDRESS\n  location: class quickfix.mina.ssl.SSLFilter",
    "api_diff": "-- org.apache.mina.filter.ssl.SslFilter.setUseClientMode\n++ METHOD_ADDED_TO_INTERFACE <- org.apache.mina.core.session.IoSession\n-- org.apache.mina.filter.ssl.SslFilter.PEER_ADDRESS\n-- org.apache.mina.filter.ssl.SslFilter.initiateHandshake",
    "original_code": "/*******************************************************************************\n * Copyright (c) quickfixengine.org  All rights reserved.\n *\n * This file is part of the QuickFIX FIX Engine\n *\n * This file may be distributed under the terms of the quickfixengine.org\n * license as defined by quickfixengine.org and appearing in the file\n * LICENSE included in the packaging of this file.\n *\n * This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING\n * THE WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE.\n *\n * See http://www.quickfixengine.org/LICENSE for licensing information.\n *\n * Contact ask@quickfixengine.org if any conditions of this licensing\n * are not clear to you.\n ******************************************************************************/\n\npackage quickfix.mina.ssl;\n\nimport java.net.InetSocketAddress;\nimport java.net.SocketAddress;\nimport javax.net.ssl.SSLContext;\n\nimport javax.net.ssl.SSLException;\nimport org.apache.mina.core.filterchain.IoFilterChain;\nimport org.apache.mina.core.session.IoSession;\nimport org.apache.mina.filter.ssl.SslFilter;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * An extended SSL filter based on MINA {@link SslFilter} that applies\n * some adaptations.\n */\npublic class SSLFilter extends SslFilter {\n\n    private final Logger log = LoggerFactory.getLogger(getClass());\n    private boolean useSNI;\n\n    public SSLFilter(SSLContext sslContext, boolean autoStart) {\n        super(sslContext, autoStart);\n    }\n\n    public SSLFilter(SSLContext sslContext) {\n        super(sslContext);\n    }\n\n    /**\n     * Called from {@link SslFilter#onPreAdd} every time a new\n     * session is created which makes it impossible to override enabled cipher\n     * suites configuration.\n     */\n    @Override\n    public void setEnabledCipherSuites(String[] cipherSuites) {\n    }\n\n    public void setCipherSuites(String[] cipherSuites) {\n        super.setEnabledCipherSuites(cipherSuites);\n    }\n\n    /**\n     * Called before filter is added into the chain.\n     * We activate Server Name Indication if it is enabled in the session config.\n     */\n    @Override\n    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\n        throws SSLException {\n\n        if (useSNI) {\n            IoSession session = parent.getSession();\n            SocketAddress remoteAddress = session.getRemoteAddress();\n\n            if (remoteAddress instanceof InetSocketAddress) {\n                // activate the SNI support in the JSSE SSLEngine\n                log.info(\"Activating TLS SNI support for peer address: {}\", remoteAddress);\n                session.setAttribute(PEER_ADDRESS, remoteAddress);\n            }\n        }\n\n        super.onPreAdd(parent, name, nextFilter);\n    }\n\n    public void setUseSNI(boolean useSNI) {\n        this.useSNI = useSNI;\n    }\n}\n",
    "project": "quickfixj",
    "libraryName": "mina-core",
    "libraryGroupID": "org.apache.mina",
    "newVersion": "2.2.1",
    "previousVersion": "2.1.5",
    "breakingCommit": "00a7cc31784ac4a9cc27d506a73ae589d6df36d6"
}