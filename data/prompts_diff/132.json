{
    "absolute_path_to_file_in_container": "/dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java",
    "errors": [
        {
            "line_number": 5,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[5,21] package javax.servlet does not exist",
            "additional_info": "",
            "file_name": "J2EHelper.java",
            "BCs": [],
            "Additions": [],
            "uid": "7e18e9e6-6fc2-5f0a-b048-59eabf2851ae"
        },
        {
            "line_number": 6,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[6,21] package javax.servlet does not exist",
            "additional_info": "",
            "file_name": "J2EHelper.java",
            "BCs": [],
            "Additions": [],
            "uid": "7e18e9e6-6fc2-5f0a-b048-59eabf2851ae"
        },
        {
            "line_number": 37,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[37,15] cannot access javax.servlet.Filter",
            "additional_info": "  class file for javax.servlet.Filter not found",
            "file_name": "J2EHelper.java",
            "BCs": [],
            "Additions": [],
            "uid": "bdd0a5f7-f9c8-552b-8ded-96e734b9ce93"
        },
        {
            "line_number": 76,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[76,33] package FilterRegistration does not exist",
            "additional_info": "",
            "file_name": "J2EHelper.java",
            "BCs": [
                {
                    "element": "javax.servlet.FilterRegistration",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public abstract interface null jakarta.servlet.FilterRegistration"
            ],
            "uid": "09158928-1915-55c7-a1a5-cdd3b72087b4"
        },
        {
            "line_number": 77,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[77,28] no suitable method found for addFilter(java.lang.String,org.pac4j.jee.filter.AbstractConfigFilter)",
            "additional_info": "    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,javax.servlet.Filter) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to javax.servlet.Filter)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,java.lang.Class<? extends javax.servlet.Filter>) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to java.lang.Class<? extends javax.servlet.Filter>)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,org.eclipse.jetty.servlet.FilterHolder) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to org.eclipse.jetty.servlet.FilterHolder)",
            "file_name": "J2EHelper.java",
            "BCs": [],
            "Additions": [],
            "uid": "c500b5d6-4668-5bf4-91e1-340470f8098c"
        },
        {
            "line_number": 80,
            "message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[80,28] cannot find symbol",
            "additional_info": "  symbol:   variable DispatcherType\n  location: class org.pac4j.dropwizard.J2EHelper",
            "file_name": "J2EHelper.java",
            "BCs": [
                {
                    "element": "javax.servlet.DispatcherType",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public final null jakarta.servlet.DispatcherType",
                "++ public final null jakarta.servlet.DispatcherType"
            ],
            "uid": "88099687-1115-57fa-9d4a-2252b3f981db"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage org.pac4j.dropwizard;\n\nimport java.util.EnumSet;\n\nimport javax.servlet.DispatcherType;\nimport javax.servlet.FilterRegistration;\n\nimport org.pac4j.core.config.Config;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletCallbackFilterConfiguration;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletLogoutFilterConfiguration;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletSecurityFilterConfiguration;\n\nimport io.dropwizard.setup.Environment;\nimport org.pac4j.jee.filter.AbstractConfigFilter;\nimport org.pac4j.jee.filter.CallbackFilter;\nimport org.pac4j.jee.filter.LogoutFilter;\nimport org.pac4j.jee.filter.SecurityFilter;\n\n/**\n *\n * @author Evan Meagher\n * @author Victor Noel - Linagora\n * @since 1.1.0\n *\n */\npublic final class J2EHelper {\n\n    private J2EHelper() {\n        // utility class\n    }\n\n    public static void registerSecurityFilter(Environment environment,\n            Config config, ServletSecurityFilterConfiguration fConf) {\n\n        final SecurityFilter filter = new SecurityFilter();\n\n        filter.setClients(fConf.getClients());\n        filter.setAuthorizers(fConf.getAuthorizers());\n        filter.setMatchers(fConf.getMatchers());\n        filter.setMultiProfile(fConf.getMultiProfile());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    public static void registerCallbackFilter(Environment environment,\n            Config config, ServletCallbackFilterConfiguration fConf) {\n\n        final CallbackFilter filter = new CallbackFilter();\n\n        filter.setDefaultUrl(fConf.getDefaultUrl());\n        filter.setMultiProfile(fConf.getMultiProfile());\n        filter.setRenewSession(fConf.getRenewSession());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    public static void registerLogoutFilter(Environment environment,\n            Config config, ServletLogoutFilterConfiguration fConf) {\n\n        final LogoutFilter filter = new LogoutFilter();\n\n        filter.setDefaultUrl(fConf.getDefaultUrl());\n        filter.setLogoutUrlPattern(fConf.getLogoutUrlPattern());\n        filter.setLocalLogout(fConf.getLocalLogout());\n        filter.setDestroySession(fConf.getDestroySession());\n        filter.setCentralLogout(fConf.getCentralLogout());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    private static void registerFilter(Environment environment, Config config,\n                                       AbstractConfigFilter filter, String mapping) {\n\n        filter.setConfigOnly(config);\n\n        final FilterRegistration.Dynamic filterRegistration = environment\n                .servlets().addFilter(filter.getClass().getName(), filter);\n\n        filterRegistration.addMappingForUrlPatterns(\n                EnumSet.of(DispatcherType.REQUEST), true, mapping);\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: jakarta.servlet-api 4.0.4->6.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- javax.servlet.FilterRegistration\n-- javax.servlet.DispatcherType\n++ public final null jakarta.servlet.DispatcherType\n++ public abstract interface null jakarta.servlet.FilterRegistration\n\nThe error is triggered in the following specific lines in the previous code:\nimport javax.servlet.DispatcherType;\nimport javax.servlet.FilterRegistration;\n        filter.setClients(fConf.getClients());\n        final FilterRegistration.Dynamic filterRegistration = environment\n                .servlets().addFilter(filter.getClass().getName(), filter);\n                EnumSet.of(DispatcherType.REQUEST), true, mapping);\nwith the following error message:\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[5,21] package javax.servlet does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[6,21] package javax.servlet does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[37,15] cannot access javax.servlet.Filter  class file for javax.servlet.Filter not found\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[76,33] package FilterRegistration does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[77,28] no suitable method found for addFilter(java.lang.String,org.pac4j.jee.filter.AbstractConfigFilter)    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,javax.servlet.Filter) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to javax.servlet.Filter)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,java.lang.Class<? extends javax.servlet.Filter>) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to java.lang.Class<? extends javax.servlet.Filter>)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,org.eclipse.jetty.servlet.FilterHolder) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to org.eclipse.jetty.servlet.FilterHolder)\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[80,28] cannot find symbol  symbol:   variable DispatcherType\n  location: class org.pac4j.dropwizard.J2EHelper\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import javax.servlet.DispatcherType;\nimport javax.servlet.FilterRegistration;\n        filter.setClients(fConf.getClients());\n        final FilterRegistration.Dynamic filterRegistration = environment\n                .servlets().addFilter(filter.getClass().getName(), filter);\n                EnumSet.of(DispatcherType.REQUEST), true, mapping);",
    "error_message": "[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[5,21] package javax.servlet does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[6,21] package javax.servlet does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[37,15] cannot access javax.servlet.Filter  class file for javax.servlet.Filter not found\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[76,33] package FilterRegistration does not exist\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[77,28] no suitable method found for addFilter(java.lang.String,org.pac4j.jee.filter.AbstractConfigFilter)    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,javax.servlet.Filter) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to javax.servlet.Filter)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,java.lang.Class<? extends javax.servlet.Filter>) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to java.lang.Class<? extends javax.servlet.Filter>)\n    method io.dropwizard.jetty.setup.ServletEnvironment.addFilter(java.lang.String,org.eclipse.jetty.servlet.FilterHolder) is not applicable\n      (argument mismatch; org.pac4j.jee.filter.AbstractConfigFilter cannot be converted to org.eclipse.jetty.servlet.FilterHolder)\n[ERROR] /dropwizard-pac4j/src/main/java/org/pac4j/dropwizard/J2EHelper.java:[80,28] cannot find symbol  symbol:   variable DispatcherType\n  location: class org.pac4j.dropwizard.J2EHelper",
    "api_diff": "-- javax.servlet.FilterRegistration\n-- javax.servlet.DispatcherType\n++ public final null jakarta.servlet.DispatcherType\n++ public abstract interface null jakarta.servlet.FilterRegistration",
    "original_code": "package org.pac4j.dropwizard;\n\nimport java.util.EnumSet;\n\nimport javax.servlet.DispatcherType;\nimport javax.servlet.FilterRegistration;\n\nimport org.pac4j.core.config.Config;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletCallbackFilterConfiguration;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletLogoutFilterConfiguration;\nimport org.pac4j.dropwizard.Pac4jFactory.ServletSecurityFilterConfiguration;\n\nimport io.dropwizard.setup.Environment;\nimport org.pac4j.jee.filter.AbstractConfigFilter;\nimport org.pac4j.jee.filter.CallbackFilter;\nimport org.pac4j.jee.filter.LogoutFilter;\nimport org.pac4j.jee.filter.SecurityFilter;\n\n/**\n *\n * @author Evan Meagher\n * @author Victor Noel - Linagora\n * @since 1.1.0\n *\n */\npublic final class J2EHelper {\n\n    private J2EHelper() {\n        // utility class\n    }\n\n    public static void registerSecurityFilter(Environment environment,\n            Config config, ServletSecurityFilterConfiguration fConf) {\n\n        final SecurityFilter filter = new SecurityFilter();\n\n        filter.setClients(fConf.getClients());\n        filter.setAuthorizers(fConf.getAuthorizers());\n        filter.setMatchers(fConf.getMatchers());\n        filter.setMultiProfile(fConf.getMultiProfile());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    public static void registerCallbackFilter(Environment environment,\n            Config config, ServletCallbackFilterConfiguration fConf) {\n\n        final CallbackFilter filter = new CallbackFilter();\n\n        filter.setDefaultUrl(fConf.getDefaultUrl());\n        filter.setMultiProfile(fConf.getMultiProfile());\n        filter.setRenewSession(fConf.getRenewSession());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    public static void registerLogoutFilter(Environment environment,\n            Config config, ServletLogoutFilterConfiguration fConf) {\n\n        final LogoutFilter filter = new LogoutFilter();\n\n        filter.setDefaultUrl(fConf.getDefaultUrl());\n        filter.setLogoutUrlPattern(fConf.getLogoutUrlPattern());\n        filter.setLocalLogout(fConf.getLocalLogout());\n        filter.setDestroySession(fConf.getDestroySession());\n        filter.setCentralLogout(fConf.getCentralLogout());\n\n        registerFilter(environment, config, filter, fConf.getMapping());\n    }\n\n    private static void registerFilter(Environment environment, Config config,\n                                       AbstractConfigFilter filter, String mapping) {\n\n        filter.setConfigOnly(config);\n\n        final FilterRegistration.Dynamic filterRegistration = environment\n                .servlets().addFilter(filter.getClass().getName(), filter);\n\n        filterRegistration.addMappingForUrlPatterns(\n                EnumSet.of(DispatcherType.REQUEST), true, mapping);\n    }\n}\n",
    "project": "dropwizard-pac4j",
    "libraryName": "jakarta.servlet-api",
    "libraryGroupID": "jakarta.servlet",
    "newVersion": "6.0.0",
    "previousVersion": "4.0.4",
    "breakingCommit": "115827c6675f532a4d33751d1a0c0ba394bbd304"
}