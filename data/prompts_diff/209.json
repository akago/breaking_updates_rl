{
    "absolute_path_to_file_in_container": "/depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java",
    "errors": [
        {
            "line_number": 36,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[36,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 37,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[37,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 59,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[59,12] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "ac07c590-79b3-5778-837c-c64dd9323627"
        },
        {
            "line_number": 66,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[66,95] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "57120625-9a27-5657-b9b1-b7d4b33cb0d6"
        },
        {
            "line_number": 67,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[67,103] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "57120625-9a27-5657-b9b1-b7d4b33cb0d6"
        },
        {
            "line_number": 68,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[68,113] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "57120625-9a27-5657-b9b1-b7d4b33cb0d6"
        },
        {
            "line_number": 69,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[69,121] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "57120625-9a27-5657-b9b1-b7d4b33cb0d6"
        },
        {
            "line_number": 80,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[80,16] cannot find symbol",
            "additional_info": "  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "ac07c590-79b3-5778-837c-c64dd9323627"
        },
        {
            "line_number": 82,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[82,16] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 93,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[93,30] constructor DependencyTypes in class se.kth.depclean.core.analysis.DependencyTypes cannot be applied to given types;",
            "additional_info": "  required: no arguments\n  found: java.util.Set<se.kth.depclean.core.model.ClassName>,java.util.Set<se.kth.depclean.core.model.ClassName>\n  reason: actual and formal argument lists differ in length",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "9f9f06cf-d635-5ea0-9234-6340f4cf8e93"
        },
        {
            "line_number": 100,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[100,29] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 101,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[101,29] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 107,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[107,29] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 108,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[108,29] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 114,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[114,29] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 115,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[115,29] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 121,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[121,29] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 122,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[122,29] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 127,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[127,41] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 131,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[131,41] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 135,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[135,41] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 139,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[139,41] cannot find symbol",
            "additional_info": "  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "c20de616-ea8d-5a03-9121-a5b624a5f029"
        },
        {
            "line_number": 177,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[177,64] invalid method reference",
            "additional_info": "  cannot find symbol\n    symbol:   method getValue()\n    location: class se.kth.depclean.core.model.Scope",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "80de8c6a-3296-5605-9d3c-2ba489847835"
        },
        {
            "line_number": 178,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[178,7] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 179,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[179,7] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        },
        {
            "line_number": 180,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[180,51] cannot find symbol",
            "additional_info": "  symbol:   method getScope()\n  location: variable unusedDependency of type se.kth.depclean.core.model.Dependency",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "620ae548-5b9a-58ba-9857-dc4b04ac1a48"
        },
        {
            "line_number": 181,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[181,9] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
            "file_name": "ProjectDependencyAnalysisBuilder.java",
            "BCs": [],
            "Additions": [],
            "uid": "eaeb2e29-4bc6-578e-9cac-6114d450f727"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage se.kth.depclean.core.analysis;\n\nimport static com.google.common.collect.Sets.newHashSet;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport lombok.extern.slf4j.Slf4j;\nimport se.kth.depclean.core.analysis.model.ProjectDependencyAnalysis;\nimport se.kth.depclean.core.model.ClassName;\nimport se.kth.depclean.core.model.Dependency;\nimport se.kth.depclean.core.model.ProjectContext;\nimport se.kth.depclean.core.model.Scope;\n\n/**\n * Builds the analysis given the declared dependencies and the one actually used.\n */\n@Slf4j\npublic class ProjectDependencyAnalysisBuilder {\n\n  private final ProjectContext context;\n  private final ActualUsedClasses actualUsedClasses;\n  private final Set<Dependency> usedDependencies;\n\n  ProjectDependencyAnalysisBuilder(ProjectContext context, ActualUsedClasses actualUsedClasses) {\n    this.context = context;\n    this.actualUsedClasses = actualUsedClasses;\n    usedDependencies = actualUsedClasses.getRegisteredClasses().stream()\n        .flatMap(clazz -> context.getDependenciesForClass(clazz).stream())\n        .collect(Collectors.toSet());\n\n    log.debug(\"Actual used classes: \" + actualUsedClasses.getRegisteredClasses());\n    log.debug(\"Used dependencies\" + usedDependencies);\n  }\n\n  /**\n   * Analyse the dependencies to find out what is used and what is not.\n   *\n   * @return the analysis\n   */\n  public ProjectDependencyAnalysis analyse() {\n    // used dependencies\n    final Set<Dependency> usedDirectDependencies = getUsedDirectDependencies();\n    final Set<Dependency> usedTransitiveDependencies = getUsedTransitiveDependencies();\n    final Set<Dependency> usedInheritedDirectDependencies = getUsedInheritedDirectDependencies();\n    final Set<Dependency> usedInheritedTransitiveDependencies = getUsedInheritedTransitiveDependencies();\n    // unused dependencies\n    final Set<Dependency> unusedDirectDependencies = getUnusedDirectDependencies(usedDirectDependencies);\n    final Set<Dependency> unusedTransitiveDependencies = getUnusedTransitiveDependencies(usedTransitiveDependencies);\n    final Set<Dependency> unusedInheritedDirectDependencies = getUnusedInheritedDirectDependencies(usedInheritedDirectDependencies);\n    final Set<Dependency> unusedInheritedTransitiveDependencies = getUnusedInheritedTransitiveDependencies(usedInheritedTransitiveDependencies);\n    // classes in each dependency\n    final Map<Dependency, DependencyTypes> dependencyClassesMap = buildDependencyClassesMap();\n    // ignore dependencies\n    context.getIgnoredDependencies().forEach(dependencyToIgnore -> {\n      ignoreDependency(usedDirectDependencies, unusedDirectDependencies, dependencyToIgnore);\n      ignoreDependency(usedTransitiveDependencies, unusedTransitiveDependencies, dependencyToIgnore);\n      ignoreDependency(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, dependencyToIgnore);\n      ignoreDependency(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, dependencyToIgnore);\n    });\n    // ignore scopes\n    ignoreDependencyWithIgnoredScope(usedDirectDependencies, unusedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedTransitiveDependencies, unusedTransitiveDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, context.getIgnoredScopes());\n\n    return new ProjectDependencyAnalysis(\n        usedDirectDependencies,\n        usedTransitiveDependencies,\n        usedInheritedDirectDependencies,\n        usedInheritedTransitiveDependencies,\n        unusedDirectDependencies,\n        unusedTransitiveDependencies,\n        unusedInheritedDirectDependencies,\n        unusedInheritedTransitiveDependencies,\n        context.getIgnoredDependencies(),\n        dependencyClassesMap,\n        context.getDependencyGraph()\n    );\n  }\n\n  private Map<Dependency, DependencyTypes> buildDependencyClassesMap() {\n    final Map<Dependency, DependencyTypes> output = new HashMap<>();\n    final Collection<Dependency> allDependencies = newHashSet(context.getAllDependencies());\n    for (Dependency dependency : allDependencies) {\n      final Set<ClassName> allClasses = context.getClassesForDependency(dependency);\n      final Set<ClassName> usedClasses = newHashSet(allClasses);\n      usedClasses.retainAll(actualUsedClasses.getRegisteredClasses());\n      output.put(dependency, new DependencyTypes(allClasses, usedClasses));\n    }\n    return output;\n  }\n\n  private Set<Dependency> getUsedInheritedDirectDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().inheritedDirectDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Inherited Direct dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedDirectDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().directDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Direct dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedTransitiveDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().transitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedInheritedTransitiveDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().inheritedTransitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUnusedDirectDependencies(Set<Dependency> usedDirectDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().directDependencies(), usedDirectDependencies);\n  }\n\n  private Set<Dependency> getUnusedTransitiveDependencies(Set<Dependency> usedTransitiveDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().transitiveDependencies(), usedTransitiveDependencies);\n  }\n\n  private Set<Dependency> getUnusedInheritedDirectDependencies(Set<Dependency> usedInheritedDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().inheritedDirectDependencies(), usedInheritedDependencies);\n  }\n\n  private Set<Dependency> getUnusedInheritedTransitiveDependencies(Set<Dependency> usedInheritedDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().inheritedTransitiveDependencies(), usedInheritedDependencies);\n  }\n\n  private Set<Dependency> getUnusedDependencies(Set<Dependency> baseDependencies, Set<Dependency> usedDependencies) {\n    final Set<Dependency> unusedInheritedDependencies = newHashSet(baseDependencies);\n    unusedInheritedDependencies.removeAll(usedDependencies);\n    return unusedInheritedDependencies;\n  }\n\n  /**\n   * If the dependency to ignore is an unused dependency, then add it to the set of usedDependencyCoordinates and remove it from the set of\n   * unusedDependencyCoordinates.\n   *\n   * @param usedDependencies   The set of used artifacts where the dependency will be added.\n   * @param unusedDependencies The set of unused artifacts where the dependency will be removed.\n   * @param dependencyToIgnore The dependency to ignore.\n   */\n  private void ignoreDependency(Set<Dependency> usedDependencies, Set<Dependency> unusedDependencies, Dependency dependencyToIgnore) {\n    for (Iterator<Dependency> i = unusedDependencies.iterator(); i.hasNext(); ) {\n      Dependency unusedDependency = i.next();\n      if (dependencyToIgnore.equals(unusedDependency)) {\n        usedDependencies.add(unusedDependency);\n        i.remove();\n        break;\n      }\n    }\n  }\n\n  /**\n   * If the scope of the unused dependency is to be ignored, then add the dependency to the set of used dependencies and remove it from the used set.\n   *\n   * @param usedDependencies   The set of used artifacts where the dependency will be added.\n   * @param unusedDependencies The set of unused artifacts where the dependency will be removed.\n   * @param ignoredScopes      The set of scopes to ignore.\n   */\n  private void ignoreDependencyWithIgnoredScope(Set<Dependency> usedDependencies, Set<Dependency> unusedDependencies, Set<Scope> ignoredScopes) {\n    for (Iterator<Dependency> i = unusedDependencies.iterator(); i.hasNext(); ) {\n      Dependency unusedDependency = i.next();\n      List<String> scopesToIgnore = ignoredScopes.stream().map(Scope::getValue).collect(Collectors.toList());\n      log.debug(\"Scopes to ignore: {}\", scopesToIgnore);\n      log.debug(\"Unused dependency scope: {}\", unusedDependency.getScope());\n      if (scopesToIgnore.contains(unusedDependency.getScope())) {\n        log.debug(\"Ignoring dependency {} with scope {}\", unusedDependency, unusedDependency.getScope());\n        usedDependencies.add(unusedDependency);\n        i.remove();\n      }\n    }\n  }\n\n}\n\n'''\nThe error is caused by a change in the API of the dependency: guava 31.1-jre->32.0.0-android. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet\n\nThe error is triggered in the following specific lines in the previous code:\n    log.debug(\"Actual used classes: \" + actualUsedClasses.getRegisteredClasses());\n    log.debug(\"Used dependencies\" + usedDependencies);\n    context.getIgnoredDependencies().forEach(dependencyToIgnore -> {\n    ignoreDependencyWithIgnoredScope(usedDirectDependencies, unusedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedTransitiveDependencies, unusedTransitiveDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, context.getIgnoredScopes());\n        context.getIgnoredDependencies(),\n        context.getDependencyGraph()\n      output.put(dependency, new DependencyTypes(allClasses, usedClasses));\n        .filter(a -> context.getDependencyGraph().inheritedDirectDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Inherited Direct dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().directDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Direct dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().transitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().inheritedTransitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n    return getUnusedDependencies(context.getDependencyGraph().directDependencies(), usedDirectDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().transitiveDependencies(), usedTransitiveDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().inheritedDirectDependencies(), usedInheritedDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().inheritedTransitiveDependencies(), usedInheritedDependencies);\n      List<String> scopesToIgnore = ignoredScopes.stream().map(Scope::getValue).collect(Collectors.toList());\n      log.debug(\"Scopes to ignore: {}\", scopesToIgnore);\n      log.debug(\"Unused dependency scope: {}\", unusedDependency.getScope());\n      if (scopesToIgnore.contains(unusedDependency.getScope())) {\n        log.debug(\"Ignoring dependency {} with scope {}\", unusedDependency, unusedDependency.getScope());\nwith the following error message:\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[36,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[37,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[59,12] cannot find symbol  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[66,95] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[67,103] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[68,113] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[69,121] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[80,16] cannot find symbol  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[82,16] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[93,30] constructor DependencyTypes in class se.kth.depclean.core.analysis.DependencyTypes cannot be applied to given types;  required: no arguments\n  found: java.util.Set<se.kth.depclean.core.model.ClassName>,java.util.Set<se.kth.depclean.core.model.ClassName>\n  reason: actual and formal argument lists differ in length\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[100,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[101,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[107,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[108,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[114,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[115,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[121,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[122,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[127,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[131,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[135,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[139,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[177,64] invalid method reference  cannot find symbol\n    symbol:   method getValue()\n    location: class se.kth.depclean.core.model.Scope\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[178,7] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[179,7] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[180,51] cannot find symbol  symbol:   method getScope()\n  location: variable unusedDependency of type se.kth.depclean.core.model.Dependency\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[181,9] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "    log.debug(\"Actual used classes: \" + actualUsedClasses.getRegisteredClasses());\n    log.debug(\"Used dependencies\" + usedDependencies);\n    context.getIgnoredDependencies().forEach(dependencyToIgnore -> {\n    ignoreDependencyWithIgnoredScope(usedDirectDependencies, unusedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedTransitiveDependencies, unusedTransitiveDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, context.getIgnoredScopes());\n        context.getIgnoredDependencies(),\n        context.getDependencyGraph()\n      output.put(dependency, new DependencyTypes(allClasses, usedClasses));\n        .filter(a -> context.getDependencyGraph().inheritedDirectDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Inherited Direct dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().directDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Direct dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().transitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .filter(a -> context.getDependencyGraph().inheritedTransitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n    return getUnusedDependencies(context.getDependencyGraph().directDependencies(), usedDirectDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().transitiveDependencies(), usedTransitiveDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().inheritedDirectDependencies(), usedInheritedDependencies);\n    return getUnusedDependencies(context.getDependencyGraph().inheritedTransitiveDependencies(), usedInheritedDependencies);\n      List<String> scopesToIgnore = ignoredScopes.stream().map(Scope::getValue).collect(Collectors.toList());\n      log.debug(\"Scopes to ignore: {}\", scopesToIgnore);\n      log.debug(\"Unused dependency scope: {}\", unusedDependency.getScope());\n      if (scopesToIgnore.contains(unusedDependency.getScope())) {\n        log.debug(\"Ignoring dependency {} with scope {}\", unusedDependency, unusedDependency.getScope());",
    "error_message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[36,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[37,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[59,12] cannot find symbol  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[66,95] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[67,103] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[68,113] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[69,121] cannot find symbol  symbol:   method getIgnoredScopes()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[80,16] cannot find symbol  symbol:   method getIgnoredDependencies()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[82,16] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[93,30] constructor DependencyTypes in class se.kth.depclean.core.analysis.DependencyTypes cannot be applied to given types;  required: no arguments\n  found: java.util.Set<se.kth.depclean.core.model.ClassName>,java.util.Set<se.kth.depclean.core.model.ClassName>\n  reason: actual and formal argument lists differ in length\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[100,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[101,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[107,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[108,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[114,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[115,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[121,29] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[122,29] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[127,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[131,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[135,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[139,41] cannot find symbol  symbol:   method getDependencyGraph()\n  location: variable context of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[177,64] invalid method reference  cannot find symbol\n    symbol:   method getValue()\n    location: class se.kth.depclean.core.model.Scope\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[178,7] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[179,7] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[180,51] cannot find symbol  symbol:   method getScope()\n  location: variable unusedDependency of type se.kth.depclean.core.model.Dependency\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/ProjectDependencyAnalysisBuilder.java:[181,9] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.ProjectDependencyAnalysisBuilder",
    "api_diff": "-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet",
    "original_code": "package se.kth.depclean.core.analysis;\n\nimport static com.google.common.collect.Sets.newHashSet;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport lombok.extern.slf4j.Slf4j;\nimport se.kth.depclean.core.analysis.model.ProjectDependencyAnalysis;\nimport se.kth.depclean.core.model.ClassName;\nimport se.kth.depclean.core.model.Dependency;\nimport se.kth.depclean.core.model.ProjectContext;\nimport se.kth.depclean.core.model.Scope;\n\n/**\n * Builds the analysis given the declared dependencies and the one actually used.\n */\n@Slf4j\npublic class ProjectDependencyAnalysisBuilder {\n\n  private final ProjectContext context;\n  private final ActualUsedClasses actualUsedClasses;\n  private final Set<Dependency> usedDependencies;\n\n  ProjectDependencyAnalysisBuilder(ProjectContext context, ActualUsedClasses actualUsedClasses) {\n    this.context = context;\n    this.actualUsedClasses = actualUsedClasses;\n    usedDependencies = actualUsedClasses.getRegisteredClasses().stream()\n        .flatMap(clazz -> context.getDependenciesForClass(clazz).stream())\n        .collect(Collectors.toSet());\n\n    log.debug(\"Actual used classes: \" + actualUsedClasses.getRegisteredClasses());\n    log.debug(\"Used dependencies\" + usedDependencies);\n  }\n\n  /**\n   * Analyse the dependencies to find out what is used and what is not.\n   *\n   * @return the analysis\n   */\n  public ProjectDependencyAnalysis analyse() {\n    // used dependencies\n    final Set<Dependency> usedDirectDependencies = getUsedDirectDependencies();\n    final Set<Dependency> usedTransitiveDependencies = getUsedTransitiveDependencies();\n    final Set<Dependency> usedInheritedDirectDependencies = getUsedInheritedDirectDependencies();\n    final Set<Dependency> usedInheritedTransitiveDependencies = getUsedInheritedTransitiveDependencies();\n    // unused dependencies\n    final Set<Dependency> unusedDirectDependencies = getUnusedDirectDependencies(usedDirectDependencies);\n    final Set<Dependency> unusedTransitiveDependencies = getUnusedTransitiveDependencies(usedTransitiveDependencies);\n    final Set<Dependency> unusedInheritedDirectDependencies = getUnusedInheritedDirectDependencies(usedInheritedDirectDependencies);\n    final Set<Dependency> unusedInheritedTransitiveDependencies = getUnusedInheritedTransitiveDependencies(usedInheritedTransitiveDependencies);\n    // classes in each dependency\n    final Map<Dependency, DependencyTypes> dependencyClassesMap = buildDependencyClassesMap();\n    // ignore dependencies\n    context.getIgnoredDependencies().forEach(dependencyToIgnore -> {\n      ignoreDependency(usedDirectDependencies, unusedDirectDependencies, dependencyToIgnore);\n      ignoreDependency(usedTransitiveDependencies, unusedTransitiveDependencies, dependencyToIgnore);\n      ignoreDependency(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, dependencyToIgnore);\n      ignoreDependency(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, dependencyToIgnore);\n    });\n    // ignore scopes\n    ignoreDependencyWithIgnoredScope(usedDirectDependencies, unusedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedTransitiveDependencies, unusedTransitiveDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedDirectDependencies, unusedInheritedDirectDependencies, context.getIgnoredScopes());\n    ignoreDependencyWithIgnoredScope(usedInheritedTransitiveDependencies, unusedInheritedTransitiveDependencies, context.getIgnoredScopes());\n\n    return new ProjectDependencyAnalysis(\n        usedDirectDependencies,\n        usedTransitiveDependencies,\n        usedInheritedDirectDependencies,\n        usedInheritedTransitiveDependencies,\n        unusedDirectDependencies,\n        unusedTransitiveDependencies,\n        unusedInheritedDirectDependencies,\n        unusedInheritedTransitiveDependencies,\n        context.getIgnoredDependencies(),\n        dependencyClassesMap,\n        context.getDependencyGraph()\n    );\n  }\n\n  private Map<Dependency, DependencyTypes> buildDependencyClassesMap() {\n    final Map<Dependency, DependencyTypes> output = new HashMap<>();\n    final Collection<Dependency> allDependencies = newHashSet(context.getAllDependencies());\n    for (Dependency dependency : allDependencies) {\n      final Set<ClassName> allClasses = context.getClassesForDependency(dependency);\n      final Set<ClassName> usedClasses = newHashSet(allClasses);\n      usedClasses.retainAll(actualUsedClasses.getRegisteredClasses());\n      output.put(dependency, new DependencyTypes(allClasses, usedClasses));\n    }\n    return output;\n  }\n\n  private Set<Dependency> getUsedInheritedDirectDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().inheritedDirectDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Inherited Direct dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedDirectDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().directDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Direct dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedTransitiveDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().transitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUsedInheritedTransitiveDependencies() {\n    return usedDependencies.stream()\n        .filter(a -> context.getDependencyGraph().inheritedTransitiveDependencies().contains(a))\n        .peek(dependency -> log.trace(\"## Used Transitive dependency {}\", dependency))\n        .collect(Collectors.toSet());\n  }\n\n  private Set<Dependency> getUnusedDirectDependencies(Set<Dependency> usedDirectDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().directDependencies(), usedDirectDependencies);\n  }\n\n  private Set<Dependency> getUnusedTransitiveDependencies(Set<Dependency> usedTransitiveDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().transitiveDependencies(), usedTransitiveDependencies);\n  }\n\n  private Set<Dependency> getUnusedInheritedDirectDependencies(Set<Dependency> usedInheritedDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().inheritedDirectDependencies(), usedInheritedDependencies);\n  }\n\n  private Set<Dependency> getUnusedInheritedTransitiveDependencies(Set<Dependency> usedInheritedDependencies) {\n    return getUnusedDependencies(context.getDependencyGraph().inheritedTransitiveDependencies(), usedInheritedDependencies);\n  }\n\n  private Set<Dependency> getUnusedDependencies(Set<Dependency> baseDependencies, Set<Dependency> usedDependencies) {\n    final Set<Dependency> unusedInheritedDependencies = newHashSet(baseDependencies);\n    unusedInheritedDependencies.removeAll(usedDependencies);\n    return unusedInheritedDependencies;\n  }\n\n  /**\n   * If the dependency to ignore is an unused dependency, then add it to the set of usedDependencyCoordinates and remove it from the set of\n   * unusedDependencyCoordinates.\n   *\n   * @param usedDependencies   The set of used artifacts where the dependency will be added.\n   * @param unusedDependencies The set of unused artifacts where the dependency will be removed.\n   * @param dependencyToIgnore The dependency to ignore.\n   */\n  private void ignoreDependency(Set<Dependency> usedDependencies, Set<Dependency> unusedDependencies, Dependency dependencyToIgnore) {\n    for (Iterator<Dependency> i = unusedDependencies.iterator(); i.hasNext(); ) {\n      Dependency unusedDependency = i.next();\n      if (dependencyToIgnore.equals(unusedDependency)) {\n        usedDependencies.add(unusedDependency);\n        i.remove();\n        break;\n      }\n    }\n  }\n\n  /**\n   * If the scope of the unused dependency is to be ignored, then add the dependency to the set of used dependencies and remove it from the used set.\n   *\n   * @param usedDependencies   The set of used artifacts where the dependency will be added.\n   * @param unusedDependencies The set of unused artifacts where the dependency will be removed.\n   * @param ignoredScopes      The set of scopes to ignore.\n   */\n  private void ignoreDependencyWithIgnoredScope(Set<Dependency> usedDependencies, Set<Dependency> unusedDependencies, Set<Scope> ignoredScopes) {\n    for (Iterator<Dependency> i = unusedDependencies.iterator(); i.hasNext(); ) {\n      Dependency unusedDependency = i.next();\n      List<String> scopesToIgnore = ignoredScopes.stream().map(Scope::getValue).collect(Collectors.toList());\n      log.debug(\"Scopes to ignore: {}\", scopesToIgnore);\n      log.debug(\"Unused dependency scope: {}\", unusedDependency.getScope());\n      if (scopesToIgnore.contains(unusedDependency.getScope())) {\n        log.debug(\"Ignoring dependency {} with scope {}\", unusedDependency, unusedDependency.getScope());\n        usedDependencies.add(unusedDependency);\n        i.remove();\n      }\n    }\n  }\n\n}\n",
    "project": "depclean",
    "libraryName": "guava",
    "libraryGroupID": "com.google.guava",
    "newVersion": "32.0.0-android",
    "previousVersion": "31.1-jre",
    "breakingCommit": "b86a5f84b44a9b50aee69745886c47123f721de3"
}