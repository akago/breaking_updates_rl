{
    "absolute_path_to_file_in_container": "/metrics/metrics-caffeine/src/test/java/com/codahale/metrics/caffeine/MetricsStatsCounterTest.java",
    "errors": [
        {
            "line_number": 55,
            "message": "[ERROR] /metrics/metrics-caffeine/src/test/java/com/codahale/metrics/caffeine/MetricsStatsCounterTest.java:[55,15] error: [CheckReturnValue] The result of `get(...)` must be used",
            "additional_info": "[ERROR]   If you really don't want to use the result, then assign it to a variable: `var unused = ...`.\n[ERROR]   \n[ERROR]   If callers of `get(...)` shouldn't be required to use its result, then annotate it with `@CanIgnoreReturnValue`.\n[ERROR]   \n[ERROR]     (see https://errorprone.info/bugpattern/CheckReturnValue)\n[ERROR]   Did you mean 'var unused = cache.get(1);' or to remove this line?\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn <args> -rf :metrics-caffeine",
            "file_name": "MetricsStatsCounterTest.java",
            "BCs": [
                {
                    "element": "com.github.benmanes.caffeine.cache.AsyncCache.get",
                    "nature": "MUTATION",
                    "kind": "METHOD_PARAMETER_GENERICS_CHANGED"
                }
            ],
            "Additions": [],
            "uid": "b5c5518a-576d-5076-b1da-aac24d9dfc6f"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2016 Ben Manes. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.codahale.metrics.caffeine;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.junit.Assert.assertEquals;\n\nimport com.codahale.metrics.MetricRegistry;\nimport com.github.benmanes.caffeine.cache.Caffeine;\nimport com.github.benmanes.caffeine.cache.LoadingCache;\nimport com.github.benmanes.caffeine.cache.RemovalCause;\nimport org.junit.Before;\nimport org.junit.Test;\n\n/**\n * An example of exporting stats to Dropwizard Metrics (http://metrics.dropwizard.io).\n *\n * @author ben.manes@gmail.com (Ben Manes)\n * @author John Karp\n */\npublic final class MetricsStatsCounterTest {\n\n  private static final String PREFIX = \"foo\";\n\n  private MetricsStatsCounter stats;\n  private MetricRegistry registry;\n\n  @Before\n  public void setUp() {\n    registry = new MetricRegistry();\n    stats = new MetricsStatsCounter(registry, PREFIX);\n  }\n\n  @Test\n  public void basicUsage() {\n    LoadingCache<Integer, Integer> cache = Caffeine.newBuilder()\n        .recordStats(() -> new MetricsStatsCounter(registry, PREFIX))\n        .build(key -> key);\n\n    // Perform application work\n    for (int i = 0; i < 4; i++) {\n      cache.get(1);\n    }\n\n    assertEquals(3L, cache.stats().hitCount());\n    assertEquals(3L, registry.counter(PREFIX + \".hits\").getCount());\n  }\n\n  @Test\n  public void hit() {\n    stats.recordHits(2);\n    assertThat(registry.counter(PREFIX + \".hits\").getCount()).isEqualTo(2);\n  }\n\n  @Test\n  public void miss() {\n    stats.recordMisses(2);\n    assertThat(registry.counter(PREFIX + \".misses\").getCount()).isEqualTo(2);\n  }\n\n  @Test\n  public void loadSuccess() {\n    stats.recordLoadSuccess(256);\n    assertThat(registry.timer(PREFIX + \".loads-success\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void loadFailure() {\n    stats.recordLoadFailure(256);\n    assertThat(registry.timer(PREFIX + \".loads-failure\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void eviction() {\n    stats.recordEviction();\n    assertThat(registry.histogram(PREFIX + \".evictions\").getCount()).isEqualTo(1);\n    assertThat(registry.counter(PREFIX + \".evictions-weight\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void evictionWithWeight() {\n    stats.recordEviction(3);\n    assertThat(registry.histogram(PREFIX + \".evictions\").getCount()).isEqualTo(1);\n    assertThat(registry.counter(PREFIX + \".evictions-weight\").getCount()).isEqualTo(3);\n  }\n\n  @Test\n  public void evictionWithCause() {\n    // With JUnit 5, this would be better done with @ParameterizedTest + @EnumSource\n    for (RemovalCause cause : RemovalCause.values()) {\n      stats.recordEviction(3, cause);\n      assertThat(registry.histogram(PREFIX + \".evictions.\" + cause.name()).getCount()).isEqualTo(1);\n    }\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: caffeine 2.9.3->3.1.8. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n~~ METHOD_PARAMETER_GENERICS_CHANGED <- com.github.benmanes.caffeine.cache.AsyncCache.get\n\nThe error is triggered in the following specific lines in the previous code:\n      cache.get(1);\nwith the following error message:\n[ERROR] /metrics/metrics-caffeine/src/test/java/com/codahale/metrics/caffeine/MetricsStatsCounterTest.java:[55,15] error: [CheckReturnValue] The result of `get(...)` must be used[ERROR]   If you really don't want to use the result, then assign it to a variable: `var unused = ...`.\n[ERROR]   \n[ERROR]   If callers of `get(...)` shouldn't be required to use its result, then annotate it with `@CanIgnoreReturnValue`.\n[ERROR]   \n[ERROR]     (see https://errorprone.info/bugpattern/CheckReturnValue)\n[ERROR]   Did you mean 'var unused = cache.get(1);' or to remove this line?\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn <args> -rf :metrics-caffeine\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "      cache.get(1);",
    "error_message": "[ERROR] /metrics/metrics-caffeine/src/test/java/com/codahale/metrics/caffeine/MetricsStatsCounterTest.java:[55,15] error: [CheckReturnValue] The result of `get(...)` must be used[ERROR]   If you really don't want to use the result, then assign it to a variable: `var unused = ...`.\n[ERROR]   \n[ERROR]   If callers of `get(...)` shouldn't be required to use its result, then annotate it with `@CanIgnoreReturnValue`.\n[ERROR]   \n[ERROR]     (see https://errorprone.info/bugpattern/CheckReturnValue)\n[ERROR]   Did you mean 'var unused = cache.get(1);' or to remove this line?\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn <args> -rf :metrics-caffeine",
    "api_diff": "~~ METHOD_PARAMETER_GENERICS_CHANGED <- com.github.benmanes.caffeine.cache.AsyncCache.get",
    "original_code": "/*\n * Copyright 2016 Ben Manes. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.codahale.metrics.caffeine;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.junit.Assert.assertEquals;\n\nimport com.codahale.metrics.MetricRegistry;\nimport com.github.benmanes.caffeine.cache.Caffeine;\nimport com.github.benmanes.caffeine.cache.LoadingCache;\nimport com.github.benmanes.caffeine.cache.RemovalCause;\nimport org.junit.Before;\nimport org.junit.Test;\n\n/**\n * An example of exporting stats to Dropwizard Metrics (http://metrics.dropwizard.io).\n *\n * @author ben.manes@gmail.com (Ben Manes)\n * @author John Karp\n */\npublic final class MetricsStatsCounterTest {\n\n  private static final String PREFIX = \"foo\";\n\n  private MetricsStatsCounter stats;\n  private MetricRegistry registry;\n\n  @Before\n  public void setUp() {\n    registry = new MetricRegistry();\n    stats = new MetricsStatsCounter(registry, PREFIX);\n  }\n\n  @Test\n  public void basicUsage() {\n    LoadingCache<Integer, Integer> cache = Caffeine.newBuilder()\n        .recordStats(() -> new MetricsStatsCounter(registry, PREFIX))\n        .build(key -> key);\n\n    // Perform application work\n    for (int i = 0; i < 4; i++) {\n      cache.get(1);\n    }\n\n    assertEquals(3L, cache.stats().hitCount());\n    assertEquals(3L, registry.counter(PREFIX + \".hits\").getCount());\n  }\n\n  @Test\n  public void hit() {\n    stats.recordHits(2);\n    assertThat(registry.counter(PREFIX + \".hits\").getCount()).isEqualTo(2);\n  }\n\n  @Test\n  public void miss() {\n    stats.recordMisses(2);\n    assertThat(registry.counter(PREFIX + \".misses\").getCount()).isEqualTo(2);\n  }\n\n  @Test\n  public void loadSuccess() {\n    stats.recordLoadSuccess(256);\n    assertThat(registry.timer(PREFIX + \".loads-success\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void loadFailure() {\n    stats.recordLoadFailure(256);\n    assertThat(registry.timer(PREFIX + \".loads-failure\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void eviction() {\n    stats.recordEviction();\n    assertThat(registry.histogram(PREFIX + \".evictions\").getCount()).isEqualTo(1);\n    assertThat(registry.counter(PREFIX + \".evictions-weight\").getCount()).isEqualTo(1);\n  }\n\n  @Test\n  public void evictionWithWeight() {\n    stats.recordEviction(3);\n    assertThat(registry.histogram(PREFIX + \".evictions\").getCount()).isEqualTo(1);\n    assertThat(registry.counter(PREFIX + \".evictions-weight\").getCount()).isEqualTo(3);\n  }\n\n  @Test\n  public void evictionWithCause() {\n    // With JUnit 5, this would be better done with @ParameterizedTest + @EnumSource\n    for (RemovalCause cause : RemovalCause.values()) {\n      stats.recordEviction(3, cause);\n      assertThat(registry.histogram(PREFIX + \".evictions.\" + cause.name()).getCount()).isEqualTo(1);\n    }\n  }\n}\n",
    "project": "metrics",
    "libraryName": "caffeine",
    "libraryGroupID": "com.github.ben-manes.caffeine",
    "newVersion": "3.1.8",
    "previousVersion": "2.9.3",
    "breakingCommit": "aae1d8d8916bf15ca76f154e1bfc342b1cec44a6"
}