{
    "absolute_path_to_file_in_container": "/docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java",
    "errors": [
        {
            "line_number": 16,
            "message": "[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[16,22] package org.cactoos.io does not exist",
            "additional_info": "",
            "file_name": "DigestFromContent.java",
            "BCs": [],
            "Additions": [],
            "uid": "02d08e82-2275-5e1a-8eeb-24c37b586fa6"
        },
        {
            "line_number": 17,
            "message": "[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[17,24] package org.cactoos.text does not exist",
            "additional_info": "",
            "file_name": "DigestFromContent.java",
            "BCs": [],
            "Additions": [],
            "uid": "88e2abad-da96-52d7-82b1-b6e7e3393f43"
        },
        {
            "line_number": 61,
            "message": "[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[61,49] cannot find symbol",
            "additional_info": "  symbol:   class HexOf\n  location: class com.artipie.docker.misc.DigestFromContent",
            "file_name": "DigestFromContent.java",
            "BCs": [],
            "Additions": [],
            "uid": "9c526ef0-0859-5177-849a-951ab0e878a9"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * The MIT License (MIT) Copyright (c) 2020-2021 artipie.com\n * https://github.com/artipie/docker-adapter/LICENSE.txt\n */\npackage com.artipie.docker.misc;\n\nimport com.artipie.asto.Content;\nimport com.artipie.docker.Digest;\nimport hu.akarnokd.rxjava2.interop.SingleInterop;\nimport io.reactivex.Completable;\nimport io.reactivex.Flowable;\nimport io.reactivex.Single;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.concurrent.CompletionStage;\nimport org.cactoos.io.BytesOf;\nimport org.cactoos.text.HexOf;\n\n/**\n * Digest from content.\n * @since 0.2\n */\npublic final class DigestFromContent {\n\n    /**\n     * Content.\n     */\n    private final Content content;\n\n    /**\n     * Ctor.\n     * @param content Content publisher\n     */\n    public DigestFromContent(final Content content) {\n        this.content = content;\n    }\n\n    /**\n     * Calculates digest from content.\n     * @return CompletionStage from digest\n     */\n    public CompletionStage<Digest> digest() {\n        final MessageDigest sha;\n        try {\n            sha = MessageDigest.getInstance(\"SHA-256\");\n        } catch (final NoSuchAlgorithmException err) {\n            throw new IllegalStateException(\"This runtime doesn't have SHA-256 algorithm\", err);\n        }\n        return Flowable.fromPublisher(this.content)\n            .flatMapCompletable(\n                buf -> Completable.fromAction(\n                    () -> {\n                        buf.mark();\n                        sha.update(buf);\n                        buf.reset();\n                    }\n                )\n            )\n            .<Digest>andThen(\n                Single.fromCallable(\n                    () -> new Digest.Sha256(new HexOf(new BytesOf(sha.digest())).asString())\n                )\n            )\n            .to(SingleInterop.get()).toCompletableFuture();\n    }\n\n}\n\n'''\nThe error is caused by a change in the API of the dependency: http v0.25->v1.1.1. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.cactoos.io.BytesOf;\nimport org.cactoos.text.HexOf;\n                    () -> new Digest.Sha256(new HexOf(new BytesOf(sha.digest())).asString())\nwith the following error message:\n[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[16,22] package org.cactoos.io does not exist\n[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[17,24] package org.cactoos.text does not exist\n[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[61,49] cannot find symbol  symbol:   class HexOf\n  location: class com.artipie.docker.misc.DigestFromContent\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.cactoos.io.BytesOf;\nimport org.cactoos.text.HexOf;\n                    () -> new Digest.Sha256(new HexOf(new BytesOf(sha.digest())).asString())",
    "error_message": "[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[16,22] package org.cactoos.io does not exist\n[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[17,24] package org.cactoos.text does not exist\n[ERROR] /docker-adapter/src/main/java/com/artipie/docker/misc/DigestFromContent.java:[61,49] cannot find symbol  symbol:   class HexOf\n  location: class com.artipie.docker.misc.DigestFromContent",
    "api_diff": "",
    "original_code": "/*\n * The MIT License (MIT) Copyright (c) 2020-2021 artipie.com\n * https://github.com/artipie/docker-adapter/LICENSE.txt\n */\npackage com.artipie.docker.misc;\n\nimport com.artipie.asto.Content;\nimport com.artipie.docker.Digest;\nimport hu.akarnokd.rxjava2.interop.SingleInterop;\nimport io.reactivex.Completable;\nimport io.reactivex.Flowable;\nimport io.reactivex.Single;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.concurrent.CompletionStage;\nimport org.cactoos.io.BytesOf;\nimport org.cactoos.text.HexOf;\n\n/**\n * Digest from content.\n * @since 0.2\n */\npublic final class DigestFromContent {\n\n    /**\n     * Content.\n     */\n    private final Content content;\n\n    /**\n     * Ctor.\n     * @param content Content publisher\n     */\n    public DigestFromContent(final Content content) {\n        this.content = content;\n    }\n\n    /**\n     * Calculates digest from content.\n     * @return CompletionStage from digest\n     */\n    public CompletionStage<Digest> digest() {\n        final MessageDigest sha;\n        try {\n            sha = MessageDigest.getInstance(\"SHA-256\");\n        } catch (final NoSuchAlgorithmException err) {\n            throw new IllegalStateException(\"This runtime doesn't have SHA-256 algorithm\", err);\n        }\n        return Flowable.fromPublisher(this.content)\n            .flatMapCompletable(\n                buf -> Completable.fromAction(\n                    () -> {\n                        buf.mark();\n                        sha.update(buf);\n                        buf.reset();\n                    }\n                )\n            )\n            .<Digest>andThen(\n                Single.fromCallable(\n                    () -> new Digest.Sha256(new HexOf(new BytesOf(sha.digest())).asString())\n                )\n            )\n            .to(SingleInterop.get()).toCompletableFuture();\n    }\n\n}\n",
    "project": "docker-adapter",
    "libraryName": "http",
    "libraryGroupID": "com.artipie",
    "newVersion": "v1.1.1",
    "previousVersion": "v0.25",
    "breakingCommit": "a0ec50cb297c4202e138627859a89ef032fa78ab"
}