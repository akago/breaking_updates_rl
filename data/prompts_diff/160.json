{
    "absolute_path_to_file_in_container": "/google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java",
    "errors": [
        {
            "line_number": 32,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[32,52] package com.google.api.services.cloudresourcemanager does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "d6fd0174-6921-594f-a6ba-0f34111ba536"
        },
        {
            "line_number": 33,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[33,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 34,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[34,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 35,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[35,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 36,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[36,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 37,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[37,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 38,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[38,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 39,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[39,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 40,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[40,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 41,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[41,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 42,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[42,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 43,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[43,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 44,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[44,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 45,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[45,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 46,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[46,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 47,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[47,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 48,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[48,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 49,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[49,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 50,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[50,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 51,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[51,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 52,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[52,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [],
            "Additions": [],
            "uid": "3400979b-ccd0-51b2-bb99-c617f6340d17"
        },
        {
            "line_number": 114,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[114,45] cannot find symbol",
            "additional_info": "  symbol:   class Operation\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Operation",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Operation com.google.api.services.cloudresourcemanager.v3.model.Operation()"
            ],
            "uid": "98967ee4-432b-54d5-a0ab-e49a35a654ff"
        },
        {
            "line_number": 132,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[132,17] cannot find symbol",
            "additional_info": "  symbol:   class CloudResourceManager\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.CloudResourceManager",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public CloudResourceManager com.google.api.services.cloudresourcemanager.v3.CloudResourceManager(com.google.api.client.http.HttpTransport,com.google.api.client.json.JsonFactory,com.google.api.client.http.HttpRequestInitializer)"
            ],
            "uid": "92c1ecd5-0a03-5bd1-9810-f95a08077706"
        },
        {
            "line_number": 151,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[151,53] cannot find symbol",
            "additional_info": "  symbol:   class Status\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc",
            "file_name": "HttpResourceManagerRpc.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Status",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Status com.google.api.services.cloudresourcemanager.v3.model.Status()"
            ],
            "uid": "281c032e-c7bc-58c9-bb19-cb43f49fd1b0"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2016 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.google.cloud.resourcemanager.spi.v1beta1;\n\nimport static com.google.cloud.RetryHelper.runWithRetries;\nimport static com.google.common.base.MoreObjects.firstNonNull;\nimport static java.net.HttpURLConnection.HTTP_FORBIDDEN;\nimport static java.net.HttpURLConnection.HTTP_NOT_FOUND;\n\nimport com.google.api.client.http.HttpRequestInitializer;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.core.ApiClock;\nimport com.google.api.gax.retrying.ResultRetryAlgorithm;\nimport com.google.api.gax.retrying.RetrySettings;\nimport com.google.api.gax.retrying.TimedAttemptSettings;\nimport com.google.api.services.cloudresourcemanager.CloudResourceManager;\nimport com.google.api.services.cloudresourcemanager.model.ClearOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Constraint;\nimport com.google.api.services.cloudresourcemanager.model.GetEffectiveOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListProjectsResponse;\nimport com.google.api.services.cloudresourcemanager.model.Operation;\nimport com.google.api.services.cloudresourcemanager.model.OrgPolicy;\nimport com.google.api.services.cloudresourcemanager.model.Policy;\nimport com.google.api.services.cloudresourcemanager.model.Project;\nimport com.google.api.services.cloudresourcemanager.model.SetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.SetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Status;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsRequest;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsResponse;\nimport com.google.api.services.cloudresourcemanager.model.UndeleteProjectRequest;\nimport com.google.cloud.RetryHelper;\nimport com.google.cloud.Tuple;\nimport com.google.cloud.http.BaseHttpServiceException;\nimport com.google.cloud.http.HttpTransportOptions;\nimport com.google.cloud.resourcemanager.ResourceManagerException;\nimport com.google.cloud.resourcemanager.ResourceManagerOptions;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.ImmutableSet;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.Callable;\nimport org.threeten.bp.Duration;\n\n/** @deprecated v3 GAPIC client of ResourceManager is now available */\n@Deprecated\npublic class HttpResourceManagerRpc implements ResourceManagerRpc {\n\n  private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n\n  // See doc of create() for more details:\n  // https://developers.google.com/resources/api-libraries/documentation/cloudresourcemanager/v1/java/latest/com/google/api/services/cloudresourcemanager/CloudResourceManager.Projects.html#create(com.google.api.services.cloudresourcemanager.model.Project)\n  private static final RetrySettings CREATE_RETRY_SETTINGS =\n      RetrySettings.newBuilder()\n          // SLO permits 30s at 90th percentile, 4x it for total limit.\n          // Observed latency is much lower: 11s at 95th percentile.\n          .setTotalTimeout(Duration.ofMinutes(2))\n          // Linked doc recommends polling at 5th second.\n          .setInitialRetryDelay(Duration.ofSeconds(5))\n          .setRetryDelayMultiplier(1.5)\n          // Observed P95 latency is 11s. We probably shouldn't sleep longer than this.\n          .setMaxRetryDelay(Duration.ofSeconds(11))\n          .setJittered(true)\n          .setInitialRpcTimeout(Duration.ofSeconds(5))\n          .setMaxRpcTimeout(Duration.ofSeconds(5))\n          .build();\n\n  // reference: https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto\n  private static final ImmutableMap<Integer, Integer> RPC_TO_HTTP_CODES =\n      ImmutableMap.<Integer, Integer>builder()\n          .put(0, 200)\n          .put(1, 499)\n          .put(2, 500)\n          .put(3, 400)\n          .put(4, 504)\n          .put(5, 404)\n          .put(6, 409)\n          .put(7, 403)\n          .put(16, 401)\n          .put(8, 429)\n          .put(9, 400)\n          .put(10, 409)\n          .put(11, 400)\n          .put(12, 501)\n          .put(13, 500)\n          .put(14, 503)\n          .put(15, 500)\n          .build();\n\n  private static final ResultRetryAlgorithm<Operation> OPERATION_HANDLER =\n      new ResultRetryAlgorithm<Operation>() {\n        @Override\n        public TimedAttemptSettings createNextAttempt(\n            Throwable prevThrowable, Operation prevResponse, TimedAttemptSettings prevSettings) {\n          return null;\n        }\n\n        @Override\n        public boolean shouldRetry(Throwable prevThrowable, Operation prevOp) {\n          if (prevThrowable == null) {\n            return prevOp.getDone() == null || !prevOp.getDone();\n          }\n          return prevThrowable instanceof ResourceManagerException\n              && ((ResourceManagerException) prevThrowable).isRetryable();\n        }\n      };\n\n  private final CloudResourceManager resourceManager;\n  private final ApiClock clock;\n\n  public HttpResourceManagerRpc(ResourceManagerOptions options) {\n    HttpTransportOptions transportOptions = (HttpTransportOptions) options.getTransportOptions();\n    HttpTransport transport = transportOptions.getHttpTransportFactory().create();\n    HttpRequestInitializer initializer = transportOptions.getHttpRequestInitializer(options);\n    resourceManager =\n        new CloudResourceManager.Builder(transport, JSON_FACTORY, initializer)\n            .setRootUrl(options.getHost())\n            .setApplicationName(options.getApplicationName())\n            .build();\n    clock = options.getClock();\n  }\n\n  private static ResourceManagerException translate(IOException exception) {\n    return new ResourceManagerException(exception);\n  }\n\n  private static ResourceManagerException translate(Status status) {\n    Integer code = RPC_TO_HTTP_CODES.get(status.getCode());\n    if (code == null) {\n      code = BaseHttpServiceException.UNKNOWN_CODE;\n    }\n    return new ResourceManagerException(code, status.getMessage());\n  }\n\n  @Override\n  public Project create(Project project) {\n    final Operation operation;\n    try {\n      operation = resourceManager.projects().create(project).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n\n    Operation finishedOp =\n        runWithRetries(\n            new Callable<Operation>() {\n              @Override\n              public Operation call() {\n                try {\n                  return resourceManager.operations().get(operation.getName()).execute();\n                } catch (IOException ex) {\n                  throw translate(ex);\n                }\n              }\n            },\n            CREATE_RETRY_SETTINGS,\n            OPERATION_HANDLER,\n            clock);\n    if (finishedOp.getError() != null) {\n      throw translate(finishedOp.getError());\n    }\n\n    // NOTE(pongad): Operation.getResponse() returns a Map<String, Object>.\n    // 1. `(Project) finishedOp.getResponse()` doesn't work,\n    // because JSON deserializer in execute() didn't know to create a Project object.\n    // 2. `new Project().putAll(finishedOp.getResponse())` doesn't work either.\n    // 64-bit integers are sent as strings in JSON,\n    // so execute(), not knowing the type, parses it as String, not Long.\n    try {\n      String responseTxt = JSON_FACTORY.toString(finishedOp.getResponse());\n      return JSON_FACTORY.fromString(responseTxt, Project.class);\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public void delete(String projectId) {\n    try {\n      resourceManager.projects().delete(projectId).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Project get(String projectId, Map<Option, ?> options) {\n    try {\n      return resourceManager\n          .projects()\n          .get(projectId)\n          .setFields(Option.FIELDS.getString(options))\n          .execute();\n    } catch (IOException ex) {\n      ResourceManagerException translated = translate(ex);\n      if (translated.getCode() == HTTP_FORBIDDEN || translated.getCode() == HTTP_NOT_FOUND) {\n        // Service can return either 403 or 404 to signify that the project doesn't exist.\n        return null;\n      } else {\n        throw translated;\n      }\n    }\n  }\n\n  @Override\n  public Tuple<String, Iterable<Project>> list(Map<Option, ?> options) {\n    try {\n      ListProjectsResponse response =\n          resourceManager\n              .projects()\n              .list()\n              .setFields(Option.FIELDS.getString(options))\n              .setFilter(Option.FILTER.getString(options))\n              .setPageSize(Option.PAGE_SIZE.getInt(options))\n              .setPageToken(Option.PAGE_TOKEN.getString(options))\n              .execute();\n      return Tuple.<String, Iterable<Project>>of(\n          response.getNextPageToken(), response.getProjects());\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public void undelete(String projectId) {\n    try {\n      resourceManager.projects().undelete(projectId, new UndeleteProjectRequest()).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Project replace(Project project) {\n    try {\n      return resourceManager.projects().update(project.getProjectId(), project).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Policy getPolicy(String projectId) throws ResourceManagerException {\n    try {\n      return resourceManager\n          .projects()\n          .getIamPolicy(projectId, new GetIamPolicyRequest())\n          .execute();\n    } catch (IOException ex) {\n      ResourceManagerException translated = translate(ex);\n      if (translated.getCode() == HTTP_FORBIDDEN) {\n        // Service returns permission denied if policy doesn't exist.\n        return null;\n      } else {\n        throw translated;\n      }\n    }\n  }\n\n  @Override\n  public Policy replacePolicy(String projectId, Policy newPolicy) throws ResourceManagerException {\n    try {\n      return resourceManager\n          .projects()\n          .setIamPolicy(projectId, new SetIamPolicyRequest().setPolicy(newPolicy))\n          .execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public List<Boolean> testPermissions(String projectId, List<String> permissions)\n      throws ResourceManagerException {\n    try {\n      TestIamPermissionsResponse response =\n          resourceManager\n              .projects()\n              .testIamPermissions(\n                  projectId, new TestIamPermissionsRequest().setPermissions(permissions))\n              .execute();\n      Set<String> permissionsOwned =\n          ImmutableSet.copyOf(firstNonNull(response.getPermissions(), ImmutableList.<String>of()));\n      ImmutableList.Builder<Boolean> answer = ImmutableList.builder();\n      for (String p : permissions) {\n        answer.add(permissionsOwned.contains(p));\n      }\n      return answer.build();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Map<String, Boolean> testOrgPermissions(String resource, List<String> permissions)\n      throws IOException {\n    try {\n      TestIamPermissionsResponse response =\n          resourceManager\n              .organizations()\n              .testIamPermissions(\n                  resource, new TestIamPermissionsRequest().setPermissions(permissions))\n              .execute();\n      Set<String> permissionsOwned =\n          ImmutableSet.copyOf(firstNonNull(response.getPermissions(), ImmutableList.<String>of()));\n      ImmutableMap.Builder<String, Boolean> answer = ImmutableMap.builder();\n      for (String permission : permissions) {\n        answer.put(permission, permissionsOwned.contains(permission));\n      }\n      return answer.build();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public void clearOrgPolicy(String resource, OrgPolicy orgPolicy) throws IOException {\n    try {\n      resourceManager\n          .folders()\n          .clearOrgPolicy(\n              resource,\n              new ClearOrgPolicyRequest()\n                  .setConstraint(orgPolicy.getConstraint())\n                  .setEtag(orgPolicy.getEtag()))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy getEffectiveOrgPolicy(String resource, String constraint) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .getEffectiveOrgPolicy(\n              resource, new GetEffectiveOrgPolicyRequest().setConstraint(constraint))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy getOrgPolicy(String resource, String constraint) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .getOrgPolicy(resource, new GetOrgPolicyRequest().setConstraint(constraint))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public ListResult<Constraint> listAvailableOrgPolicyConstraints(\n      String resource, Map<Option, ?> options) throws IOException {\n    try {\n      ListAvailableOrgPolicyConstraintsResponse response =\n          resourceManager\n              .folders()\n              .listAvailableOrgPolicyConstraints(\n                  resource,\n                  new ListAvailableOrgPolicyConstraintsRequest()\n                      .setPageSize(Option.PAGE_SIZE.getInt(options))\n                      .setPageToken(Option.PAGE_TOKEN.getString(options)))\n              .execute();\n      return ListResult.of(response.getNextPageToken(), response.getConstraints());\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public ListResult<OrgPolicy> listOrgPolicies(String resource, Map<Option, ?> options)\n      throws IOException {\n    try {\n      ListOrgPoliciesResponse response =\n          resourceManager\n              .folders()\n              .listOrgPolicies(\n                  resource,\n                  new ListOrgPoliciesRequest()\n                      .setPageSize(Option.PAGE_SIZE.getInt(options))\n                      .setPageToken(Option.PAGE_TOKEN.getString(options)))\n              .execute();\n      return ListResult.of(response.getNextPageToken(), response.getPolicies());\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy replaceOrgPolicy(String resource, OrgPolicy orgPolicy) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .setOrgPolicy(resource, new SetOrgPolicyRequest().setPolicy(orgPolicy))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: google-api-services-cloudresourcemanager v1-rev20220807-2.0.0->v3-rev20220807-2.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.api.services.cloudresourcemanager.model.OrgPolicy\n-- com.google.api.services.cloudresourcemanager.model.Policy\n-- com.google.api.services.cloudresourcemanager.model.RestoreDefault\n-- com.google.api.services.cloudresourcemanager.model.BooleanPolicy\n-- com.google.api.services.cloudresourcemanager.model.ListPolicy\n-- com.google.api.services.cloudresourcemanager.model.Project\n-- com.google.api.services.cloudresourcemanager.model.Constraint\n-- com.google.api.services.cloudresourcemanager.model.BooleanConstraint\n-- com.google.api.services.cloudresourcemanager.model.ListConstraint\n-- com.google.api.services.cloudresourcemanager.model.Operation\n-- com.google.api.services.cloudresourcemanager.CloudResourceManager\n-- com.google.api.services.cloudresourcemanager.model.Status\n++ public Project com.google.api.services.cloudresourcemanager.v3.model.Project()\n++ public Operation com.google.api.services.cloudresourcemanager.v3.model.Operation()\n++ public Status com.google.api.services.cloudresourcemanager.v3.model.Status()\n++ public CloudResourceManager com.google.api.services.cloudresourcemanager.v3.CloudResourceManager(com.google.api.client.http.HttpTransport,com.google.api.client.json.JsonFactory,com.google.api.client.http.HttpRequestInitializer)\n++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()\n\nThe error is triggered in the following specific lines in the previous code:\nimport com.google.api.services.cloudresourcemanager.CloudResourceManager;\nimport com.google.api.services.cloudresourcemanager.model.ClearOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Constraint;\nimport com.google.api.services.cloudresourcemanager.model.GetEffectiveOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListProjectsResponse;\nimport com.google.api.services.cloudresourcemanager.model.Operation;\nimport com.google.api.services.cloudresourcemanager.model.OrgPolicy;\nimport com.google.api.services.cloudresourcemanager.model.Policy;\nimport com.google.api.services.cloudresourcemanager.model.Project;\nimport com.google.api.services.cloudresourcemanager.model.SetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.SetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Status;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsRequest;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsResponse;\nimport com.google.api.services.cloudresourcemanager.model.UndeleteProjectRequest;\n  private static final ResultRetryAlgorithm<Operation> OPERATION_HANDLER =\n  private final CloudResourceManager resourceManager;\n  private static ResourceManagerException translate(Status status) {\nwith the following error message:\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[32,52] package com.google.api.services.cloudresourcemanager does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[33,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[34,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[35,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[36,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[37,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[38,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[39,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[40,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[41,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[42,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[43,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[44,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[45,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[46,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[47,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[48,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[49,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[50,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[51,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[52,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[114,45] cannot find symbol  symbol:   class Operation\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[132,17] cannot find symbol  symbol:   class CloudResourceManager\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[151,53] cannot find symbol  symbol:   class Status\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import com.google.api.services.cloudresourcemanager.CloudResourceManager;\nimport com.google.api.services.cloudresourcemanager.model.ClearOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Constraint;\nimport com.google.api.services.cloudresourcemanager.model.GetEffectiveOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListProjectsResponse;\nimport com.google.api.services.cloudresourcemanager.model.Operation;\nimport com.google.api.services.cloudresourcemanager.model.OrgPolicy;\nimport com.google.api.services.cloudresourcemanager.model.Policy;\nimport com.google.api.services.cloudresourcemanager.model.Project;\nimport com.google.api.services.cloudresourcemanager.model.SetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.SetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Status;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsRequest;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsResponse;\nimport com.google.api.services.cloudresourcemanager.model.UndeleteProjectRequest;\n  private static final ResultRetryAlgorithm<Operation> OPERATION_HANDLER =\n  private final CloudResourceManager resourceManager;\n  private static ResourceManagerException translate(Status status) {",
    "error_message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[32,52] package com.google.api.services.cloudresourcemanager does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[33,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[34,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[35,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[36,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[37,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[38,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[39,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[40,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[41,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[42,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[43,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[44,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[45,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[46,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[47,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[48,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[49,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[50,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[51,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[52,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[114,45] cannot find symbol  symbol:   class Operation\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[132,17] cannot find symbol  symbol:   class CloudResourceManager\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/spi/v1beta1/HttpResourceManagerRpc.java:[151,53] cannot find symbol  symbol:   class Status\n  location: class com.google.cloud.resourcemanager.spi.v1beta1.HttpResourceManagerRpc",
    "api_diff": "-- com.google.api.services.cloudresourcemanager.model.OrgPolicy\n-- com.google.api.services.cloudresourcemanager.model.Policy\n-- com.google.api.services.cloudresourcemanager.model.RestoreDefault\n-- com.google.api.services.cloudresourcemanager.model.BooleanPolicy\n-- com.google.api.services.cloudresourcemanager.model.ListPolicy\n-- com.google.api.services.cloudresourcemanager.model.Project\n-- com.google.api.services.cloudresourcemanager.model.Constraint\n-- com.google.api.services.cloudresourcemanager.model.BooleanConstraint\n-- com.google.api.services.cloudresourcemanager.model.ListConstraint\n-- com.google.api.services.cloudresourcemanager.model.Operation\n-- com.google.api.services.cloudresourcemanager.CloudResourceManager\n-- com.google.api.services.cloudresourcemanager.model.Status\n++ public Project com.google.api.services.cloudresourcemanager.v3.model.Project()\n++ public Operation com.google.api.services.cloudresourcemanager.v3.model.Operation()\n++ public Status com.google.api.services.cloudresourcemanager.v3.model.Status()\n++ public CloudResourceManager com.google.api.services.cloudresourcemanager.v3.CloudResourceManager(com.google.api.client.http.HttpTransport,com.google.api.client.json.JsonFactory,com.google.api.client.http.HttpRequestInitializer)\n++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()",
    "original_code": "/*\n * Copyright 2016 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.google.cloud.resourcemanager.spi.v1beta1;\n\nimport static com.google.cloud.RetryHelper.runWithRetries;\nimport static com.google.common.base.MoreObjects.firstNonNull;\nimport static java.net.HttpURLConnection.HTTP_FORBIDDEN;\nimport static java.net.HttpURLConnection.HTTP_NOT_FOUND;\n\nimport com.google.api.client.http.HttpRequestInitializer;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.core.ApiClock;\nimport com.google.api.gax.retrying.ResultRetryAlgorithm;\nimport com.google.api.gax.retrying.RetrySettings;\nimport com.google.api.gax.retrying.TimedAttemptSettings;\nimport com.google.api.services.cloudresourcemanager.CloudResourceManager;\nimport com.google.api.services.cloudresourcemanager.model.ClearOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Constraint;\nimport com.google.api.services.cloudresourcemanager.model.GetEffectiveOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.GetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListAvailableOrgPolicyConstraintsResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesRequest;\nimport com.google.api.services.cloudresourcemanager.model.ListOrgPoliciesResponse;\nimport com.google.api.services.cloudresourcemanager.model.ListProjectsResponse;\nimport com.google.api.services.cloudresourcemanager.model.Operation;\nimport com.google.api.services.cloudresourcemanager.model.OrgPolicy;\nimport com.google.api.services.cloudresourcemanager.model.Policy;\nimport com.google.api.services.cloudresourcemanager.model.Project;\nimport com.google.api.services.cloudresourcemanager.model.SetIamPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.SetOrgPolicyRequest;\nimport com.google.api.services.cloudresourcemanager.model.Status;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsRequest;\nimport com.google.api.services.cloudresourcemanager.model.TestIamPermissionsResponse;\nimport com.google.api.services.cloudresourcemanager.model.UndeleteProjectRequest;\nimport com.google.cloud.RetryHelper;\nimport com.google.cloud.Tuple;\nimport com.google.cloud.http.BaseHttpServiceException;\nimport com.google.cloud.http.HttpTransportOptions;\nimport com.google.cloud.resourcemanager.ResourceManagerException;\nimport com.google.cloud.resourcemanager.ResourceManagerOptions;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.ImmutableSet;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.Callable;\nimport org.threeten.bp.Duration;\n\n/** @deprecated v3 GAPIC client of ResourceManager is now available */\n@Deprecated\npublic class HttpResourceManagerRpc implements ResourceManagerRpc {\n\n  private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n\n  // See doc of create() for more details:\n  // https://developers.google.com/resources/api-libraries/documentation/cloudresourcemanager/v1/java/latest/com/google/api/services/cloudresourcemanager/CloudResourceManager.Projects.html#create(com.google.api.services.cloudresourcemanager.model.Project)\n  private static final RetrySettings CREATE_RETRY_SETTINGS =\n      RetrySettings.newBuilder()\n          // SLO permits 30s at 90th percentile, 4x it for total limit.\n          // Observed latency is much lower: 11s at 95th percentile.\n          .setTotalTimeout(Duration.ofMinutes(2))\n          // Linked doc recommends polling at 5th second.\n          .setInitialRetryDelay(Duration.ofSeconds(5))\n          .setRetryDelayMultiplier(1.5)\n          // Observed P95 latency is 11s. We probably shouldn't sleep longer than this.\n          .setMaxRetryDelay(Duration.ofSeconds(11))\n          .setJittered(true)\n          .setInitialRpcTimeout(Duration.ofSeconds(5))\n          .setMaxRpcTimeout(Duration.ofSeconds(5))\n          .build();\n\n  // reference: https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto\n  private static final ImmutableMap<Integer, Integer> RPC_TO_HTTP_CODES =\n      ImmutableMap.<Integer, Integer>builder()\n          .put(0, 200)\n          .put(1, 499)\n          .put(2, 500)\n          .put(3, 400)\n          .put(4, 504)\n          .put(5, 404)\n          .put(6, 409)\n          .put(7, 403)\n          .put(16, 401)\n          .put(8, 429)\n          .put(9, 400)\n          .put(10, 409)\n          .put(11, 400)\n          .put(12, 501)\n          .put(13, 500)\n          .put(14, 503)\n          .put(15, 500)\n          .build();\n\n  private static final ResultRetryAlgorithm<Operation> OPERATION_HANDLER =\n      new ResultRetryAlgorithm<Operation>() {\n        @Override\n        public TimedAttemptSettings createNextAttempt(\n            Throwable prevThrowable, Operation prevResponse, TimedAttemptSettings prevSettings) {\n          return null;\n        }\n\n        @Override\n        public boolean shouldRetry(Throwable prevThrowable, Operation prevOp) {\n          if (prevThrowable == null) {\n            return prevOp.getDone() == null || !prevOp.getDone();\n          }\n          return prevThrowable instanceof ResourceManagerException\n              && ((ResourceManagerException) prevThrowable).isRetryable();\n        }\n      };\n\n  private final CloudResourceManager resourceManager;\n  private final ApiClock clock;\n\n  public HttpResourceManagerRpc(ResourceManagerOptions options) {\n    HttpTransportOptions transportOptions = (HttpTransportOptions) options.getTransportOptions();\n    HttpTransport transport = transportOptions.getHttpTransportFactory().create();\n    HttpRequestInitializer initializer = transportOptions.getHttpRequestInitializer(options);\n    resourceManager =\n        new CloudResourceManager.Builder(transport, JSON_FACTORY, initializer)\n            .setRootUrl(options.getHost())\n            .setApplicationName(options.getApplicationName())\n            .build();\n    clock = options.getClock();\n  }\n\n  private static ResourceManagerException translate(IOException exception) {\n    return new ResourceManagerException(exception);\n  }\n\n  private static ResourceManagerException translate(Status status) {\n    Integer code = RPC_TO_HTTP_CODES.get(status.getCode());\n    if (code == null) {\n      code = BaseHttpServiceException.UNKNOWN_CODE;\n    }\n    return new ResourceManagerException(code, status.getMessage());\n  }\n\n  @Override\n  public Project create(Project project) {\n    final Operation operation;\n    try {\n      operation = resourceManager.projects().create(project).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n\n    Operation finishedOp =\n        runWithRetries(\n            new Callable<Operation>() {\n              @Override\n              public Operation call() {\n                try {\n                  return resourceManager.operations().get(operation.getName()).execute();\n                } catch (IOException ex) {\n                  throw translate(ex);\n                }\n              }\n            },\n            CREATE_RETRY_SETTINGS,\n            OPERATION_HANDLER,\n            clock);\n    if (finishedOp.getError() != null) {\n      throw translate(finishedOp.getError());\n    }\n\n    // NOTE(pongad): Operation.getResponse() returns a Map<String, Object>.\n    // 1. `(Project) finishedOp.getResponse()` doesn't work,\n    // because JSON deserializer in execute() didn't know to create a Project object.\n    // 2. `new Project().putAll(finishedOp.getResponse())` doesn't work either.\n    // 64-bit integers are sent as strings in JSON,\n    // so execute(), not knowing the type, parses it as String, not Long.\n    try {\n      String responseTxt = JSON_FACTORY.toString(finishedOp.getResponse());\n      return JSON_FACTORY.fromString(responseTxt, Project.class);\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public void delete(String projectId) {\n    try {\n      resourceManager.projects().delete(projectId).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Project get(String projectId, Map<Option, ?> options) {\n    try {\n      return resourceManager\n          .projects()\n          .get(projectId)\n          .setFields(Option.FIELDS.getString(options))\n          .execute();\n    } catch (IOException ex) {\n      ResourceManagerException translated = translate(ex);\n      if (translated.getCode() == HTTP_FORBIDDEN || translated.getCode() == HTTP_NOT_FOUND) {\n        // Service can return either 403 or 404 to signify that the project doesn't exist.\n        return null;\n      } else {\n        throw translated;\n      }\n    }\n  }\n\n  @Override\n  public Tuple<String, Iterable<Project>> list(Map<Option, ?> options) {\n    try {\n      ListProjectsResponse response =\n          resourceManager\n              .projects()\n              .list()\n              .setFields(Option.FIELDS.getString(options))\n              .setFilter(Option.FILTER.getString(options))\n              .setPageSize(Option.PAGE_SIZE.getInt(options))\n              .setPageToken(Option.PAGE_TOKEN.getString(options))\n              .execute();\n      return Tuple.<String, Iterable<Project>>of(\n          response.getNextPageToken(), response.getProjects());\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public void undelete(String projectId) {\n    try {\n      resourceManager.projects().undelete(projectId, new UndeleteProjectRequest()).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Project replace(Project project) {\n    try {\n      return resourceManager.projects().update(project.getProjectId(), project).execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Policy getPolicy(String projectId) throws ResourceManagerException {\n    try {\n      return resourceManager\n          .projects()\n          .getIamPolicy(projectId, new GetIamPolicyRequest())\n          .execute();\n    } catch (IOException ex) {\n      ResourceManagerException translated = translate(ex);\n      if (translated.getCode() == HTTP_FORBIDDEN) {\n        // Service returns permission denied if policy doesn't exist.\n        return null;\n      } else {\n        throw translated;\n      }\n    }\n  }\n\n  @Override\n  public Policy replacePolicy(String projectId, Policy newPolicy) throws ResourceManagerException {\n    try {\n      return resourceManager\n          .projects()\n          .setIamPolicy(projectId, new SetIamPolicyRequest().setPolicy(newPolicy))\n          .execute();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public List<Boolean> testPermissions(String projectId, List<String> permissions)\n      throws ResourceManagerException {\n    try {\n      TestIamPermissionsResponse response =\n          resourceManager\n              .projects()\n              .testIamPermissions(\n                  projectId, new TestIamPermissionsRequest().setPermissions(permissions))\n              .execute();\n      Set<String> permissionsOwned =\n          ImmutableSet.copyOf(firstNonNull(response.getPermissions(), ImmutableList.<String>of()));\n      ImmutableList.Builder<Boolean> answer = ImmutableList.builder();\n      for (String p : permissions) {\n        answer.add(permissionsOwned.contains(p));\n      }\n      return answer.build();\n    } catch (IOException ex) {\n      throw translate(ex);\n    }\n  }\n\n  @Override\n  public Map<String, Boolean> testOrgPermissions(String resource, List<String> permissions)\n      throws IOException {\n    try {\n      TestIamPermissionsResponse response =\n          resourceManager\n              .organizations()\n              .testIamPermissions(\n                  resource, new TestIamPermissionsRequest().setPermissions(permissions))\n              .execute();\n      Set<String> permissionsOwned =\n          ImmutableSet.copyOf(firstNonNull(response.getPermissions(), ImmutableList.<String>of()));\n      ImmutableMap.Builder<String, Boolean> answer = ImmutableMap.builder();\n      for (String permission : permissions) {\n        answer.put(permission, permissionsOwned.contains(permission));\n      }\n      return answer.build();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public void clearOrgPolicy(String resource, OrgPolicy orgPolicy) throws IOException {\n    try {\n      resourceManager\n          .folders()\n          .clearOrgPolicy(\n              resource,\n              new ClearOrgPolicyRequest()\n                  .setConstraint(orgPolicy.getConstraint())\n                  .setEtag(orgPolicy.getEtag()))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy getEffectiveOrgPolicy(String resource, String constraint) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .getEffectiveOrgPolicy(\n              resource, new GetEffectiveOrgPolicyRequest().setConstraint(constraint))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy getOrgPolicy(String resource, String constraint) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .getOrgPolicy(resource, new GetOrgPolicyRequest().setConstraint(constraint))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public ListResult<Constraint> listAvailableOrgPolicyConstraints(\n      String resource, Map<Option, ?> options) throws IOException {\n    try {\n      ListAvailableOrgPolicyConstraintsResponse response =\n          resourceManager\n              .folders()\n              .listAvailableOrgPolicyConstraints(\n                  resource,\n                  new ListAvailableOrgPolicyConstraintsRequest()\n                      .setPageSize(Option.PAGE_SIZE.getInt(options))\n                      .setPageToken(Option.PAGE_TOKEN.getString(options)))\n              .execute();\n      return ListResult.of(response.getNextPageToken(), response.getConstraints());\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public ListResult<OrgPolicy> listOrgPolicies(String resource, Map<Option, ?> options)\n      throws IOException {\n    try {\n      ListOrgPoliciesResponse response =\n          resourceManager\n              .folders()\n              .listOrgPolicies(\n                  resource,\n                  new ListOrgPoliciesRequest()\n                      .setPageSize(Option.PAGE_SIZE.getInt(options))\n                      .setPageToken(Option.PAGE_TOKEN.getString(options)))\n              .execute();\n      return ListResult.of(response.getNextPageToken(), response.getPolicies());\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n\n  @Override\n  public OrgPolicy replaceOrgPolicy(String resource, OrgPolicy orgPolicy) throws IOException {\n    try {\n      return resourceManager\n          .folders()\n          .setOrgPolicy(resource, new SetOrgPolicyRequest().setPolicy(orgPolicy))\n          .execute();\n    } catch (RetryHelper.RetryHelperException ex) {\n      throw ResourceManagerException.translateAndThrow(ex);\n    }\n  }\n}\n",
    "project": "google-cloud-java",
    "libraryName": "google-api-services-cloudresourcemanager",
    "libraryGroupID": "com.google.apis",
    "newVersion": "v3-rev20220807-2.0.0",
    "previousVersion": "v1-rev20220807-2.0.0",
    "breakingCommit": "471d07e01cd0c79dc9bed5344ed46418f4c078a2"
}