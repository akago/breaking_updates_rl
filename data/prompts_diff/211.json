{
    "absolute_path_to_file_in_container": "/depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java",
    "errors": [
        {
            "line_number": 68,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[68,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph",
            "file_name": "DefaultCallGraph.java",
            "BCs": [],
            "Additions": [],
            "uid": "c9d633d5-a007-5447-b707-ba9eafaec855"
        },
        {
            "line_number": 73,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[73,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph",
            "file_name": "DefaultCallGraph.java",
            "BCs": [],
            "Additions": [],
            "uid": "c9d633d5-a007-5447-b707-ba9eafaec855"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright (c) 2020, CASTOR Software Research Centre (www.castor.kth.se)\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT\n * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage se.kth.depclean.core.analysis.graph;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Set;\nimport lombok.extern.slf4j.Slf4j;\nimport org.jgrapht.graph.AbstractBaseGraph;\nimport org.jgrapht.graph.DefaultDirectedGraph;\nimport org.jgrapht.graph.DefaultEdge;\nimport org.jgrapht.traverse.DepthFirstIterator;\n\n/**\n * A directed graph G = (V, E) where V is a set of classes and E is a set of edges. Edges represent class member calls between the classes in V.\n */\n@Slf4j\npublic class DefaultCallGraph {\n\n  private static final AbstractBaseGraph<String, DefaultEdge> directedGraph = new DefaultDirectedGraph<>(DefaultEdge.class);\n  private static final Set<String> projectVertices = new HashSet<>();\n  private static final Map<String, Set<String>> usagesPerClass = new HashMap<>();\n\n  /**\n   * Add an edge to the call graph of classes.\n   *\n   * @param clazz                  The source.\n   * @param referencedClassMembers The target.\n   */\n  public static void addEdge(String clazz, Set<String> referencedClassMembers) {\n    directedGraph.addVertex(clazz);\n    for (String referencedClassMember : referencedClassMembers) {\n      if (!directedGraph.containsVertex(referencedClassMember)) {\n        directedGraph.addVertex(referencedClassMember);\n      }\n      directedGraph.addEdge(clazz, referencedClassMember);\n      projectVertices.add(clazz);\n\n      // Save the pair [class -> referencedClassMember] for further analysis\n      addReferencedClassMember(clazz, referencedClassMember);\n    }\n  }\n\n  /**\n   * Traverses the call graph to obtain a set of all the reachable classes from a set of classes. Classes are vertices in the graph.\n   *\n   * @param projectClasses The classes in the Maven project.\n   * @return All the referenced classes.\n   */\n  public static Set<String> referencedClassMembers(Set<String> projectClasses) {\n    log.debug(\"Project classes: \" + projectClasses);\n    Set<String> allReferencedClassMembers = new HashSet<>();\n    for (String projectClass : projectClasses) {\n      allReferencedClassMembers.addAll(traverse(projectClass));\n    }\n    log.debug(\"All referenced class members: \" + allReferencedClassMembers);\n    return allReferencedClassMembers;\n  }\n\n  /**\n   * Traverse the graph using DFS.\n   *\n   * @param start The starting vertex.\n   * @return The set of all visited vertices.\n   */\n  private static Set<String> traverse(String start) {\n    Set<String> referencedClassMembers = new HashSet<>();\n    Iterator<String> iterator = new DepthFirstIterator<>(directedGraph, start);\n    while (iterator.hasNext()) {\n      referencedClassMembers.add(iterator.next());\n    }\n    return referencedClassMembers;\n  }\n\n  private static void addReferencedClassMember(String clazz, String referencedClassMember) {\n    //System.out.println(\"\\t\" + clazz + \" -> \" + referencedClassMember);\n    Set<String> s = usagesPerClass.computeIfAbsent(clazz, k -> new HashSet<>());\n    s.add(referencedClassMember);\n  }\n\n  public static AbstractBaseGraph<String, DefaultEdge> getDirectedGraph() {\n    return directedGraph;\n  }\n\n  public static Set<String> getProjectVertices() {\n    return projectVertices;\n  }\n\n  public static void clear() {\n    projectVertices.clear();\n    usagesPerClass.clear();\n  }\n\n  public static Map<String, Set<String>> getUsagesPerClass() {\n    return usagesPerClass;\n  }\n\n}\n'''\nThe error is caused by a change in the API of the dependency: guava 31.1-jre->32.0.0-android. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet\n\nThe error is triggered in the following specific lines in the previous code:\n    log.debug(\"Project classes: \" + projectClasses);\n    log.debug(\"All referenced class members: \" + allReferencedClassMembers);\nwith the following error message:\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[68,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[73,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "    log.debug(\"Project classes: \" + projectClasses);\n    log.debug(\"All referenced class members: \" + allReferencedClassMembers);",
    "error_message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[68,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/graph/DefaultCallGraph.java:[73,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.graph.DefaultCallGraph",
    "api_diff": "-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet",
    "original_code": "/*\n * Copyright (c) 2020, CASTOR Software Research Centre (www.castor.kth.se)\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT\n * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage se.kth.depclean.core.analysis.graph;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Set;\nimport lombok.extern.slf4j.Slf4j;\nimport org.jgrapht.graph.AbstractBaseGraph;\nimport org.jgrapht.graph.DefaultDirectedGraph;\nimport org.jgrapht.graph.DefaultEdge;\nimport org.jgrapht.traverse.DepthFirstIterator;\n\n/**\n * A directed graph G = (V, E) where V is a set of classes and E is a set of edges. Edges represent class member calls between the classes in V.\n */\n@Slf4j\npublic class DefaultCallGraph {\n\n  private static final AbstractBaseGraph<String, DefaultEdge> directedGraph = new DefaultDirectedGraph<>(DefaultEdge.class);\n  private static final Set<String> projectVertices = new HashSet<>();\n  private static final Map<String, Set<String>> usagesPerClass = new HashMap<>();\n\n  /**\n   * Add an edge to the call graph of classes.\n   *\n   * @param clazz                  The source.\n   * @param referencedClassMembers The target.\n   */\n  public static void addEdge(String clazz, Set<String> referencedClassMembers) {\n    directedGraph.addVertex(clazz);\n    for (String referencedClassMember : referencedClassMembers) {\n      if (!directedGraph.containsVertex(referencedClassMember)) {\n        directedGraph.addVertex(referencedClassMember);\n      }\n      directedGraph.addEdge(clazz, referencedClassMember);\n      projectVertices.add(clazz);\n\n      // Save the pair [class -> referencedClassMember] for further analysis\n      addReferencedClassMember(clazz, referencedClassMember);\n    }\n  }\n\n  /**\n   * Traverses the call graph to obtain a set of all the reachable classes from a set of classes. Classes are vertices in the graph.\n   *\n   * @param projectClasses The classes in the Maven project.\n   * @return All the referenced classes.\n   */\n  public static Set<String> referencedClassMembers(Set<String> projectClasses) {\n    log.debug(\"Project classes: \" + projectClasses);\n    Set<String> allReferencedClassMembers = new HashSet<>();\n    for (String projectClass : projectClasses) {\n      allReferencedClassMembers.addAll(traverse(projectClass));\n    }\n    log.debug(\"All referenced class members: \" + allReferencedClassMembers);\n    return allReferencedClassMembers;\n  }\n\n  /**\n   * Traverse the graph using DFS.\n   *\n   * @param start The starting vertex.\n   * @return The set of all visited vertices.\n   */\n  private static Set<String> traverse(String start) {\n    Set<String> referencedClassMembers = new HashSet<>();\n    Iterator<String> iterator = new DepthFirstIterator<>(directedGraph, start);\n    while (iterator.hasNext()) {\n      referencedClassMembers.add(iterator.next());\n    }\n    return referencedClassMembers;\n  }\n\n  private static void addReferencedClassMember(String clazz, String referencedClassMember) {\n    //System.out.println(\"\\t\" + clazz + \" -> \" + referencedClassMember);\n    Set<String> s = usagesPerClass.computeIfAbsent(clazz, k -> new HashSet<>());\n    s.add(referencedClassMember);\n  }\n\n  public static AbstractBaseGraph<String, DefaultEdge> getDirectedGraph() {\n    return directedGraph;\n  }\n\n  public static Set<String> getProjectVertices() {\n    return projectVertices;\n  }\n\n  public static void clear() {\n    projectVertices.clear();\n    usagesPerClass.clear();\n  }\n\n  public static Map<String, Set<String>> getUsagesPerClass() {\n    return usagesPerClass;\n  }\n\n}",
    "project": "depclean",
    "libraryName": "guava",
    "libraryGroupID": "com.google.guava",
    "newVersion": "32.0.0-android",
    "previousVersion": "31.1-jre",
    "breakingCommit": "b86a5f84b44a9b50aee69745886c47123f721de3"
}