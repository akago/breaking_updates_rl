{
    "absolute_path_to_file_in_container": "/jclouds/apis/byon/src/main/java/org/jclouds/byon/domain/YamlNode.java",
    "errors": [
        {
            "line_number": 114,
            "message": "[ERROR] /jclouds/apis/byon/src/main/java/org/jclouds/byon/domain/YamlNode.java:[114,64] incompatible types: java.lang.Class<org.jclouds.byon.domain.YamlNode> cannot be converted to org.yaml.snakeyaml.LoaderOptions",
            "additional_info": "",
            "file_name": "YamlNode.java",
            "BCs": [],
            "Additions": [],
            "uid": "82e0641f-0956-5f50-b7e0-b65963e0b65d"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.jclouds.byon.domain;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URI;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.jclouds.byon.Node;\nimport org.jclouds.util.Closeables2;\nimport org.yaml.snakeyaml.DumperOptions;\nimport org.yaml.snakeyaml.Yaml;\nimport org.yaml.snakeyaml.constructor.Constructor;\n\nimport com.google.common.base.Charsets;\nimport com.google.common.base.Function;\nimport com.google.common.base.Throwables;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.Lists;\nimport com.google.common.collect.Maps;\nimport com.google.common.collect.ImmutableMap.Builder;\nimport com.google.common.io.ByteSource;\n\n/**\n * Serializes to the following\n * \n * <pre>\n *       id: cluster-1\n *       name: cluster-1\n *       description: xyz\n *       hostname: cluster-1.mydomain.com\n *       location_id: virginia\n *       os_arch: x86\n *       os_family: linux\n *       os_description: redhat\n *       os_version: 5.3\n *       os_64bit: 5.3\n *       login_port: 2022\n *       group: hadoop\n *       tags:\n *           - vanilla\n *       metadata:\n *           key1: val1\n *       username: kelvin\n *       credential: password_or_rsa\n *         or\n *       credential_url: password_or_rsa_file ex. resource:///id_rsa will get the classpath /id_rsa; file://path/to/id_rsa\n *       sudo_password: password\n * </pre>\n */\npublic class YamlNode {\n   public String id;\n   public String name;\n   public String description;\n   public String hostname;\n   public String location_id;\n   public String os_arch;\n   public String os_family;\n   public String os_description;\n   public String os_version;\n   public int login_port = 22;\n   public boolean os_64bit;\n   public String group;\n   public List<String> tags = Lists.newArrayList();\n   public Map<String, String> metadata = Maps.newLinkedHashMap();\n   public String username;\n   public String credential;\n   public String credential_url;\n   public String sudo_password;\n\n   public static final Function<YamlNode, Node> toNode = new Function<YamlNode, Node>() {\n      @Override\n      public Node apply(YamlNode arg0) {\n         if (arg0 == null)\n            return null;\n         return Node.builder().id(arg0.id).name(arg0.name).description(arg0.description).locationId(arg0.location_id)\n                  .hostname(arg0.hostname).osArch(arg0.os_arch).osFamily(arg0.os_family).osDescription(\n                           arg0.os_description).osVersion(arg0.os_version).os64Bit(arg0.os_64bit).group(arg0.group)\n                  .loginPort(arg0.login_port).tags(arg0.tags).metadata(arg0.metadata).username(arg0.username).credential(arg0.credential).credentialUrl(\n                           arg0.credential_url != null ? URI.create(arg0.credential_url) : null).sudoPassword(\n                           arg0.sudo_password).build();\n      }\n   };\n\n   public Node toNode() {\n      return toNode.apply(this);\n   }\n\n   public static final Function<ByteSource, YamlNode> byteSourceToYamlNode = new Function<ByteSource, YamlNode>() {\n      @Override\n      public YamlNode apply(ByteSource byteSource) {\n         if (byteSource == null)\n            return null;\n         InputStream in = null;\n         try {\n            in = byteSource.openStream();\n            return (YamlNode) new Yaml(new Constructor(YamlNode.class)).load(in);\n         } catch (IOException ioe) {\n            throw Throwables.propagate(ioe);\n         } finally {\n            Closeables2.closeQuietly(in);\n         }\n      }\n   };\n\n   public static YamlNode fromYaml(ByteSource in) {\n      return byteSourceToYamlNode.apply(in);\n   }\n\n   public static final Function<YamlNode, ByteSource> yamlNodeToByteSource = new Function<YamlNode, ByteSource>() {\n      @Override\n      public ByteSource apply(YamlNode in) {\n         if (in == null)\n            return null;\n         Builder<String, Object> prettier = ImmutableMap.builder();\n         if (in.id != null)\n            prettier.put(\"id\", in.id);\n         if (in.name != null)\n            prettier.put(\"name\", in.name);\n         if (in.description != null)\n            prettier.put(\"description\", in.description);\n         if (in.hostname != null)\n            prettier.put(\"hostname\", in.hostname);\n         if (in.location_id != null)\n            prettier.put(\"location_id\", in.location_id);\n         if (in.os_arch != null)\n            prettier.put(\"os_arch\", in.os_arch);\n         if (in.os_family != null)\n            prettier.put(\"os_family\", in.os_family);\n         if (in.os_description != null)\n            prettier.put(\"os_description\", in.os_description);\n         if (in.os_version != null)\n            prettier.put(\"os_version\", in.os_version);\n         if (in.os_64bit)\n            prettier.put(\"os_64bit\", in.os_64bit);\n         if (in.login_port != 22)\n            prettier.put(\"login_port\", in.login_port);\n         if (in.group != null)\n            prettier.put(\"group\", in.group);\n         if (in.tags.size() != 0)\n            prettier.put(\"tags\", in.tags);\n         if (in.metadata.size() != 0)\n            prettier.put(\"metadata\", in.metadata);\n         if (in.username != null)\n            prettier.put(\"username\", in.username);\n         if (in.credential != null)\n            prettier.put(\"credential\", in.credential);\n         if (in.credential_url != null)\n            prettier.put(\"credential_url\", in.credential_url);\n         if (in.sudo_password != null)\n            prettier.put(\"sudo_password\", in.sudo_password);\n         DumperOptions options = new DumperOptions();\n         options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n         return ByteSource.wrap(new Yaml(options).dump(prettier.build()).getBytes(Charsets.UTF_8));\n      }\n   };\n\n   public ByteSource toYaml() {\n      return yamlNodeToByteSource.apply(this);\n   }\n\n   public static YamlNode fromNode(Node in) {\n      return nodeToYamlNode.apply(in);\n   }\n\n   public static final Function<Node, YamlNode> nodeToYamlNode = new Function<Node, YamlNode>() {\n      @Override\n      public YamlNode apply(Node arg0) {\n         if (arg0 == null)\n            return null;\n         YamlNode yaml = new YamlNode();\n         yaml.id = arg0.getId();\n         yaml.name = arg0.getName();\n         yaml.description = arg0.getDescription();\n         yaml.hostname = arg0.getHostname();\n         yaml.location_id = arg0.getLocationId();\n         yaml.os_arch = arg0.getOsArch();\n         yaml.os_family = arg0.getOsFamily();\n         yaml.os_description = arg0.getOsDescription();\n         yaml.os_version = arg0.getOsVersion();\n         yaml.os_64bit = arg0.isOs64Bit();\n         yaml.login_port = arg0.getLoginPort();\n         yaml.group = arg0.getGroup();\n         yaml.tags = ImmutableList.copyOf(arg0.getTags());\n         yaml.metadata = ImmutableMap.copyOf(arg0.getMetadata());\n         yaml.username = arg0.getUsername();\n         yaml.credential = arg0.getCredential();\n         yaml.credential_url = arg0.getCredentialUrl() != null ? arg0.getCredentialUrl().toASCIIString() : null;\n         yaml.sudo_password = arg0.getSudoPassword();\n         return yaml;\n      }\n   };\n\n}\n\n'''\nThe error is caused by a change in the API of the dependency: snakeyaml 1.32->2.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n\n\nThe error is triggered in the following specific lines in the previous code:\n            return (YamlNode) new Yaml(new Constructor(YamlNode.class)).load(in);\nwith the following error message:\n[ERROR] /jclouds/apis/byon/src/main/java/org/jclouds/byon/domain/YamlNode.java:[114,64] incompatible types: java.lang.Class<org.jclouds.byon.domain.YamlNode> cannot be converted to org.yaml.snakeyaml.LoaderOptions\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "            return (YamlNode) new Yaml(new Constructor(YamlNode.class)).load(in);",
    "error_message": "[ERROR] /jclouds/apis/byon/src/main/java/org/jclouds/byon/domain/YamlNode.java:[114,64] incompatible types: java.lang.Class<org.jclouds.byon.domain.YamlNode> cannot be converted to org.yaml.snakeyaml.LoaderOptions",
    "api_diff": "",
    "original_code": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.jclouds.byon.domain;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URI;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.jclouds.byon.Node;\nimport org.jclouds.util.Closeables2;\nimport org.yaml.snakeyaml.DumperOptions;\nimport org.yaml.snakeyaml.Yaml;\nimport org.yaml.snakeyaml.constructor.Constructor;\n\nimport com.google.common.base.Charsets;\nimport com.google.common.base.Function;\nimport com.google.common.base.Throwables;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.Lists;\nimport com.google.common.collect.Maps;\nimport com.google.common.collect.ImmutableMap.Builder;\nimport com.google.common.io.ByteSource;\n\n/**\n * Serializes to the following\n * \n * <pre>\n *       id: cluster-1\n *       name: cluster-1\n *       description: xyz\n *       hostname: cluster-1.mydomain.com\n *       location_id: virginia\n *       os_arch: x86\n *       os_family: linux\n *       os_description: redhat\n *       os_version: 5.3\n *       os_64bit: 5.3\n *       login_port: 2022\n *       group: hadoop\n *       tags:\n *           - vanilla\n *       metadata:\n *           key1: val1\n *       username: kelvin\n *       credential: password_or_rsa\n *         or\n *       credential_url: password_or_rsa_file ex. resource:///id_rsa will get the classpath /id_rsa; file://path/to/id_rsa\n *       sudo_password: password\n * </pre>\n */\npublic class YamlNode {\n   public String id;\n   public String name;\n   public String description;\n   public String hostname;\n   public String location_id;\n   public String os_arch;\n   public String os_family;\n   public String os_description;\n   public String os_version;\n   public int login_port = 22;\n   public boolean os_64bit;\n   public String group;\n   public List<String> tags = Lists.newArrayList();\n   public Map<String, String> metadata = Maps.newLinkedHashMap();\n   public String username;\n   public String credential;\n   public String credential_url;\n   public String sudo_password;\n\n   public static final Function<YamlNode, Node> toNode = new Function<YamlNode, Node>() {\n      @Override\n      public Node apply(YamlNode arg0) {\n         if (arg0 == null)\n            return null;\n         return Node.builder().id(arg0.id).name(arg0.name).description(arg0.description).locationId(arg0.location_id)\n                  .hostname(arg0.hostname).osArch(arg0.os_arch).osFamily(arg0.os_family).osDescription(\n                           arg0.os_description).osVersion(arg0.os_version).os64Bit(arg0.os_64bit).group(arg0.group)\n                  .loginPort(arg0.login_port).tags(arg0.tags).metadata(arg0.metadata).username(arg0.username).credential(arg0.credential).credentialUrl(\n                           arg0.credential_url != null ? URI.create(arg0.credential_url) : null).sudoPassword(\n                           arg0.sudo_password).build();\n      }\n   };\n\n   public Node toNode() {\n      return toNode.apply(this);\n   }\n\n   public static final Function<ByteSource, YamlNode> byteSourceToYamlNode = new Function<ByteSource, YamlNode>() {\n      @Override\n      public YamlNode apply(ByteSource byteSource) {\n         if (byteSource == null)\n            return null;\n         InputStream in = null;\n         try {\n            in = byteSource.openStream();\n            return (YamlNode) new Yaml(new Constructor(YamlNode.class)).load(in);\n         } catch (IOException ioe) {\n            throw Throwables.propagate(ioe);\n         } finally {\n            Closeables2.closeQuietly(in);\n         }\n      }\n   };\n\n   public static YamlNode fromYaml(ByteSource in) {\n      return byteSourceToYamlNode.apply(in);\n   }\n\n   public static final Function<YamlNode, ByteSource> yamlNodeToByteSource = new Function<YamlNode, ByteSource>() {\n      @Override\n      public ByteSource apply(YamlNode in) {\n         if (in == null)\n            return null;\n         Builder<String, Object> prettier = ImmutableMap.builder();\n         if (in.id != null)\n            prettier.put(\"id\", in.id);\n         if (in.name != null)\n            prettier.put(\"name\", in.name);\n         if (in.description != null)\n            prettier.put(\"description\", in.description);\n         if (in.hostname != null)\n            prettier.put(\"hostname\", in.hostname);\n         if (in.location_id != null)\n            prettier.put(\"location_id\", in.location_id);\n         if (in.os_arch != null)\n            prettier.put(\"os_arch\", in.os_arch);\n         if (in.os_family != null)\n            prettier.put(\"os_family\", in.os_family);\n         if (in.os_description != null)\n            prettier.put(\"os_description\", in.os_description);\n         if (in.os_version != null)\n            prettier.put(\"os_version\", in.os_version);\n         if (in.os_64bit)\n            prettier.put(\"os_64bit\", in.os_64bit);\n         if (in.login_port != 22)\n            prettier.put(\"login_port\", in.login_port);\n         if (in.group != null)\n            prettier.put(\"group\", in.group);\n         if (in.tags.size() != 0)\n            prettier.put(\"tags\", in.tags);\n         if (in.metadata.size() != 0)\n            prettier.put(\"metadata\", in.metadata);\n         if (in.username != null)\n            prettier.put(\"username\", in.username);\n         if (in.credential != null)\n            prettier.put(\"credential\", in.credential);\n         if (in.credential_url != null)\n            prettier.put(\"credential_url\", in.credential_url);\n         if (in.sudo_password != null)\n            prettier.put(\"sudo_password\", in.sudo_password);\n         DumperOptions options = new DumperOptions();\n         options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n         return ByteSource.wrap(new Yaml(options).dump(prettier.build()).getBytes(Charsets.UTF_8));\n      }\n   };\n\n   public ByteSource toYaml() {\n      return yamlNodeToByteSource.apply(this);\n   }\n\n   public static YamlNode fromNode(Node in) {\n      return nodeToYamlNode.apply(in);\n   }\n\n   public static final Function<Node, YamlNode> nodeToYamlNode = new Function<Node, YamlNode>() {\n      @Override\n      public YamlNode apply(Node arg0) {\n         if (arg0 == null)\n            return null;\n         YamlNode yaml = new YamlNode();\n         yaml.id = arg0.getId();\n         yaml.name = arg0.getName();\n         yaml.description = arg0.getDescription();\n         yaml.hostname = arg0.getHostname();\n         yaml.location_id = arg0.getLocationId();\n         yaml.os_arch = arg0.getOsArch();\n         yaml.os_family = arg0.getOsFamily();\n         yaml.os_description = arg0.getOsDescription();\n         yaml.os_version = arg0.getOsVersion();\n         yaml.os_64bit = arg0.isOs64Bit();\n         yaml.login_port = arg0.getLoginPort();\n         yaml.group = arg0.getGroup();\n         yaml.tags = ImmutableList.copyOf(arg0.getTags());\n         yaml.metadata = ImmutableMap.copyOf(arg0.getMetadata());\n         yaml.username = arg0.getUsername();\n         yaml.credential = arg0.getCredential();\n         yaml.credential_url = arg0.getCredentialUrl() != null ? arg0.getCredentialUrl().toASCIIString() : null;\n         yaml.sudo_password = arg0.getSudoPassword();\n         return yaml;\n      }\n   };\n\n}\n",
    "project": "jclouds",
    "libraryName": "snakeyaml",
    "libraryGroupID": "org.yaml",
    "newVersion": "2.0",
    "previousVersion": "1.32",
    "breakingCommit": "b2edf635da83fd076262a41751c6f773c17f3b76"
}