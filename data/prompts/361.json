{
    "absolute_path_to_file_in_container": "/artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java",
    "errors": [
        {
            "line_number": 21,
            "message": "[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[21,1] cannot find symbol",
            "additional_info": "  symbol:   static isAllBlank\n  location: class org.apache.commons.lang3.StringUtils",
            "file_name": "CreateJFrogInstanceStep.java",
            "BCs": [],
            "Additions": [],
            "uid": "d97ef286-787b-5dd4-b53d-f20cbd2dc092"
        },
        {
            "line_number": 140,
            "message": "[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[140,17] cannot find symbol",
            "additional_info": "  symbol:   method isAllBlank(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)\n  location: class org.jfrog.hudson.pipeline.declarative.steps.CreateJFrogInstanceStep.Execution",
            "file_name": "CreateJFrogInstanceStep.java",
            "BCs": [],
            "Additions": [],
            "uid": "f99515b2-3c2f-5228-a872-9ee6dde32285"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage org.jfrog.hudson.pipeline.declarative.steps;\n\nimport com.google.inject.Inject;\nimport hudson.Extension;\nimport org.apache.commons.lang3.StringUtils;\nimport org.jenkinsci.plugins.workflow.steps.AbstractStepDescriptorImpl;\nimport org.jenkinsci.plugins.workflow.steps.AbstractStepImpl;\nimport org.jenkinsci.plugins.workflow.steps.StepContext;\nimport org.jfrog.hudson.pipeline.ArtifactorySynchronousStepExecution;\nimport org.jfrog.hudson.pipeline.common.types.JFrogPlatformInstance;\nimport org.jfrog.hudson.pipeline.declarative.BuildDataFile;\nimport org.jfrog.hudson.pipeline.declarative.utils.DeclarativePipelineUtils;\nimport org.jfrog.hudson.util.BuildUniqueIdentifierHelper;\nimport org.jfrog.hudson.util.JenkinsBuildInfoLog;\nimport org.kohsuke.stapler.DataBoundConstructor;\nimport org.kohsuke.stapler.DataBoundSetter;\n\nimport javax.annotation.Nonnull;\nimport java.io.IOException;\n\nimport static org.apache.commons.lang3.StringUtils.isAllBlank;\nimport static org.apache.commons.lang3.StringUtils.isNotBlank;\n\n@SuppressWarnings(\"unused\")\npublic class CreateJFrogInstanceStep extends AbstractStepImpl {\n    public static final String STEP_NAME = \"jfrogInstance\";\n    private final String id;\n\n    private Integer deploymentThreads;\n    private String distributionUrl;\n    private String artifactoryUrl;\n    private String credentialsId;\n    private Boolean bypassProxy;\n    private String username;\n    private String password;\n    private Integer timeout;\n    private Integer retry;\n    private String url;\n\n    @DataBoundConstructor\n    public CreateJFrogInstanceStep(String id) {\n        this.id = id;\n    }\n\n    @DataBoundSetter\n    public void setUrl(String url) {\n        this.url = url;\n    }\n\n    @DataBoundSetter\n    public void setDistributionUrl(String distributionUrl) {\n        this.distributionUrl = distributionUrl;\n    }\n\n    @DataBoundSetter\n    public void setArtifactoryUrl(String artifactoryUrl) {\n        this.artifactoryUrl = artifactoryUrl;\n    }\n\n    @DataBoundSetter\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    @DataBoundSetter\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @DataBoundSetter\n    public void setCredentialsId(String credentialsId) {\n        this.credentialsId = credentialsId;\n    }\n\n    @DataBoundSetter\n    public void setBypassProxy(boolean bypassProxy) {\n        this.bypassProxy = bypassProxy;\n    }\n\n    @DataBoundSetter\n    public void setTimeout(int timeout) {\n        this.timeout = timeout;\n    }\n\n    @DataBoundSetter\n    public void setRetry(int retry) {\n        this.retry = retry;\n    }\n\n    @DataBoundSetter\n    public void setDeploymentThreads(int deploymentThreads) {\n        this.deploymentThreads = deploymentThreads;\n    }\n\n    public static class Execution extends ArtifactorySynchronousStepExecution<Void> {\n        protected static final long serialVersionUID = 1L;\n        private transient final CreateJFrogInstanceStep step;\n\n        @Inject\n        public Execution(CreateJFrogInstanceStep step, StepContext context) throws IOException, InterruptedException {\n            super(context);\n            this.step = step;\n        }\n\n        @Override\n        protected Void runStep() throws Exception {\n            // Prepare Artifactory server\n            JFrogPlatformInstance server = DeclarativePipelineUtils.getJFrogPlatformInstance(build, ws, step.id, false);\n            if (server == null) {\n                server = new JFrogPlatformInstance();\n            }\n            checkInputs(server);\n            overrideServerParameters(server);\n\n            // Store Artifactory server in the BuildDataFile\n            BuildDataFile buildDataFile = new BuildDataFile(STEP_NAME, step.id);\n            buildDataFile.putPOJO(server);\n            String buildNumber = BuildUniqueIdentifierHelper.getBuildNumber(build);\n            DeclarativePipelineUtils.writeBuildDataFile(rootWs, buildNumber, buildDataFile, new JenkinsBuildInfoLog(listener));\n            return null;\n        }\n\n        @Override\n        public org.jfrog.hudson.ArtifactoryServer getUsageReportServer() throws Exception {\n            return null;\n        }\n\n        @Override\n        public String getUsageReportFeatureName() {\n            return null;\n        }\n\n        /**\n         * Validate step's inputs.\n         *\n         * @param server - The server to check\n         * @throws IOException if there is an illegal step configuration.\n         */\n        private void checkInputs(JFrogPlatformInstance server) throws IOException {\n            if (isAllBlank(server.getUrl(), server.getArtifactory().getUrl(), server.getDistribution().getUrl(),\n                    step.url, step.artifactoryUrl, step.distributionUrl)) {\n                throw new IOException(\"Server URL is missing\");\n            }\n            if (isNotBlank(step.credentialsId)) {\n                if (isNotBlank(step.username)) {\n                    throw new IOException(\"'rtServer' step can't include both credentialsId and username\");\n                }\n                if (isNotBlank(step.password)) {\n                    throw new IOException(\"'rtServer' step can't include both credentialsId and password\");\n                }\n            }\n        }\n\n        /**\n         * Override JFrog instance pipeline server parameter with parameters configured in this step.\n         *\n         * @param server - The server to update\n         */\n        private void overrideServerParameters(JFrogPlatformInstance server) {\n            if (isNotBlank(step.url)) {\n                server.setUrl(step.url);\n                String urlWithoutSlash = StringUtils.removeEnd(step.url, \"/\");\n                server.getArtifactory().setPlatformUrl(urlWithoutSlash);\n                server.getArtifactory().setUrl(urlWithoutSlash + \"/\" + \"artifactory\");\n                server.getDistribution().setUrl(urlWithoutSlash + \"/\" + \"distribution\");\n            }\n            if (isNotBlank(step.artifactoryUrl)) {\n                server.getArtifactory().setUrl(step.artifactoryUrl);\n            }\n            if (isNotBlank(step.distributionUrl)) {\n                server.getDistribution().setUrl(step.distributionUrl);\n            }\n            if (isNotBlank(step.credentialsId)) {\n                server.getArtifactory().setCredentialsId(step.credentialsId);\n                server.getDistribution().setCredentialsId(step.credentialsId);\n            }\n            if (isNotBlank(step.username)) {\n                server.getArtifactory().setUsername(step.username);\n                server.getDistribution().setUsername(step.username);\n            }\n            if (isNotBlank(step.password)) {\n                server.getArtifactory().setPassword(step.password);\n                server.getDistribution().setPassword(step.password);\n            }\n\n            // The following fields does not exist in the Distribution server:\n            if (step.deploymentThreads != null) {\n                server.getArtifactory().setDeploymentThreads(step.deploymentThreads);\n            }\n            if (step.bypassProxy != null) {\n                server.getArtifactory().setBypassProxy(step.bypassProxy);\n            }\n            if (step.retry != null) {\n                server.getArtifactory().getConnection().setRetry(step.retry);\n            }\n            if (step.timeout != null) {\n                server.getArtifactory().getConnection().setTimeout(step.timeout);\n            }\n        }\n    }\n\n    @Extension\n    public static final class DescriptorImpl extends AbstractStepDescriptorImpl {\n\n        public DescriptorImpl() {\n            super(CreateJFrogInstanceStep.Execution.class);\n        }\n\n        @Override\n        public String getFunctionName() {\n            return STEP_NAME;\n        }\n\n        @Nonnull\n        @Override\n        public String getDisplayName() {\n            return \"Creates new JFrog instance\";\n        }\n\n        @Override\n        public boolean isAdvanced() {\n            return true;\n        }\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: p4 1.3.8->1.11.5. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n++ protected ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(org.jenkinsci.plugins.p4.credentials.P4BaseCredentials,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.ItemGroup,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n\nThe error is triggered in the following specific lines in the previous code:\nimport static org.apache.commons.lang3.StringUtils.isAllBlank;\n            if (isAllBlank(server.getUrl(), server.getArtifactory().getUrl(), server.getDistribution().getUrl(),\nwith the following error message:\n[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[21,1] cannot find symbol  symbol:   static isAllBlank\n  location: class org.apache.commons.lang3.StringUtils\n[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[140,17] cannot find symbol  symbol:   method isAllBlank(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)\n  location: class org.jfrog.hudson.pipeline.declarative.steps.CreateJFrogInstanceStep.Execution\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import static org.apache.commons.lang3.StringUtils.isAllBlank;\n            if (isAllBlank(server.getUrl(), server.getArtifactory().getUrl(), server.getDistribution().getUrl(),",
    "error_message": "[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[21,1] cannot find symbol  symbol:   static isAllBlank\n  location: class org.apache.commons.lang3.StringUtils\n[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/declarative/steps/CreateJFrogInstanceStep.java:[140,17] cannot find symbol  symbol:   method isAllBlank(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)\n  location: class org.jfrog.hudson.pipeline.declarative.steps.CreateJFrogInstanceStep.Execution",
    "api_diff": "++ protected ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(org.jenkinsci.plugins.p4.credentials.P4BaseCredentials,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.ItemGroup,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)",
    "original_code": "package org.jfrog.hudson.pipeline.declarative.steps;\n\nimport com.google.inject.Inject;\nimport hudson.Extension;\nimport org.apache.commons.lang3.StringUtils;\nimport org.jenkinsci.plugins.workflow.steps.AbstractStepDescriptorImpl;\nimport org.jenkinsci.plugins.workflow.steps.AbstractStepImpl;\nimport org.jenkinsci.plugins.workflow.steps.StepContext;\nimport org.jfrog.hudson.pipeline.ArtifactorySynchronousStepExecution;\nimport org.jfrog.hudson.pipeline.common.types.JFrogPlatformInstance;\nimport org.jfrog.hudson.pipeline.declarative.BuildDataFile;\nimport org.jfrog.hudson.pipeline.declarative.utils.DeclarativePipelineUtils;\nimport org.jfrog.hudson.util.BuildUniqueIdentifierHelper;\nimport org.jfrog.hudson.util.JenkinsBuildInfoLog;\nimport org.kohsuke.stapler.DataBoundConstructor;\nimport org.kohsuke.stapler.DataBoundSetter;\n\nimport javax.annotation.Nonnull;\nimport java.io.IOException;\n\nimport static org.apache.commons.lang3.StringUtils.isAllBlank;\nimport static org.apache.commons.lang3.StringUtils.isNotBlank;\n\n@SuppressWarnings(\"unused\")\npublic class CreateJFrogInstanceStep extends AbstractStepImpl {\n    public static final String STEP_NAME = \"jfrogInstance\";\n    private final String id;\n\n    private Integer deploymentThreads;\n    private String distributionUrl;\n    private String artifactoryUrl;\n    private String credentialsId;\n    private Boolean bypassProxy;\n    private String username;\n    private String password;\n    private Integer timeout;\n    private Integer retry;\n    private String url;\n\n    @DataBoundConstructor\n    public CreateJFrogInstanceStep(String id) {\n        this.id = id;\n    }\n\n    @DataBoundSetter\n    public void setUrl(String url) {\n        this.url = url;\n    }\n\n    @DataBoundSetter\n    public void setDistributionUrl(String distributionUrl) {\n        this.distributionUrl = distributionUrl;\n    }\n\n    @DataBoundSetter\n    public void setArtifactoryUrl(String artifactoryUrl) {\n        this.artifactoryUrl = artifactoryUrl;\n    }\n\n    @DataBoundSetter\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    @DataBoundSetter\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @DataBoundSetter\n    public void setCredentialsId(String credentialsId) {\n        this.credentialsId = credentialsId;\n    }\n\n    @DataBoundSetter\n    public void setBypassProxy(boolean bypassProxy) {\n        this.bypassProxy = bypassProxy;\n    }\n\n    @DataBoundSetter\n    public void setTimeout(int timeout) {\n        this.timeout = timeout;\n    }\n\n    @DataBoundSetter\n    public void setRetry(int retry) {\n        this.retry = retry;\n    }\n\n    @DataBoundSetter\n    public void setDeploymentThreads(int deploymentThreads) {\n        this.deploymentThreads = deploymentThreads;\n    }\n\n    public static class Execution extends ArtifactorySynchronousStepExecution<Void> {\n        protected static final long serialVersionUID = 1L;\n        private transient final CreateJFrogInstanceStep step;\n\n        @Inject\n        public Execution(CreateJFrogInstanceStep step, StepContext context) throws IOException, InterruptedException {\n            super(context);\n            this.step = step;\n        }\n\n        @Override\n        protected Void runStep() throws Exception {\n            // Prepare Artifactory server\n            JFrogPlatformInstance server = DeclarativePipelineUtils.getJFrogPlatformInstance(build, ws, step.id, false);\n            if (server == null) {\n                server = new JFrogPlatformInstance();\n            }\n            checkInputs(server);\n            overrideServerParameters(server);\n\n            // Store Artifactory server in the BuildDataFile\n            BuildDataFile buildDataFile = new BuildDataFile(STEP_NAME, step.id);\n            buildDataFile.putPOJO(server);\n            String buildNumber = BuildUniqueIdentifierHelper.getBuildNumber(build);\n            DeclarativePipelineUtils.writeBuildDataFile(rootWs, buildNumber, buildDataFile, new JenkinsBuildInfoLog(listener));\n            return null;\n        }\n\n        @Override\n        public org.jfrog.hudson.ArtifactoryServer getUsageReportServer() throws Exception {\n            return null;\n        }\n\n        @Override\n        public String getUsageReportFeatureName() {\n            return null;\n        }\n\n        /**\n         * Validate step's inputs.\n         *\n         * @param server - The server to check\n         * @throws IOException if there is an illegal step configuration.\n         */\n        private void checkInputs(JFrogPlatformInstance server) throws IOException {\n            if (isAllBlank(server.getUrl(), server.getArtifactory().getUrl(), server.getDistribution().getUrl(),\n                    step.url, step.artifactoryUrl, step.distributionUrl)) {\n                throw new IOException(\"Server URL is missing\");\n            }\n            if (isNotBlank(step.credentialsId)) {\n                if (isNotBlank(step.username)) {\n                    throw new IOException(\"'rtServer' step can't include both credentialsId and username\");\n                }\n                if (isNotBlank(step.password)) {\n                    throw new IOException(\"'rtServer' step can't include both credentialsId and password\");\n                }\n            }\n        }\n\n        /**\n         * Override JFrog instance pipeline server parameter with parameters configured in this step.\n         *\n         * @param server - The server to update\n         */\n        private void overrideServerParameters(JFrogPlatformInstance server) {\n            if (isNotBlank(step.url)) {\n                server.setUrl(step.url);\n                String urlWithoutSlash = StringUtils.removeEnd(step.url, \"/\");\n                server.getArtifactory().setPlatformUrl(urlWithoutSlash);\n                server.getArtifactory().setUrl(urlWithoutSlash + \"/\" + \"artifactory\");\n                server.getDistribution().setUrl(urlWithoutSlash + \"/\" + \"distribution\");\n            }\n            if (isNotBlank(step.artifactoryUrl)) {\n                server.getArtifactory().setUrl(step.artifactoryUrl);\n            }\n            if (isNotBlank(step.distributionUrl)) {\n                server.getDistribution().setUrl(step.distributionUrl);\n            }\n            if (isNotBlank(step.credentialsId)) {\n                server.getArtifactory().setCredentialsId(step.credentialsId);\n                server.getDistribution().setCredentialsId(step.credentialsId);\n            }\n            if (isNotBlank(step.username)) {\n                server.getArtifactory().setUsername(step.username);\n                server.getDistribution().setUsername(step.username);\n            }\n            if (isNotBlank(step.password)) {\n                server.getArtifactory().setPassword(step.password);\n                server.getDistribution().setPassword(step.password);\n            }\n\n            // The following fields does not exist in the Distribution server:\n            if (step.deploymentThreads != null) {\n                server.getArtifactory().setDeploymentThreads(step.deploymentThreads);\n            }\n            if (step.bypassProxy != null) {\n                server.getArtifactory().setBypassProxy(step.bypassProxy);\n            }\n            if (step.retry != null) {\n                server.getArtifactory().getConnection().setRetry(step.retry);\n            }\n            if (step.timeout != null) {\n                server.getArtifactory().getConnection().setTimeout(step.timeout);\n            }\n        }\n    }\n\n    @Extension\n    public static final class DescriptorImpl extends AbstractStepDescriptorImpl {\n\n        public DescriptorImpl() {\n            super(CreateJFrogInstanceStep.Execution.class);\n        }\n\n        @Override\n        public String getFunctionName() {\n            return STEP_NAME;\n        }\n\n        @Nonnull\n        @Override\n        public String getDisplayName() {\n            return \"Creates new JFrog instance\";\n        }\n\n        @Override\n        public boolean isAdvanced() {\n            return true;\n        }\n    }\n}\n",
    "project": "artifactory-plugin",
    "libraryName": "p4",
    "libraryGroupID": "org.jenkins-ci.plugins",
    "newVersion": "1.11.5",
    "previousVersion": "1.3.8",
    "breakingCommit": "b5b64613a1a650a5784ff39386b4e00e05e5c21c"
}