{
    "absolute_path_to_file_in_container": "/lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java",
    "errors": [
        {
            "line_number": 7,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[7,19] package javax.ws.rs does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "62f78959-c7c8-506a-8e35-b343f1134a7b"
        },
        {
            "line_number": 8,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[8,29] package javax.ws.rs.container does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "c1afc94b-ff1b-5ff1-a775-4f410d5e33bb"
        },
        {
            "line_number": 9,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[9,29] package javax.ws.rs.container does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "c1afc94b-ff1b-5ff1-a775-4f410d5e33bb"
        },
        {
            "line_number": 10,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[10,24] package javax.ws.rs.core does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "c002e965-1c73-58fa-b9df-60cc1d2c6ff0"
        },
        {
            "line_number": 11,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[11,24] package javax.ws.rs.core does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "c002e965-1c73-58fa-b9df-60cc1d2c6ff0"
        },
        {
            "line_number": 12,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[12,23] package javax.ws.rs.ext does not exist",
            "additional_info": "",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "98c9a5a7-bebb-5281-bbea-18bc25e489f1"
        },
        {
            "line_number": 14,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[14,2] cannot find symbol",
            "additional_info": "  symbol: class Provider",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "63fa29a3-0758-55cc-93d5-f8c184f86cce"
        },
        {
            "line_number": 15,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[15,46] cannot find symbol",
            "additional_info": "  symbol: class ContainerRequestFilter",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "9e4acd15-d844-5621-bafa-9bcc3f995b3f"
        },
        {
            "line_number": 17,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[17,24] cannot find symbol",
            "additional_info": "  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.filters.AuthenticationFilter",
            "file_name": "AuthenticationFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "65ed4364-8319-598e-8112-14a224ac126e"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage com.wire.lithium.server.filters;\n\nimport com.wire.xenon.Const;\nimport com.wire.xenon.tools.Logger;\nimport com.wire.xenon.tools.Util;\n\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.core.HttpHeaders;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.ext.Provider;\n\n@Provider\npublic class AuthenticationFilter implements ContainerRequestFilter {\n    @Override\n    public void filter(ContainerRequestContext requestContext) {\n        String auth = requestContext.getHeaderString(HttpHeaders.AUTHORIZATION);\n        if (auth == null) {\n            Exception cause = new IllegalArgumentException(\"Missing Authorization\");\n            throw new WebApplicationException(cause, Response.Status.UNAUTHORIZED);\n        }\n\n        String serviceToken = System.getProperty(Const.WIRE_BOTS_SDK_TOKEN, System.getenv(\"SERVICE_TOKEN\"));\n\n        if (!Util.compareAuthorizations(auth, serviceToken)) {\n            Logger.warning(\"Wrong service token\");\n            Exception cause = new IllegalArgumentException(\"Wrong service token\");\n            throw new WebApplicationException(cause, Response.Status.UNAUTHORIZED);\n        }\n\n        requestContext.setProperty(\"wire-auth\", Util.extractToken(auth));\n    }\n}\n'''\nThe error is caused by a change in the API of the dependency: dropwizard-core 2.1.5->4.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- io.dropwizard.Application\n-- io.dropwizard.setup.Environment\n-- io.dropwizard.setup.Bootstrap\n-- io.dropwizard.Configuration\n++ public Configuration io.dropwizard.core.Configuration()\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String,com.fasterxml.jackson.databind.ObjectMapper,jakarta.validation.ValidatorFactory,com.codahale.metrics.MetricRegistry,java.lang.ClassLoader,com.codahale.metrics.health.HealthCheckRegistry,io.dropwizard.core.Configuration)\n++ protected Application io.dropwizard.core.Application()\n++ public Bootstrap io.dropwizard.core.setup.Bootstrap(io.dropwizard.core.Application)\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String)\n\nThe error is triggered in the following specific lines in the previous code:\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.core.HttpHeaders;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.ext.Provider;\n@Provider\npublic class AuthenticationFilter implements ContainerRequestFilter {\n    public void filter(ContainerRequestContext requestContext) {\nwith the following error message:\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[7,19] package javax.ws.rs does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[8,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[9,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[10,24] package javax.ws.rs.core does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[11,24] package javax.ws.rs.core does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[12,23] package javax.ws.rs.ext does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[14,2] cannot find symbol  symbol: class Provider\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[15,46] cannot find symbol  symbol: class ContainerRequestFilter\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[17,24] cannot find symbol  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.filters.AuthenticationFilter\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.core.HttpHeaders;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.ext.Provider;\n@Provider\npublic class AuthenticationFilter implements ContainerRequestFilter {\n    public void filter(ContainerRequestContext requestContext) {",
    "error_message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[7,19] package javax.ws.rs does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[8,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[9,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[10,24] package javax.ws.rs.core does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[11,24] package javax.ws.rs.core does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[12,23] package javax.ws.rs.ext does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[14,2] cannot find symbol  symbol: class Provider\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[15,46] cannot find symbol  symbol: class ContainerRequestFilter\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/filters/AuthenticationFilter.java:[17,24] cannot find symbol  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.filters.AuthenticationFilter",
    "api_diff": "-- io.dropwizard.Application\n-- io.dropwizard.setup.Environment\n-- io.dropwizard.setup.Bootstrap\n-- io.dropwizard.Configuration\n++ public Configuration io.dropwizard.core.Configuration()\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String,com.fasterxml.jackson.databind.ObjectMapper,jakarta.validation.ValidatorFactory,com.codahale.metrics.MetricRegistry,java.lang.ClassLoader,com.codahale.metrics.health.HealthCheckRegistry,io.dropwizard.core.Configuration)\n++ protected Application io.dropwizard.core.Application()\n++ public Bootstrap io.dropwizard.core.setup.Bootstrap(io.dropwizard.core.Application)\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String)",
    "original_code": "package com.wire.lithium.server.filters;\n\nimport com.wire.xenon.Const;\nimport com.wire.xenon.tools.Logger;\nimport com.wire.xenon.tools.Util;\n\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.core.HttpHeaders;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.ext.Provider;\n\n@Provider\npublic class AuthenticationFilter implements ContainerRequestFilter {\n    @Override\n    public void filter(ContainerRequestContext requestContext) {\n        String auth = requestContext.getHeaderString(HttpHeaders.AUTHORIZATION);\n        if (auth == null) {\n            Exception cause = new IllegalArgumentException(\"Missing Authorization\");\n            throw new WebApplicationException(cause, Response.Status.UNAUTHORIZED);\n        }\n\n        String serviceToken = System.getProperty(Const.WIRE_BOTS_SDK_TOKEN, System.getenv(\"SERVICE_TOKEN\"));\n\n        if (!Util.compareAuthorizations(auth, serviceToken)) {\n            Logger.warning(\"Wrong service token\");\n            Exception cause = new IllegalArgumentException(\"Wrong service token\");\n            throw new WebApplicationException(cause, Response.Status.UNAUTHORIZED);\n        }\n\n        requestContext.setProperty(\"wire-auth\", Util.extractToken(auth));\n    }\n}",
    "project": "lithium",
    "libraryName": "dropwizard-core",
    "libraryGroupID": "io.dropwizard",
    "newVersion": "4.0.0",
    "previousVersion": "2.1.5",
    "breakingCommit": "686ea4e18114ac180e35ca1c07e1f2e6dfbffbe0"
}