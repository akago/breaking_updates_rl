{
    "absolute_path_to_file_in_container": "/java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java",
    "errors": [
        {
            "line_number": 20,
            "message": "[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[20,35] cannot find symbol",
            "additional_info": "  symbol:   class PublishMetadata\n  location: package com.google.cloud.pubsublite",
            "file_name": "PublisherFactoryImpl.java",
            "BCs": [
                {
                    "element": "com.google.cloud.pubsublite.PublishMetadata",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                },
                {
                    "element": "com.google.cloud.pubsublite.TopicPath.location",
                    "nature": "MUTATION",
                    "kind": "METHOD_RETURN_TYPE_CHANGED"
                },
                {
                    "element": "com.google.cloud.pubsublite.internal.Publisher",
                    "nature": "ADDITION",
                    "kind": "METHOD_ADDED_TO_INTERFACE"
                }
            ],
            "Additions": [],
            "uid": "74537aaa-9ccc-5bb3-b1d8-34504f4d5370"
        },
        {
            "line_number": 36,
            "message": "[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[36,20] cannot find symbol",
            "additional_info": "  symbol:   class PublishMetadata\n  location: class com.google.pubsublite.kafka.sink.PublisherFactoryImpl",
            "file_name": "PublisherFactoryImpl.java",
            "BCs": [
                {
                    "element": "com.google.cloud.pubsublite.PublishMetadata",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                },
                {
                    "element": "com.google.cloud.pubsublite.TopicPath.location",
                    "nature": "MUTATION",
                    "kind": "METHOD_RETURN_TYPE_CHANGED"
                },
                {
                    "element": "com.google.cloud.pubsublite.internal.Publisher",
                    "nature": "ADDITION",
                    "kind": "METHOD_ADDED_TO_INTERFACE"
                }
            ],
            "Additions": [],
            "uid": "b017a250-a16e-5b5b-9d1c-54e90b2fb748"
        },
        {
            "line_number": 53,
            "message": "[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[53,17] cannot find symbol",
            "additional_info": "  symbol:   method setContext(com.google.cloud.pubsublite.internal.wire.PubsubContext)\n  location: class com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder.Builder",
            "file_name": "PublisherFactoryImpl.java",
            "BCs": [
                {
                    "element": "com.google.cloud.pubsublite.TopicPath.location",
                    "nature": "MUTATION",
                    "kind": "METHOD_RETURN_TYPE_CHANGED"
                },
                {
                    "element": "com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder$Builder.setContext",
                    "nature": "DELETION",
                    "kind": "METHOD_REMOVED"
                },
                {
                    "element": "com.google.cloud.pubsublite.internal.Publisher",
                    "nature": "ADDITION",
                    "kind": "METHOD_ADDED_TO_INTERFACE"
                }
            ],
            "Additions": [],
            "uid": "a67c7eb4-fed3-5f36-8b90-9559379b87e1"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.google.pubsublite.kafka.sink;\n\nimport com.google.cloud.pubsublite.CloudZone;\nimport com.google.cloud.pubsublite.ProjectPath;\nimport com.google.cloud.pubsublite.PublishMetadata;\nimport com.google.cloud.pubsublite.TopicName;\nimport com.google.cloud.pubsublite.TopicPath;\nimport com.google.cloud.pubsublite.internal.Publisher;\nimport com.google.cloud.pubsublite.internal.wire.PubsubContext;\nimport com.google.cloud.pubsublite.internal.wire.PubsubContext.Framework;\nimport com.google.cloud.pubsublite.internal.wire.RoutingPublisherBuilder;\nimport com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder;\nimport java.util.Map;\nimport org.apache.kafka.common.config.ConfigValue;\n\nclass PublisherFactoryImpl implements PublisherFactory {\n\n  private static final Framework FRAMEWORK = Framework.of(\"KAFKA_CONNECT\");\n\n  @Override\n  public Publisher<PublishMetadata> newPublisher(Map<String, String> params) {\n    Map<String, ConfigValue> config = ConfigDefs.config().validateAll(params);\n    RoutingPublisherBuilder.Builder builder = RoutingPublisherBuilder.newBuilder();\n    TopicPath topic =\n        TopicPath.newBuilder()\n            .setProject(\n                ProjectPath.parse(\"projects/\" + config.get(ConfigDefs.PROJECT_FLAG).value())\n                    .project())\n            .setLocation(CloudZone.parse(config.get(ConfigDefs.LOCATION_FLAG).value().toString()))\n            .setName(TopicName.of(config.get(ConfigDefs.TOPIC_NAME_FLAG).value().toString()))\n            .build();\n    builder.setTopic(topic);\n    builder.setPublisherFactory(\n        partition ->\n            SinglePartitionPublisherBuilder.newBuilder()\n                .setTopic(topic)\n                .setPartition(partition)\n                .setContext(PubsubContext.of(FRAMEWORK))\n                .build());\n    return builder.build();\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: google-cloud-pubsublite 0.6.0->0.18.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.cloud.pubsublite.PublishMetadata\n~~ METHOD_RETURN_TYPE_CHANGED <- com.google.cloud.pubsublite.TopicPath.location\n++ METHOD_ADDED_TO_INTERFACE <- com.google.cloud.pubsublite.internal.Publisher\n-- com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder$Builder.setContext\n\nThe error is triggered in the following specific lines in the previous code:\nimport com.google.cloud.pubsublite.PublishMetadata;\n  public Publisher<PublishMetadata> newPublisher(Map<String, String> params) {\n                .setContext(PubsubContext.of(FRAMEWORK))\nwith the following error message:\n[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[20,35] cannot find symbol  symbol:   class PublishMetadata\n  location: package com.google.cloud.pubsublite\n[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[36,20] cannot find symbol  symbol:   class PublishMetadata\n  location: class com.google.pubsublite.kafka.sink.PublisherFactoryImpl\n[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[53,17] cannot find symbol  symbol:   method setContext(com.google.cloud.pubsublite.internal.wire.PubsubContext)\n  location: class com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder.Builder\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import com.google.cloud.pubsublite.PublishMetadata;\n  public Publisher<PublishMetadata> newPublisher(Map<String, String> params) {\n                .setContext(PubsubContext.of(FRAMEWORK))",
    "error_message": "[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[20,35] cannot find symbol  symbol:   class PublishMetadata\n  location: package com.google.cloud.pubsublite\n[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[36,20] cannot find symbol  symbol:   class PublishMetadata\n  location: class com.google.pubsublite.kafka.sink.PublisherFactoryImpl\n[ERROR] /java-pubsub-group-kafka-connector/src/main/java/com/google/pubsublite/kafka/sink/PublisherFactoryImpl.java:[53,17] cannot find symbol  symbol:   method setContext(com.google.cloud.pubsublite.internal.wire.PubsubContext)\n  location: class com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder.Builder",
    "api_diff": "-- com.google.cloud.pubsublite.PublishMetadata\n~~ METHOD_RETURN_TYPE_CHANGED <- com.google.cloud.pubsublite.TopicPath.location\n++ METHOD_ADDED_TO_INTERFACE <- com.google.cloud.pubsublite.internal.Publisher\n-- com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder$Builder.setContext",
    "original_code": "/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.google.pubsublite.kafka.sink;\n\nimport com.google.cloud.pubsublite.CloudZone;\nimport com.google.cloud.pubsublite.ProjectPath;\nimport com.google.cloud.pubsublite.PublishMetadata;\nimport com.google.cloud.pubsublite.TopicName;\nimport com.google.cloud.pubsublite.TopicPath;\nimport com.google.cloud.pubsublite.internal.Publisher;\nimport com.google.cloud.pubsublite.internal.wire.PubsubContext;\nimport com.google.cloud.pubsublite.internal.wire.PubsubContext.Framework;\nimport com.google.cloud.pubsublite.internal.wire.RoutingPublisherBuilder;\nimport com.google.cloud.pubsublite.internal.wire.SinglePartitionPublisherBuilder;\nimport java.util.Map;\nimport org.apache.kafka.common.config.ConfigValue;\n\nclass PublisherFactoryImpl implements PublisherFactory {\n\n  private static final Framework FRAMEWORK = Framework.of(\"KAFKA_CONNECT\");\n\n  @Override\n  public Publisher<PublishMetadata> newPublisher(Map<String, String> params) {\n    Map<String, ConfigValue> config = ConfigDefs.config().validateAll(params);\n    RoutingPublisherBuilder.Builder builder = RoutingPublisherBuilder.newBuilder();\n    TopicPath topic =\n        TopicPath.newBuilder()\n            .setProject(\n                ProjectPath.parse(\"projects/\" + config.get(ConfigDefs.PROJECT_FLAG).value())\n                    .project())\n            .setLocation(CloudZone.parse(config.get(ConfigDefs.LOCATION_FLAG).value().toString()))\n            .setName(TopicName.of(config.get(ConfigDefs.TOPIC_NAME_FLAG).value().toString()))\n            .build();\n    builder.setTopic(topic);\n    builder.setPublisherFactory(\n        partition ->\n            SinglePartitionPublisherBuilder.newBuilder()\n                .setTopic(topic)\n                .setPartition(partition)\n                .setContext(PubsubContext.of(FRAMEWORK))\n                .build());\n    return builder.build();\n  }\n}\n",
    "project": "java-pubsub-group-kafka-connector",
    "libraryName": "google-cloud-pubsublite",
    "libraryGroupID": "com.google.cloud",
    "newVersion": "0.18.0",
    "previousVersion": "0.6.0",
    "breakingCommit": "d54b56b91c11f21b97d4903143b04b7c1f10c255"
}