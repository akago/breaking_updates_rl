{
    "absolute_path_to_file_in_container": "/pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java",
    "errors": [
        {
            "line_number": 21,
            "message": "[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[21,36] package org.codehaus.plexus.util.xml does not exist",
            "additional_info": "",
            "file_name": "MavenCompilerUtils.java",
            "BCs": [],
            "Additions": [],
            "uid": "bb13f79b-4544-5203-8819-dd4420c6a5db"
        },
        {
            "line_number": 99,
            "message": "[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[99,45] cannot find symbol",
            "additional_info": "  symbol:   class Xpp3Dom\n  location: class org.simplify4u.plugins.utils.MavenCompilerUtils",
            "file_name": "MavenCompilerUtils.java",
            "BCs": [
                {
                    "element": "org.codehaus.plexus.util.xml.Xpp3Dom",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "ab1d48d9-40b5-5ebd-b612-b696a453b6b9"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2019 Danny van Heumen\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.simplify4u.plugins.utils;\n\nimport org.apache.maven.artifact.Artifact;\nimport org.apache.maven.model.Plugin;\nimport org.apache.maven.repository.RepositorySystem;\nimport org.codehaus.plexus.util.xml.Xpp3Dom;\n\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\nimport static java.util.Arrays.stream;\nimport static java.util.Collections.emptySet;\nimport static java.util.Objects.requireNonNull;\n\n/**\n * Utilities specific for org.apache.maven.plugins:maven-compiler-plugin.\n */\npublic final class MavenCompilerUtils {\n\n    private static final String GROUPID = \"org.apache.maven.plugins\";\n    private static final String ARTIFACTID = \"maven-compiler-plugin\";\n\n    private static final String PACKAGING = \"jar\";\n\n    private MavenCompilerUtils() {\n        // No need to instantiate utility class.\n    }\n\n    /**\n     * Check if provided plugin is org.apache.maven.plugins:maven-compiler-plugin.\n     *\n     * @param plugin any plugin instance\n     * @return Returns true iff plugin is maven-compiler-plugin.\n     */\n    public static boolean checkCompilerPlugin(Plugin plugin) {\n        return GROUPID.equals(plugin.getGroupId()) && ARTIFACTID.equals(plugin.getArtifactId());\n    }\n\n    /**\n     * Extract annotation processors for maven-compiler-plugin configuration.\n     *\n     * @param system maven repository system\n     * @param plugin maven-compiler-plugin plugin\n     * @return Returns set of maven artifacts configured as annotation processors.\n     */\n    public static Set<Artifact> extractAnnotationProcessors(RepositorySystem system, Plugin plugin) {\n        requireNonNull(system);\n        if (!checkCompilerPlugin(plugin)) {\n            throw new IllegalArgumentException(\"Plugin is not '\" + GROUPID + \":\" + ARTIFACTID + \"'.\");\n        }\n        final Object config = plugin.getConfiguration();\n        if (config == null) {\n            return emptySet();\n        }\n        if (config instanceof Xpp3Dom) {\n            return stream(((Xpp3Dom) config).getChildren(\"annotationProcessorPaths\"))\n                    .flatMap(aggregate -> stream(aggregate.getChildren(\"path\")))\n                    .map(processor -> system.createArtifact(\n                            extractChildValue(processor, \"groupId\"),\n                            extractChildValue(processor, \"artifactId\"),\n                            extractChildValue(processor, \"version\"),\n                            PACKAGING))\n                    // A path specification is automatically ignored in maven-compiler-plugin if version is absent,\n                    // therefore there is little use in logging incomplete paths that are filtered out.\n                    .filter(a -> !a.getGroupId().isEmpty())\n                    .filter(a -> !a.getArtifactId().isEmpty())\n                    .filter(a -> !a.getVersion().isEmpty())\n                    .collect(Collectors.toSet());\n        }\n        // It is expected that this will never occur due to all Configuration instances of all plugins being provided as\n        // XML document. If this happens to occur on very old plugin versions, we can safely add the type support and\n        // simply return an empty set.\n        throw new UnsupportedOperationException(\"Please report that an unsupported type of configuration container\" +\n                \" was encountered: \" + config.getClass());\n    }\n\n    /**\n     * Extract child value if child is present, or return empty string if absent.\n     *\n     * @param node the parent node\n     * @param name the child node name\n     * @return Returns child value if child node present or otherwise empty string.\n     */\n    private static String extractChildValue(Xpp3Dom node, String name) {\n        final Xpp3Dom child = node.getChild(name);\n        return child == null ? \"\" : child.getValue();\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: plexus-utils 3.5.1->4.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.codehaus.plexus.util.xml.Xpp3Dom\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.codehaus.plexus.util.xml.Xpp3Dom;\n    private static String extractChildValue(Xpp3Dom node, String name) {\nwith the following error message:\n[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[21,36] package org.codehaus.plexus.util.xml does not exist\n[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[99,45] cannot find symbol  symbol:   class Xpp3Dom\n  location: class org.simplify4u.plugins.utils.MavenCompilerUtils\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.codehaus.plexus.util.xml.Xpp3Dom;\n    private static String extractChildValue(Xpp3Dom node, String name) {",
    "error_message": "[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[21,36] package org.codehaus.plexus.util.xml does not exist\n[ERROR] /pgpverify-maven-plugin/src/main/java/org/simplify4u/plugins/utils/MavenCompilerUtils.java:[99,45] cannot find symbol  symbol:   class Xpp3Dom\n  location: class org.simplify4u.plugins.utils.MavenCompilerUtils",
    "api_diff": "-- org.codehaus.plexus.util.xml.Xpp3Dom",
    "original_code": "/*\n * Copyright 2019 Danny van Heumen\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.simplify4u.plugins.utils;\n\nimport org.apache.maven.artifact.Artifact;\nimport org.apache.maven.model.Plugin;\nimport org.apache.maven.repository.RepositorySystem;\nimport org.codehaus.plexus.util.xml.Xpp3Dom;\n\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\nimport static java.util.Arrays.stream;\nimport static java.util.Collections.emptySet;\nimport static java.util.Objects.requireNonNull;\n\n/**\n * Utilities specific for org.apache.maven.plugins:maven-compiler-plugin.\n */\npublic final class MavenCompilerUtils {\n\n    private static final String GROUPID = \"org.apache.maven.plugins\";\n    private static final String ARTIFACTID = \"maven-compiler-plugin\";\n\n    private static final String PACKAGING = \"jar\";\n\n    private MavenCompilerUtils() {\n        // No need to instantiate utility class.\n    }\n\n    /**\n     * Check if provided plugin is org.apache.maven.plugins:maven-compiler-plugin.\n     *\n     * @param plugin any plugin instance\n     * @return Returns true iff plugin is maven-compiler-plugin.\n     */\n    public static boolean checkCompilerPlugin(Plugin plugin) {\n        return GROUPID.equals(plugin.getGroupId()) && ARTIFACTID.equals(plugin.getArtifactId());\n    }\n\n    /**\n     * Extract annotation processors for maven-compiler-plugin configuration.\n     *\n     * @param system maven repository system\n     * @param plugin maven-compiler-plugin plugin\n     * @return Returns set of maven artifacts configured as annotation processors.\n     */\n    public static Set<Artifact> extractAnnotationProcessors(RepositorySystem system, Plugin plugin) {\n        requireNonNull(system);\n        if (!checkCompilerPlugin(plugin)) {\n            throw new IllegalArgumentException(\"Plugin is not '\" + GROUPID + \":\" + ARTIFACTID + \"'.\");\n        }\n        final Object config = plugin.getConfiguration();\n        if (config == null) {\n            return emptySet();\n        }\n        if (config instanceof Xpp3Dom) {\n            return stream(((Xpp3Dom) config).getChildren(\"annotationProcessorPaths\"))\n                    .flatMap(aggregate -> stream(aggregate.getChildren(\"path\")))\n                    .map(processor -> system.createArtifact(\n                            extractChildValue(processor, \"groupId\"),\n                            extractChildValue(processor, \"artifactId\"),\n                            extractChildValue(processor, \"version\"),\n                            PACKAGING))\n                    // A path specification is automatically ignored in maven-compiler-plugin if version is absent,\n                    // therefore there is little use in logging incomplete paths that are filtered out.\n                    .filter(a -> !a.getGroupId().isEmpty())\n                    .filter(a -> !a.getArtifactId().isEmpty())\n                    .filter(a -> !a.getVersion().isEmpty())\n                    .collect(Collectors.toSet());\n        }\n        // It is expected that this will never occur due to all Configuration instances of all plugins being provided as\n        // XML document. If this happens to occur on very old plugin versions, we can safely add the type support and\n        // simply return an empty set.\n        throw new UnsupportedOperationException(\"Please report that an unsupported type of configuration container\" +\n                \" was encountered: \" + config.getClass());\n    }\n\n    /**\n     * Extract child value if child is present, or return empty string if absent.\n     *\n     * @param node the parent node\n     * @param name the child node name\n     * @return Returns child value if child node present or otherwise empty string.\n     */\n    private static String extractChildValue(Xpp3Dom node, String name) {\n        final Xpp3Dom child = node.getChild(name);\n        return child == null ? \"\" : child.getValue();\n    }\n}\n",
    "project": "pgpverify-maven-plugin",
    "libraryName": "plexus-utils",
    "libraryGroupID": "org.codehaus.plexus",
    "newVersion": "4.0.0",
    "previousVersion": "3.5.1",
    "breakingCommit": "cd5bb39f43e4570b875027073da3d4e43349ead1"
}