{
    "absolute_path_to_file_in_container": "/depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java",
    "errors": [
        {
            "line_number": 56,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[56,19] cannot find symbol",
            "additional_info": "  symbol:   method getOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "613b9549-dc89-5bdf-972a-6cac56f35838"
        },
        {
            "line_number": 60,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[60,21] cannot find symbol",
            "additional_info": "  symbol:   method getTestOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "39585514-f158-5df1-bada-2dfbf4ce5c0a"
        },
        {
            "line_number": 65,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[65,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "6d7cc42e-0a31-5908-938d-3489a6cd06fc"
        },
        {
            "line_number": 68,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[68,81] cannot find symbol",
            "additional_info": "  symbol:   method getDependenciesFolder()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "9456d7cd-7ddb-592c-bc12-7444526c2b69"
        },
        {
            "line_number": 70,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[70,53] cannot find symbol",
            "additional_info": "  symbol:   method getExtraClasses()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "67c853f4-5196-5c2f-884a-29a839cabe29"
        },
        {
            "line_number": 88,
            "message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[88,5] cannot find symbol",
            "additional_info": "  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer",
            "file_name": "DefaultProjectDependencyAnalyzer.java",
            "BCs": [],
            "Additions": [],
            "uid": "6d7cc42e-0a31-5908-938d-3489a6cd06fc"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright (c) 2020, CASTOR Software Research Centre (www.castor.kth.se)\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT\n * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage se.kth.depclean.core.analysis;\n\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport lombok.SneakyThrows;\nimport lombok.extern.slf4j.Slf4j;\nimport se.kth.depclean.core.analysis.asm.ASMDependencyAnalyzer;\nimport se.kth.depclean.core.analysis.graph.DefaultCallGraph;\nimport se.kth.depclean.core.analysis.model.ProjectDependencyAnalysis;\nimport se.kth.depclean.core.model.ClassName;\nimport se.kth.depclean.core.model.ProjectContext;\n\n/**\n * This is principal class that perform the dependency analysis in a Maven project.\n */\n@Slf4j\npublic class DefaultProjectDependencyAnalyzer {\n\n  private final DependencyAnalyzer dependencyAnalyzer = new ASMDependencyAnalyzer();\n\n  /**\n   * Analyze the dependencies in a project.\n   *\n   * @param projectContext The project's context\n   *\n   * @return An object representing the analysis result.\n   */\n  public ProjectDependencyAnalysis analyze(final ProjectContext projectContext) {\n\n    // a map of [dependency] -> [classes]\n    final ActualUsedClasses actualUsedClasses = new ActualUsedClasses(projectContext);\n\n    /* ******************** bytecode analysis ********************* */\n\n    // analyze project's class files\n    projectContext.getOutputFolders()\n        .forEach(folder -> actualUsedClasses.registerClasses(getProjectDependencyClasses(folder)));\n    // analyze project's tests class files\n    if (!projectContext.ignoreTests()) {\n      projectContext.getTestOutputFolders()\n          .forEach(folder -> actualUsedClasses.registerClasses(getProjectTestDependencyClasses(folder)));\n    }\n    // the set of compiled classes and tests in the project\n    Set<String> projectClasses = new HashSet<>(DefaultCallGraph.getProjectVertices());\n    log.debug(\"Project classes: {}\", projectClasses);\n\n    // analyze dependencies' class files\n    actualUsedClasses.registerClasses(getProjectDependencyClasses(projectContext.getDependenciesFolder()));\n    // analyze extra classes (collected through static analysis of source code)\n    actualUsedClasses.registerClasses(projectContext.getExtraClasses());\n\n    /* ******************** usage analysis ********************* */\n    actualUsedClasses.registerClasses(getReferencedClassMembers(projectClasses));\n\n    /* ******************** results as statically used at the bytecode *********************** */\n    return new ProjectDependencyAnalysisBuilder(projectContext, actualUsedClasses).analyse();\n  }\n\n  @SneakyThrows\n  private Iterable<ClassName> getProjectDependencyClasses(Path outputFolder) {\n    // Analyze src classes in the project\n    return collectDependencyClasses(outputFolder);\n  }\n\n  @SneakyThrows\n  private Iterable<ClassName> getProjectTestDependencyClasses(Path testOutputFolder) {\n    // Analyze test classes in the project\n    log.trace(\"# getProjectTestDependencyClasses()\");\n    return collectDependencyClasses(testOutputFolder);\n  }\n\n  private Iterable<ClassName> collectDependencyClasses(Path path) throws IOException {\n    return dependencyAnalyzer\n        .analyze(path.toUri().toURL())\n        .stream()\n        .map(ClassName::new)\n        .collect(Collectors.toSet());\n  }\n\n  private Iterable<ClassName> getReferencedClassMembers(Set<String> projectClasses) {\n    return DefaultCallGraph\n        .referencedClassMembers(projectClasses)\n        .stream()\n        .map(ClassName::new)\n        .collect(Collectors.toSet());\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: guava 31.1-jre->32.0.0-android. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet\n\nThe error is triggered in the following specific lines in the previous code:\n    projectContext.getOutputFolders()\n      projectContext.getTestOutputFolders()\n    log.debug(\"Project classes: {}\", projectClasses);\n    actualUsedClasses.registerClasses(getProjectDependencyClasses(projectContext.getDependenciesFolder()));\n    actualUsedClasses.registerClasses(projectContext.getExtraClasses());\n    log.trace(\"# getProjectTestDependencyClasses()\");\nwith the following error message:\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[56,19] cannot find symbol  symbol:   method getOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[60,21] cannot find symbol  symbol:   method getTestOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[65,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[68,81] cannot find symbol  symbol:   method getDependenciesFolder()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[70,53] cannot find symbol  symbol:   method getExtraClasses()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[88,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "    projectContext.getOutputFolders()\n      projectContext.getTestOutputFolders()\n    log.debug(\"Project classes: {}\", projectClasses);\n    actualUsedClasses.registerClasses(getProjectDependencyClasses(projectContext.getDependenciesFolder()));\n    actualUsedClasses.registerClasses(projectContext.getExtraClasses());\n    log.trace(\"# getProjectTestDependencyClasses()\");",
    "error_message": "[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[56,19] cannot find symbol  symbol:   method getOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[60,21] cannot find symbol  symbol:   method getTestOutputFolders()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[65,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[68,81] cannot find symbol  symbol:   method getDependenciesFolder()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[70,53] cannot find symbol  symbol:   method getExtraClasses()\n  location: variable projectContext of type se.kth.depclean.core.model.ProjectContext\n[ERROR] /depclean/depclean-core/src/main/java/se/kth/depclean/core/analysis/DefaultProjectDependencyAnalyzer.java:[88,5] cannot find symbol  symbol:   variable log\n  location: class se.kth.depclean.core.analysis.DefaultProjectDependencyAnalyzer",
    "api_diff": "-- com.google.common.collect.ImmutableSet.toImmutableSet\n-- com.google.common.collect.ImmutableSortedSetFauxverideShim.toImmutableSet",
    "original_code": "/*\n * Copyright (c) 2020, CASTOR Software Research Centre (www.castor.kth.se)\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT\n * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL\n * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,\n * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage se.kth.depclean.core.analysis;\n\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport lombok.SneakyThrows;\nimport lombok.extern.slf4j.Slf4j;\nimport se.kth.depclean.core.analysis.asm.ASMDependencyAnalyzer;\nimport se.kth.depclean.core.analysis.graph.DefaultCallGraph;\nimport se.kth.depclean.core.analysis.model.ProjectDependencyAnalysis;\nimport se.kth.depclean.core.model.ClassName;\nimport se.kth.depclean.core.model.ProjectContext;\n\n/**\n * This is principal class that perform the dependency analysis in a Maven project.\n */\n@Slf4j\npublic class DefaultProjectDependencyAnalyzer {\n\n  private final DependencyAnalyzer dependencyAnalyzer = new ASMDependencyAnalyzer();\n\n  /**\n   * Analyze the dependencies in a project.\n   *\n   * @param projectContext The project's context\n   *\n   * @return An object representing the analysis result.\n   */\n  public ProjectDependencyAnalysis analyze(final ProjectContext projectContext) {\n\n    // a map of [dependency] -> [classes]\n    final ActualUsedClasses actualUsedClasses = new ActualUsedClasses(projectContext);\n\n    /* ******************** bytecode analysis ********************* */\n\n    // analyze project's class files\n    projectContext.getOutputFolders()\n        .forEach(folder -> actualUsedClasses.registerClasses(getProjectDependencyClasses(folder)));\n    // analyze project's tests class files\n    if (!projectContext.ignoreTests()) {\n      projectContext.getTestOutputFolders()\n          .forEach(folder -> actualUsedClasses.registerClasses(getProjectTestDependencyClasses(folder)));\n    }\n    // the set of compiled classes and tests in the project\n    Set<String> projectClasses = new HashSet<>(DefaultCallGraph.getProjectVertices());\n    log.debug(\"Project classes: {}\", projectClasses);\n\n    // analyze dependencies' class files\n    actualUsedClasses.registerClasses(getProjectDependencyClasses(projectContext.getDependenciesFolder()));\n    // analyze extra classes (collected through static analysis of source code)\n    actualUsedClasses.registerClasses(projectContext.getExtraClasses());\n\n    /* ******************** usage analysis ********************* */\n    actualUsedClasses.registerClasses(getReferencedClassMembers(projectClasses));\n\n    /* ******************** results as statically used at the bytecode *********************** */\n    return new ProjectDependencyAnalysisBuilder(projectContext, actualUsedClasses).analyse();\n  }\n\n  @SneakyThrows\n  private Iterable<ClassName> getProjectDependencyClasses(Path outputFolder) {\n    // Analyze src classes in the project\n    return collectDependencyClasses(outputFolder);\n  }\n\n  @SneakyThrows\n  private Iterable<ClassName> getProjectTestDependencyClasses(Path testOutputFolder) {\n    // Analyze test classes in the project\n    log.trace(\"# getProjectTestDependencyClasses()\");\n    return collectDependencyClasses(testOutputFolder);\n  }\n\n  private Iterable<ClassName> collectDependencyClasses(Path path) throws IOException {\n    return dependencyAnalyzer\n        .analyze(path.toUri().toURL())\n        .stream()\n        .map(ClassName::new)\n        .collect(Collectors.toSet());\n  }\n\n  private Iterable<ClassName> getReferencedClassMembers(Set<String> projectClasses) {\n    return DefaultCallGraph\n        .referencedClassMembers(projectClasses)\n        .stream()\n        .map(ClassName::new)\n        .collect(Collectors.toSet());\n  }\n}\n",
    "project": "depclean",
    "libraryName": "guava",
    "libraryGroupID": "com.google.guava",
    "newVersion": "32.0.0-android",
    "previousVersion": "31.1-jre",
    "breakingCommit": "b86a5f84b44a9b50aee69745886c47123f721de3"
}