{
    "absolute_path_to_file_in_container": "/google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java",
    "errors": [
        {
            "line_number": 19,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[19,58] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "PolicyMarshaller.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Policy",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()"
            ],
            "uid": "224fbbd7-7f50-5b01-abe8-cf89c1ea2cc3"
        },
        {
            "line_number": 37,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[37,74] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "PolicyMarshaller.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Policy",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()"
            ],
            "uid": "224fbbd7-7f50-5b01-abe8-cf89c1ea2cc3"
        },
        {
            "line_number": 55,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[55,77] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "PolicyMarshaller.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Policy",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()"
            ],
            "uid": "224fbbd7-7f50-5b01-abe8-cf89c1ea2cc3"
        },
        {
            "line_number": 76,
            "message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[76,63] package com.google.api.services.cloudresourcemanager.model does not exist",
            "additional_info": "",
            "file_name": "PolicyMarshaller.java",
            "BCs": [
                {
                    "element": "com.google.api.services.cloudresourcemanager.model.Policy",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [
                "++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()"
            ],
            "uid": "224fbbd7-7f50-5b01-abe8-cf89c1ea2cc3"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n * Copyright 2016 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.google.cloud.resourcemanager;\n\nimport com.google.api.services.cloudresourcemanager.model.Binding;\nimport com.google.cloud.Identity;\nimport com.google.cloud.Policy;\nimport com.google.cloud.Policy.Marshaller;\nimport com.google.cloud.Role;\nimport com.google.common.base.Function;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.common.collect.Lists;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\n/** @deprecated v3 GAPIC client of ResourceManager is now available */\n@Deprecated\nfinal class PolicyMarshaller\n    extends Marshaller<com.google.api.services.cloudresourcemanager.model.Policy> {\n\n  static final PolicyMarshaller INSTANCE = new PolicyMarshaller();\n\n  private PolicyMarshaller() {}\n\n  private static class Builder extends Policy.Builder {\n\n    private Builder(Map<Role, Set<Identity>> bindings, String etag, Integer version) {\n      setBindings(bindings);\n      setEtag(etag);\n      if (version != null) {\n        setVersion(version);\n      }\n    }\n  }\n\n  @Override\n  protected Policy fromPb(com.google.api.services.cloudresourcemanager.model.Policy policyPb) {\n    Map<Role, Set<Identity>> bindings = new HashMap<>();\n    if (policyPb.getBindings() != null) {\n      for (Binding bindingPb : policyPb.getBindings()) {\n        bindings.put(\n            Role.of(bindingPb.getRole()),\n            ImmutableSet.copyOf(\n                Lists.transform(\n                    bindingPb.getMembers(),\n                    new Function<String, Identity>() {\n                      @Override\n                      public Identity apply(String s) {\n                        return IDENTITY_VALUE_OF_FUNCTION.apply(s);\n                      }\n                    })));\n      }\n    }\n    return new Builder(bindings, policyPb.getEtag(), policyPb.getVersion()).build();\n  }\n\n  @Override\n  protected com.google.api.services.cloudresourcemanager.model.Policy toPb(Policy policy) {\n    com.google.api.services.cloudresourcemanager.model.Policy policyPb =\n        new com.google.api.services.cloudresourcemanager.model.Policy();\n    List<Binding> bindingPbList = new LinkedList<>();\n    for (Map.Entry<Role, Set<Identity>> binding : policy.getBindings().entrySet()) {\n      Binding bindingPb = new Binding();\n      bindingPb.setRole(binding.getKey().getValue());\n      bindingPb.setMembers(\n          Lists.transform(\n              new ArrayList<>(binding.getValue()),\n              new Function<Identity, String>() {\n                @Override\n                public String apply(Identity identity) {\n                  return IDENTITY_STR_VALUE_FUNCTION.apply(identity);\n                }\n              }));\n      bindingPbList.add(bindingPb);\n    }\n    policyPb.setBindings(bindingPbList);\n    policyPb.setEtag(policy.getEtag());\n    policyPb.setVersion(policy.getVersion());\n    return policyPb;\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: google-api-services-cloudresourcemanager v1-rev20220807-2.0.0->v3-rev20220807-2.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- com.google.api.services.cloudresourcemanager.model.OrgPolicy\n-- com.google.api.services.cloudresourcemanager.model.Policy\n-- com.google.api.services.cloudresourcemanager.model.RestoreDefault\n-- com.google.api.services.cloudresourcemanager.model.BooleanPolicy\n-- com.google.api.services.cloudresourcemanager.model.ListPolicy\n-- com.google.api.services.cloudresourcemanager.model.Project\n-- com.google.api.services.cloudresourcemanager.model.Constraint\n-- com.google.api.services.cloudresourcemanager.model.BooleanConstraint\n-- com.google.api.services.cloudresourcemanager.model.ListConstraint\n-- com.google.api.services.cloudresourcemanager.model.Operation\n-- com.google.api.services.cloudresourcemanager.CloudResourceManager\n-- com.google.api.services.cloudresourcemanager.model.Status\n++ public Project com.google.api.services.cloudresourcemanager.v3.model.Project()\n++ public Operation com.google.api.services.cloudresourcemanager.v3.model.Operation()\n++ public Status com.google.api.services.cloudresourcemanager.v3.model.Status()\n++ public CloudResourceManager com.google.api.services.cloudresourcemanager.v3.CloudResourceManager(com.google.api.client.http.HttpTransport,com.google.api.client.json.JsonFactory,com.google.api.client.http.HttpRequestInitializer)\n++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()\n\nThe error is triggered in the following specific lines in the previous code:\nimport com.google.api.services.cloudresourcemanager.model.Binding;\n    extends Marshaller<com.google.api.services.cloudresourcemanager.model.Policy> {\n  protected Policy fromPb(com.google.api.services.cloudresourcemanager.model.Policy policyPb) {\n  protected com.google.api.services.cloudresourcemanager.model.Policy toPb(Policy policy) {\nwith the following error message:\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[19,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[37,74] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[55,77] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[76,63] package com.google.api.services.cloudresourcemanager.model does not exist\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import com.google.api.services.cloudresourcemanager.model.Binding;\n    extends Marshaller<com.google.api.services.cloudresourcemanager.model.Policy> {\n  protected Policy fromPb(com.google.api.services.cloudresourcemanager.model.Policy policyPb) {\n  protected com.google.api.services.cloudresourcemanager.model.Policy toPb(Policy policy) {",
    "error_message": "[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[19,58] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[37,74] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[55,77] package com.google.api.services.cloudresourcemanager.model does not exist\n[ERROR] /google-cloud-java/java-resourcemanager/google-cloud-resourcemanager/src/main/java/com/google/cloud/resourcemanager/PolicyMarshaller.java:[76,63] package com.google.api.services.cloudresourcemanager.model does not exist",
    "api_diff": "-- com.google.api.services.cloudresourcemanager.model.OrgPolicy\n-- com.google.api.services.cloudresourcemanager.model.Policy\n-- com.google.api.services.cloudresourcemanager.model.RestoreDefault\n-- com.google.api.services.cloudresourcemanager.model.BooleanPolicy\n-- com.google.api.services.cloudresourcemanager.model.ListPolicy\n-- com.google.api.services.cloudresourcemanager.model.Project\n-- com.google.api.services.cloudresourcemanager.model.Constraint\n-- com.google.api.services.cloudresourcemanager.model.BooleanConstraint\n-- com.google.api.services.cloudresourcemanager.model.ListConstraint\n-- com.google.api.services.cloudresourcemanager.model.Operation\n-- com.google.api.services.cloudresourcemanager.CloudResourceManager\n-- com.google.api.services.cloudresourcemanager.model.Status\n++ public Project com.google.api.services.cloudresourcemanager.v3.model.Project()\n++ public Operation com.google.api.services.cloudresourcemanager.v3.model.Operation()\n++ public Status com.google.api.services.cloudresourcemanager.v3.model.Status()\n++ public CloudResourceManager com.google.api.services.cloudresourcemanager.v3.CloudResourceManager(com.google.api.client.http.HttpTransport,com.google.api.client.json.JsonFactory,com.google.api.client.http.HttpRequestInitializer)\n++ public Policy com.google.api.services.cloudresourcemanager.v3.model.Policy()",
    "original_code": "/*\n * Copyright 2016 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage com.google.cloud.resourcemanager;\n\nimport com.google.api.services.cloudresourcemanager.model.Binding;\nimport com.google.cloud.Identity;\nimport com.google.cloud.Policy;\nimport com.google.cloud.Policy.Marshaller;\nimport com.google.cloud.Role;\nimport com.google.common.base.Function;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.common.collect.Lists;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\n/** @deprecated v3 GAPIC client of ResourceManager is now available */\n@Deprecated\nfinal class PolicyMarshaller\n    extends Marshaller<com.google.api.services.cloudresourcemanager.model.Policy> {\n\n  static final PolicyMarshaller INSTANCE = new PolicyMarshaller();\n\n  private PolicyMarshaller() {}\n\n  private static class Builder extends Policy.Builder {\n\n    private Builder(Map<Role, Set<Identity>> bindings, String etag, Integer version) {\n      setBindings(bindings);\n      setEtag(etag);\n      if (version != null) {\n        setVersion(version);\n      }\n    }\n  }\n\n  @Override\n  protected Policy fromPb(com.google.api.services.cloudresourcemanager.model.Policy policyPb) {\n    Map<Role, Set<Identity>> bindings = new HashMap<>();\n    if (policyPb.getBindings() != null) {\n      for (Binding bindingPb : policyPb.getBindings()) {\n        bindings.put(\n            Role.of(bindingPb.getRole()),\n            ImmutableSet.copyOf(\n                Lists.transform(\n                    bindingPb.getMembers(),\n                    new Function<String, Identity>() {\n                      @Override\n                      public Identity apply(String s) {\n                        return IDENTITY_VALUE_OF_FUNCTION.apply(s);\n                      }\n                    })));\n      }\n    }\n    return new Builder(bindings, policyPb.getEtag(), policyPb.getVersion()).build();\n  }\n\n  @Override\n  protected com.google.api.services.cloudresourcemanager.model.Policy toPb(Policy policy) {\n    com.google.api.services.cloudresourcemanager.model.Policy policyPb =\n        new com.google.api.services.cloudresourcemanager.model.Policy();\n    List<Binding> bindingPbList = new LinkedList<>();\n    for (Map.Entry<Role, Set<Identity>> binding : policy.getBindings().entrySet()) {\n      Binding bindingPb = new Binding();\n      bindingPb.setRole(binding.getKey().getValue());\n      bindingPb.setMembers(\n          Lists.transform(\n              new ArrayList<>(binding.getValue()),\n              new Function<Identity, String>() {\n                @Override\n                public String apply(Identity identity) {\n                  return IDENTITY_STR_VALUE_FUNCTION.apply(identity);\n                }\n              }));\n      bindingPbList.add(bindingPb);\n    }\n    policyPb.setBindings(bindingPbList);\n    policyPb.setEtag(policy.getEtag());\n    policyPb.setVersion(policy.getVersion());\n    return policyPb;\n  }\n}\n",
    "project": "google-cloud-java",
    "libraryName": "google-api-services-cloudresourcemanager",
    "libraryGroupID": "com.google.apis",
    "newVersion": "v3-rev20220807-2.0.0",
    "previousVersion": "v1-rev20220807-2.0.0",
    "breakingCommit": "471d07e01cd0c79dc9bed5344ed46418f4c078a2"
}