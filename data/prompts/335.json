{
    "absolute_path_to_file_in_container": "/license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java",
    "errors": [
        {
            "line_number": 22,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist",
            "additional_info": "",
            "file_name": "CompleteMojoTest.java",
            "BCs": [],
            "Additions": [],
            "uid": "40f2afd9-819d-55f0-9ba1-0aee6632be12"
        },
        {
            "line_number": 136,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[136,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 156,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[156,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 165,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[165,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 185,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[185,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 194,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[194,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 215,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[215,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 237,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[237,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 246,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[246,26] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 277,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[277,30] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        },
        {
            "line_number": 289,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[289,30] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
            "file_name": "CompleteMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "5a3e0245-3f61-5c79-95b3-e933f14024bf"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport com.mycila.maven.plugin.license.header.HeaderType;\nimport com.mycila.maven.plugin.license.util.FileUtils;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.MojoFailureException;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.util.Collections;\nimport java.util.EnumSet;\nimport java.util.List;\nimport java.util.stream.Stream;\n\nimport static com.mycila.maven.plugin.license.header.HeaderType.APOSTROPHE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.ASCIIDOC_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.ASP;\nimport static com.mycila.maven.plugin.license.header.HeaderType.BATCH;\nimport static com.mycila.maven.plugin.license.header.HeaderType.BRACESSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLEDASHES_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLETILDE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DYNASCRIPT3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DYNASCRIPT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.EXCLAMATION3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.EXCLAMATION_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.FTL;\nimport static com.mycila.maven.plugin.license.header.HeaderType.FTL_ALT;\nimport static com.mycila.maven.plugin.license.header.HeaderType.HAML_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.JAVADOC_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.JAVAPKG_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.LUA;\nimport static com.mycila.maven.plugin.license.header.HeaderType.MUSTACHE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.MVEL_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PERCENT3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PERCENT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PHP;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SCALA_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SCRIPT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SEMICOLON_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SHARPSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SINGLE_LINE_DOUBLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SLASHSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.TEXT;\nimport static com.mycila.maven.plugin.license.header.HeaderType.TRIPLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.UNKNOWN;\nimport static com.mycila.maven.plugin.license.header.HeaderType.XML_PER_LINE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.XML_STYLE;\nimport static java.util.Arrays.asList;\nimport static java.util.EnumSet.complementOf;\nimport static java.util.EnumSet.copyOf;\nimport static java.util.stream.Collectors.toList;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nclass CompleteMojoTest {\n\n  private static Stream<Object[]> parameters() {\n    final List<Object[]> parameters = asList(new Object[][]{\n        {ASCIIDOC_STYLE, \"adoc\"},\n        {MVEL_STYLE, \"mv\"},\n        {APOSTROPHE_STYLE, \"vba\"},\n        {JAVADOC_STYLE, \"java\"},\n        {SCALA_STYLE, \"scala\"},\n        {JAVAPKG_STYLE, \"java\"},\n        {SCRIPT_STYLE, \"sh\"},\n        {HAML_STYLE, \"haml\"},\n        {XML_STYLE, \"xml\"},\n        {XML_PER_LINE, \"xml\"},\n        {SEMICOLON_STYLE, \"asm\"},\n        {EXCLAMATION_STYLE, \"f\"},\n        {DOUBLEDASHES_STYLE, \"e\"},\n        {SLASHSTAR_STYLE, \"java\"},\n        {BRACESSTAR_STYLE, \"pas\"},\n        {SHARPSTAR_STYLE, \"vm\"},\n        {DOUBLETILDE_STYLE, \"apt\"},\n        {DYNASCRIPT_STYLE, \"jsp\"},\n        {DYNASCRIPT3_STYLE, \"cfm\"},\n        {PERCENT_STYLE, \"tex\"},\n        {PERCENT3_STYLE, \"erl\"},\n        {EXCLAMATION3_STYLE, \"el\"},\n        {DOUBLESLASH_STYLE, \"java\"},\n        {SINGLE_LINE_DOUBLESLASH_STYLE, \"java\"},\n        {TRIPLESLASH_STYLE, \"ts\"},\n        {PHP, \"php\"},\n        {ASP, \"asp\"},\n        {LUA, \"lua\"},\n        {FTL, \"ftl\"},\n        {FTL_ALT, \"ftl\"},\n        {TEXT, \"txt\"},\n        {BATCH, \"bat\"},\n        {MUSTACHE_STYLE, \"mustache\"}\n    });\n\n    EnumSet<HeaderType> set = complementOf(copyOf(parameters.stream()\n        .map(oo -> oo[0])\n        .map(HeaderType.class::cast)\n        .collect(toList())));\n    set.remove(UNKNOWN);\n    if (!set.isEmpty()) {\n      Assertions.fail(\"Missing test cases: \" + set);\n    }\n\n    return parameters.stream();\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_add(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_add\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/expected1.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_update(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_update\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header2.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/expected2.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_remove(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_remove\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseRemoveMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n    //plugin.setLog(new DebugLog());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/file.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_check_failed(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_check_failed\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_check_success(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_check_success\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseCheckMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n  }\n\n  public static void main(String[] args) {\n    try {\n      parameters().forEach(parameter -> {\n        HeaderType headerType = (HeaderType) parameter[0];\n        String extension = (String) parameter[1];\n        final File root = new File(\"src/test/resources/complete/\" + headerType);\n\n        if (root.exists()) {\n          throw new RuntimeException(\"Root Exists\");\n        }\n\n        root.mkdirs();\n\n        try {\n          Files.write(new File(root, \"file.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n          Files.write(new File(root, \"expected1.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n          Files.write(new File(root, \"expected2.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n        } catch (IOException e) {\n          throw new RuntimeException(\"IOException\", e);\n        }\n\n        AbstractLicenseMojo plugin = new LicenseFormatMojo();\n        plugin.project = new MavenProjectStub();\n        plugin.defaultBasedir = root;\n        plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n        plugin.legacyConfigIncludes = new String[]{\"expected1.\" + extension};\n        plugin.mapping = Collections.singletonMap(extension, headerType.name());\n        try {\n          plugin.execute();\n        } catch (MojoExecutionException | MojoFailureException e) {\n          throw new RuntimeException(\"MojoExecutionException or MojoFailureException\", e);\n        }\n\n        plugin = new LicenseFormatMojo();\n        plugin.project = new MavenProjectStub();\n        plugin.defaultBasedir = root;\n        plugin.legacyConfigHeader = \"src/test/resources/complete/header2.txt\";\n        plugin.legacyConfigIncludes = new String[]{\"expected2.\" + extension};\n        plugin.mapping = Collections.singletonMap(extension, headerType.name());\n        try {\n          plugin.execute();\n        } catch (MojoExecutionException | MojoFailureException e) {\n          throw new RuntimeException(\"MojoExecutionException or MojoFailureException\", e);\n        }\n      });\n    } catch (Exception e) {\n        // Streams don't exit cleanly, just ignore\n    }\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: maven-plugin-testing-harness 4.0.0-alpha-2->4.0.0-beta-3. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n        plugin.project = new MavenProjectStub();\n        plugin.project = new MavenProjectStub();\nwith the following error message:\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[136,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[156,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[165,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[185,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[194,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[215,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[237,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[246,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[277,30] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[289,30] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n    plugin.project = new MavenProjectStub();\n        plugin.project = new MavenProjectStub();\n        plugin.project = new MavenProjectStub();",
    "error_message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[136,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[156,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[165,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[185,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[194,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[215,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[237,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[246,26] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[277,30] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/CompleteMojoTest.java:[289,30] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.CompleteMojoTest",
    "api_diff": "-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub",
    "original_code": "/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport com.mycila.maven.plugin.license.header.HeaderType;\nimport com.mycila.maven.plugin.license.util.FileUtils;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.MojoFailureException;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.util.Collections;\nimport java.util.EnumSet;\nimport java.util.List;\nimport java.util.stream.Stream;\n\nimport static com.mycila.maven.plugin.license.header.HeaderType.APOSTROPHE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.ASCIIDOC_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.ASP;\nimport static com.mycila.maven.plugin.license.header.HeaderType.BATCH;\nimport static com.mycila.maven.plugin.license.header.HeaderType.BRACESSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLEDASHES_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DOUBLETILDE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DYNASCRIPT3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.DYNASCRIPT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.EXCLAMATION3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.EXCLAMATION_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.FTL;\nimport static com.mycila.maven.plugin.license.header.HeaderType.FTL_ALT;\nimport static com.mycila.maven.plugin.license.header.HeaderType.HAML_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.JAVADOC_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.JAVAPKG_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.LUA;\nimport static com.mycila.maven.plugin.license.header.HeaderType.MUSTACHE_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.MVEL_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PERCENT3_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PERCENT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.PHP;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SCALA_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SCRIPT_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SEMICOLON_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SHARPSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SINGLE_LINE_DOUBLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.SLASHSTAR_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.TEXT;\nimport static com.mycila.maven.plugin.license.header.HeaderType.TRIPLESLASH_STYLE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.UNKNOWN;\nimport static com.mycila.maven.plugin.license.header.HeaderType.XML_PER_LINE;\nimport static com.mycila.maven.plugin.license.header.HeaderType.XML_STYLE;\nimport static java.util.Arrays.asList;\nimport static java.util.EnumSet.complementOf;\nimport static java.util.EnumSet.copyOf;\nimport static java.util.stream.Collectors.toList;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nclass CompleteMojoTest {\n\n  private static Stream<Object[]> parameters() {\n    final List<Object[]> parameters = asList(new Object[][]{\n        {ASCIIDOC_STYLE, \"adoc\"},\n        {MVEL_STYLE, \"mv\"},\n        {APOSTROPHE_STYLE, \"vba\"},\n        {JAVADOC_STYLE, \"java\"},\n        {SCALA_STYLE, \"scala\"},\n        {JAVAPKG_STYLE, \"java\"},\n        {SCRIPT_STYLE, \"sh\"},\n        {HAML_STYLE, \"haml\"},\n        {XML_STYLE, \"xml\"},\n        {XML_PER_LINE, \"xml\"},\n        {SEMICOLON_STYLE, \"asm\"},\n        {EXCLAMATION_STYLE, \"f\"},\n        {DOUBLEDASHES_STYLE, \"e\"},\n        {SLASHSTAR_STYLE, \"java\"},\n        {BRACESSTAR_STYLE, \"pas\"},\n        {SHARPSTAR_STYLE, \"vm\"},\n        {DOUBLETILDE_STYLE, \"apt\"},\n        {DYNASCRIPT_STYLE, \"jsp\"},\n        {DYNASCRIPT3_STYLE, \"cfm\"},\n        {PERCENT_STYLE, \"tex\"},\n        {PERCENT3_STYLE, \"erl\"},\n        {EXCLAMATION3_STYLE, \"el\"},\n        {DOUBLESLASH_STYLE, \"java\"},\n        {SINGLE_LINE_DOUBLESLASH_STYLE, \"java\"},\n        {TRIPLESLASH_STYLE, \"ts\"},\n        {PHP, \"php\"},\n        {ASP, \"asp\"},\n        {LUA, \"lua\"},\n        {FTL, \"ftl\"},\n        {FTL_ALT, \"ftl\"},\n        {TEXT, \"txt\"},\n        {BATCH, \"bat\"},\n        {MUSTACHE_STYLE, \"mustache\"}\n    });\n\n    EnumSet<HeaderType> set = complementOf(copyOf(parameters.stream()\n        .map(oo -> oo[0])\n        .map(HeaderType.class::cast)\n        .collect(toList())));\n    set.remove(UNKNOWN);\n    if (!set.isEmpty()) {\n      Assertions.fail(\"Missing test cases: \" + set);\n    }\n\n    return parameters.stream();\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_add(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_add\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/expected1.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_update(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_update\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header2.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/expected2.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_remove(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_remove\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseRemoveMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n    //plugin.setLog(new DebugLog());\n\n    plugin.execute();\n\n    String processed = FileUtils.read(new File(tmp, \"file.\" + extension), Charset.defaultCharset());\n    String expected = FileUtils.read(new File(\"src/test/resources/complete/\" + headerType + \"/file.\" + extension), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_check_failed(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_check_failed\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n  }\n\n  @ParameterizedTest\n  @MethodSource(\"parameters\")\n  void test_check_success(HeaderType headerType, String extension) throws Exception {\n    File tmp = new File(\"target/test/complete/\" + headerType + \"/test_check_success\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/complete/\" + headerType), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n\n    plugin = new LicenseCheckMojo();\n    plugin.project = new MavenProjectStub();\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file.\" + extension};\n    plugin.mapping = Collections.singletonMap(extension, headerType.name());\n\n    plugin.execute();\n  }\n\n  public static void main(String[] args) {\n    try {\n      parameters().forEach(parameter -> {\n        HeaderType headerType = (HeaderType) parameter[0];\n        String extension = (String) parameter[1];\n        final File root = new File(\"src/test/resources/complete/\" + headerType);\n\n        if (root.exists()) {\n          throw new RuntimeException(\"Root Exists\");\n        }\n\n        root.mkdirs();\n\n        try {\n          Files.write(new File(root, \"file.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n          Files.write(new File(root, \"expected1.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n          Files.write(new File(root, \"expected2.\" + extension).toPath(), \"### Hello world!\\n\\nI am a Markdown doc\\n\".getBytes(StandardCharsets.UTF_8));\n        } catch (IOException e) {\n          throw new RuntimeException(\"IOException\", e);\n        }\n\n        AbstractLicenseMojo plugin = new LicenseFormatMojo();\n        plugin.project = new MavenProjectStub();\n        plugin.defaultBasedir = root;\n        plugin.legacyConfigHeader = \"src/test/resources/complete/header1.txt\";\n        plugin.legacyConfigIncludes = new String[]{\"expected1.\" + extension};\n        plugin.mapping = Collections.singletonMap(extension, headerType.name());\n        try {\n          plugin.execute();\n        } catch (MojoExecutionException | MojoFailureException e) {\n          throw new RuntimeException(\"MojoExecutionException or MojoFailureException\", e);\n        }\n\n        plugin = new LicenseFormatMojo();\n        plugin.project = new MavenProjectStub();\n        plugin.defaultBasedir = root;\n        plugin.legacyConfigHeader = \"src/test/resources/complete/header2.txt\";\n        plugin.legacyConfigIncludes = new String[]{\"expected2.\" + extension};\n        plugin.mapping = Collections.singletonMap(extension, headerType.name());\n        try {\n          plugin.execute();\n        } catch (MojoExecutionException | MojoFailureException e) {\n          throw new RuntimeException(\"MojoExecutionException or MojoFailureException\", e);\n        }\n      });\n    } catch (Exception e) {\n        // Streams don't exit cleanly, just ignore\n    }\n  }\n}\n",
    "project": "license-maven-plugin",
    "libraryName": "maven-plugin-testing-harness",
    "libraryGroupID": "org.apache.maven.plugin-testing",
    "newVersion": "4.0.0-beta-3",
    "previousVersion": "4.0.0-alpha-2",
    "breakingCommit": "f3c21936175d1aada8ae02617b66d32a748953f4"
}