{
    "absolute_path_to_file_in_container": "/artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/common/executors/ReleaseBundleDistributeExecutor.java",
    "errors": [
        {
            "line_number": 51,
            "message": "[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/common/executors/ReleaseBundleDistributeExecutor.java:[51,71] cannot find symbol",
            "additional_info": "  symbol:   method isAllBlank(java.lang.String,java.lang.String)\n  location: class org.apache.commons.lang3.StringUtils",
            "file_name": "ReleaseBundleDistributeExecutor.java",
            "BCs": [],
            "Additions": [],
            "uid": "9f07cf14-b370-5229-95b0-c446367dd601"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage org.jfrog.hudson.pipeline.common.executors;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport hudson.FilePath;\nimport hudson.model.Run;\nimport hudson.model.TaskListener;\nimport hudson.remoting.VirtualChannel;\nimport jenkins.MasterToSlaveFileCallable;\nimport org.apache.commons.collections.CollectionUtils;\nimport org.apache.commons.lang3.StringUtils;\nimport org.jfrog.build.extractor.clientConfiguration.DistributionManagerBuilder;\nimport org.jfrog.build.extractor.clientConfiguration.client.distribution.DistributionManager;\nimport org.jfrog.build.extractor.clientConfiguration.client.distribution.request.DistributeReleaseBundleRequest;\nimport org.jfrog.hudson.pipeline.common.Utils;\nimport org.jfrog.hudson.pipeline.common.types.DistributionServer;\nimport org.jfrog.hudson.util.JenkinsBuildInfoLog;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.List;\n\nimport static org.jfrog.hudson.util.SerializationUtils.createMapper;\n\npublic class ReleaseBundleDistributeExecutor implements Executor {\n    private final DistributionManagerBuilder distributionManagerBuilder;\n    private final DistributeReleaseBundleRequest request;\n    private final transient FilePath ws;\n    private final String version;\n    private final boolean sync;\n    private final String name;\n\n    public ReleaseBundleDistributeExecutor(DistributionServer server, String name, String version, boolean dryRun, boolean sync,\n                                           String distRules, List<String> countryCodes, String siteName,\n                                           String cityName, TaskListener listener, Run<?, ?> build, FilePath ws) throws IOException {\n        this.distributionManagerBuilder = server.createDistributionManagerBuilder(new JenkinsBuildInfoLog(listener), build.getParent());\n        this.request = createRequest(distRules, countryCodes, siteName, cityName, dryRun);\n        this.ws = ws;\n        this.name = name;\n        this.version = version;\n        this.sync = sync;\n    }\n\n    public void execute() throws IOException, InterruptedException {\n        ws.act(new ReleaseBundleDistributeCallable(distributionManagerBuilder, request, name, version, sync));\n    }\n\n    private DistributeReleaseBundleRequest createRequest(String distRules, List<String> countryCodes,\n                                                         String siteName, String cityName, boolean dryRun) throws IOException {\n        DistributeReleaseBundleRequest request;\n        if (StringUtils.isNotBlank(distRules)) {\n            if (!CollectionUtils.isEmpty(countryCodes) || !StringUtils.isAllBlank(siteName, cityName)) {\n                throw new IOException(\"The distRules input can't be used with site, city or country codes\");\n            }\n            ObjectMapper mapper = createMapper();\n            request = mapper.readValue(distRules, DistributeReleaseBundleRequest.class);\n        } else {\n            request = new DistributeReleaseBundleRequest();\n            request.setDistributionRules(Utils.createDistributionRules(countryCodes, siteName, cityName));\n        }\n        request.setDryRun(dryRun);\n        return request;\n    }\n\n    private static class ReleaseBundleDistributeCallable extends MasterToSlaveFileCallable<Void> {\n        private final DistributionManagerBuilder distributionManagerBuilder;\n        private final DistributeReleaseBundleRequest request;\n        private final String version;\n        private final boolean sync;\n        private final String name;\n\n        public ReleaseBundleDistributeCallable(DistributionManagerBuilder distributionManagerBuilder, DistributeReleaseBundleRequest request, String name, String version, boolean sync) {\n            this.distributionManagerBuilder = distributionManagerBuilder;\n            this.request = request;\n            this.name = name;\n            this.version = version;\n            this.sync = sync;\n        }\n\n        @Override\n        public Void invoke(File file, VirtualChannel channel) throws IOException, InterruptedException {\n            try (DistributionManager distributionManager = distributionManagerBuilder.build()) {\n                distributionManager.distributeReleaseBundle(name, version, sync, request);\n            }\n            return null;\n        }\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: p4 1.3.8->1.11.5. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n++ protected ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(org.jenkinsci.plugins.p4.credentials.P4BaseCredentials,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.ItemGroup,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n\nThe error is triggered in the following specific lines in the previous code:\n            if (!CollectionUtils.isEmpty(countryCodes) || !StringUtils.isAllBlank(siteName, cityName)) {\nwith the following error message:\n[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/common/executors/ReleaseBundleDistributeExecutor.java:[51,71] cannot find symbol  symbol:   method isAllBlank(java.lang.String,java.lang.String)\n  location: class org.apache.commons.lang3.StringUtils\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "            if (!CollectionUtils.isEmpty(countryCodes) || !StringUtils.isAllBlank(siteName, cityName)) {",
    "error_message": "[ERROR] /artifactory-plugin/src/main/java/org/jfrog/hudson/pipeline/common/executors/ReleaseBundleDistributeExecutor.java:[51,71] cannot find symbol  symbol:   method isAllBlank(java.lang.String,java.lang.String)\n  location: class org.apache.commons.lang3.StringUtils",
    "api_diff": "++ protected ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.Item,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(org.jenkinsci.plugins.p4.credentials.P4BaseCredentials,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)\n++ public ClientHelper org.jenkinsci.plugins.p4.client.ClientHelper(hudson.model.ItemGroup,java.lang.String,hudson.model.TaskListener,org.jenkinsci.plugins.p4.workspace.Workspace)",
    "original_code": "package org.jfrog.hudson.pipeline.common.executors;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport hudson.FilePath;\nimport hudson.model.Run;\nimport hudson.model.TaskListener;\nimport hudson.remoting.VirtualChannel;\nimport jenkins.MasterToSlaveFileCallable;\nimport org.apache.commons.collections.CollectionUtils;\nimport org.apache.commons.lang3.StringUtils;\nimport org.jfrog.build.extractor.clientConfiguration.DistributionManagerBuilder;\nimport org.jfrog.build.extractor.clientConfiguration.client.distribution.DistributionManager;\nimport org.jfrog.build.extractor.clientConfiguration.client.distribution.request.DistributeReleaseBundleRequest;\nimport org.jfrog.hudson.pipeline.common.Utils;\nimport org.jfrog.hudson.pipeline.common.types.DistributionServer;\nimport org.jfrog.hudson.util.JenkinsBuildInfoLog;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.List;\n\nimport static org.jfrog.hudson.util.SerializationUtils.createMapper;\n\npublic class ReleaseBundleDistributeExecutor implements Executor {\n    private final DistributionManagerBuilder distributionManagerBuilder;\n    private final DistributeReleaseBundleRequest request;\n    private final transient FilePath ws;\n    private final String version;\n    private final boolean sync;\n    private final String name;\n\n    public ReleaseBundleDistributeExecutor(DistributionServer server, String name, String version, boolean dryRun, boolean sync,\n                                           String distRules, List<String> countryCodes, String siteName,\n                                           String cityName, TaskListener listener, Run<?, ?> build, FilePath ws) throws IOException {\n        this.distributionManagerBuilder = server.createDistributionManagerBuilder(new JenkinsBuildInfoLog(listener), build.getParent());\n        this.request = createRequest(distRules, countryCodes, siteName, cityName, dryRun);\n        this.ws = ws;\n        this.name = name;\n        this.version = version;\n        this.sync = sync;\n    }\n\n    public void execute() throws IOException, InterruptedException {\n        ws.act(new ReleaseBundleDistributeCallable(distributionManagerBuilder, request, name, version, sync));\n    }\n\n    private DistributeReleaseBundleRequest createRequest(String distRules, List<String> countryCodes,\n                                                         String siteName, String cityName, boolean dryRun) throws IOException {\n        DistributeReleaseBundleRequest request;\n        if (StringUtils.isNotBlank(distRules)) {\n            if (!CollectionUtils.isEmpty(countryCodes) || !StringUtils.isAllBlank(siteName, cityName)) {\n                throw new IOException(\"The distRules input can't be used with site, city or country codes\");\n            }\n            ObjectMapper mapper = createMapper();\n            request = mapper.readValue(distRules, DistributeReleaseBundleRequest.class);\n        } else {\n            request = new DistributeReleaseBundleRequest();\n            request.setDistributionRules(Utils.createDistributionRules(countryCodes, siteName, cityName));\n        }\n        request.setDryRun(dryRun);\n        return request;\n    }\n\n    private static class ReleaseBundleDistributeCallable extends MasterToSlaveFileCallable<Void> {\n        private final DistributionManagerBuilder distributionManagerBuilder;\n        private final DistributeReleaseBundleRequest request;\n        private final String version;\n        private final boolean sync;\n        private final String name;\n\n        public ReleaseBundleDistributeCallable(DistributionManagerBuilder distributionManagerBuilder, DistributeReleaseBundleRequest request, String name, String version, boolean sync) {\n            this.distributionManagerBuilder = distributionManagerBuilder;\n            this.request = request;\n            this.name = name;\n            this.version = version;\n            this.sync = sync;\n        }\n\n        @Override\n        public Void invoke(File file, VirtualChannel channel) throws IOException, InterruptedException {\n            try (DistributionManager distributionManager = distributionManagerBuilder.build()) {\n                distributionManager.distributeReleaseBundle(name, version, sync, request);\n            }\n            return null;\n        }\n    }\n}\n",
    "project": "artifactory-plugin",
    "libraryName": "p4",
    "libraryGroupID": "org.jenkins-ci.plugins",
    "newVersion": "1.11.5",
    "previousVersion": "1.3.8",
    "breakingCommit": "b5b64613a1a650a5784ff39386b4e00e05e5c21c"
}