{
    "absolute_path_to_file_in_container": "/plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java",
    "errors": [
        {
            "line_number": 27,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[27,36] cannot find symbol",
            "additional_info": "  symbol:   class ThresholdingOutputStream\n  location: package org.apache.commons.io.output",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [
                {
                    "element": "org.apache.commons.io.output.ThresholdingOutputStream",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "753194de-f08b-5af4-bdee-ec87bb425cd3"
        },
        {
            "line_number": 32,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[32,38] cannot find symbol",
            "additional_info": "  symbol: class ThresholdingOutputStream",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [
                {
                    "element": "org.apache.commons.io.output.ThresholdingOutputStream",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "6c2a1dbe-501f-5d1b-8fb2-c34e1cbd8569"
        },
        {
            "line_number": 129,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[129,5] method does not override or implement a method from a supertype",
            "additional_info": "",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [],
            "Additions": [],
            "uid": "d0ceeca0-9daa-5aa7-b5ef-2f5e3a0dcc9c"
        },
        {
            "line_number": 143,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[143,5] method does not override or implement a method from a supertype",
            "additional_info": "",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [],
            "Additions": [],
            "uid": "d0ceeca0-9daa-5aa7-b5ef-2f5e3a0dcc9c"
        },
        {
            "line_number": 207,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[207,5] method does not override or implement a method from a supertype",
            "additional_info": "",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [],
            "Additions": [],
            "uid": "d0ceeca0-9daa-5aa7-b5ef-2f5e3a0dcc9c"
        },
        {
            "line_number": 210,
            "message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[210,9] cannot find symbol",
            "additional_info": "  symbol:   variable super\n  location: class org.codehaus.plexus.archiver.zip.OffloadingOutputStream",
            "file_name": "OffloadingOutputStream.java",
            "BCs": [],
            "Additions": [],
            "uid": "4e02fe71-a95e-57d3-bf11-130b2e63f28a"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/*\n *  Licensed to the Apache Software Foundation (ASF) under one or more\n *  contributor license agreements.  See the NOTICE file distributed with\n *  this work for additional information regarding copyright ownership.\n *  The ASF licenses this file to You under the Apache License, Version 2.0\n *  (the \"License\"); you may not use this file except in compliance with\n *  the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\npackage org.codehaus.plexus.archiver.zip;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.io.SequenceInputStream;\nimport java.nio.file.Files;\n\nimport org.apache.commons.io.output.ThresholdingOutputStream;\n\n/**\n * Offloads to disk when a given memory consumption has been reacehd\n */\nclass OffloadingOutputStream extends ThresholdingOutputStream\n{\n\n    // ----------------------------------------------------------- Data members\n\n    /**\n     * The output stream to which data will be written prior to the theshold\n     * being reached.\n     */\n    private ByteArrayOutputStream memoryOutputStream;\n\n    /**\n     * The output stream to which data will be written at any given time. This\n     * will always be one of <code>memoryOutputStream</code> or\n     * <code>diskOutputStream</code>.\n     */\n    private OutputStream currentOutputStream;\n\n    /**\n     * The file to which output will be directed if the threshold is exceeded.\n     */\n    private File outputFile = null;\n\n    /**\n     * The temporary file prefix.\n     */\n    private final String prefix;\n\n    /**\n     * The temporary file suffix.\n     */\n    private final String suffix;\n\n    /**\n     * The directory to use for temporary files.\n     */\n    private final File directory;\n\n    /**\n     * True when close() has been called successfully.\n     */\n    private boolean closed = false;\n\n    // ----------------------------------------------------------- Constructors\n\n    /**\n     * Constructs an instance of this class which will trigger an event at the\n     * specified threshold, and save data to a temporary file beyond that point.\n     *\n     * @param threshold The number of bytes at which to trigger an event.\n     * @param prefix Prefix to use for the temporary file.\n     * @param suffix Suffix to use for the temporary file.\n     * @param directory Temporary file directory.\n     *\n     * @since 1.4\n     */\n    public OffloadingOutputStream( int threshold, String prefix, String suffix, File directory )\n    {\n        this( threshold, null, prefix, suffix, directory );\n        if ( prefix == null )\n        {\n            throw new IllegalArgumentException( \"Temporary file prefix is missing\" );\n        }\n    }\n\n    /**\n     * Constructs an instance of this class which will trigger an event at the\n     * specified threshold, and save data either to a file beyond that point.\n     *\n     * @param threshold The number of bytes at which to trigger an event.\n     * @param outputFile The file to which data is saved beyond the threshold.\n     * @param prefix Prefix to use for the temporary file.\n     * @param suffix Suffix to use for the temporary file.\n     * @param directory Temporary file directory.\n     */\n    private OffloadingOutputStream( int threshold, File outputFile, String prefix, String suffix, File directory )\n    {\n        super( threshold );\n        this.outputFile = outputFile;\n\n        memoryOutputStream = new ByteArrayOutputStream( threshold / 10 );\n        currentOutputStream = memoryOutputStream;\n        this.prefix = prefix;\n        this.suffix = suffix;\n        this.directory = directory;\n    }\n\n    // --------------------------------------- ThresholdingOutputStream methods\n\n    /**\n     * Returns the current output stream. This may be memory based or disk\n     * based, depending on the current state with respect to the threshold.\n     *\n     * @return The underlying output stream.\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    protected OutputStream getStream() throws IOException\n    {\n        return currentOutputStream;\n    }\n\n    /**\n     * Switches the underlying output stream from a memory based stream to one\n     * that is backed by disk. This is the point at which we realise that too\n     * much data is being written to keep in memory, so we elect to switch to\n     * disk-based storage.\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    protected void thresholdReached() throws IOException\n    {\n        if ( prefix != null )\n        {\n            outputFile = File.createTempFile( prefix, suffix, directory );\n        }\n        currentOutputStream = Files.newOutputStream( outputFile.toPath() );\n    }\n\n    public InputStream getInputStream() throws IOException\n    {\n\n        InputStream memoryAsInput = memoryOutputStream.toInputStream();\n        if ( outputFile == null )\n        {\n            return memoryAsInput;\n        }\n        return new SequenceInputStream( memoryAsInput, Files.newInputStream( outputFile.toPath() ) );\n    }\n\n    // --------------------------------------------------------- Public methods\n\n    /**\n     * Returns the data for this output stream as an array of bytes, assuming\n     * that the data has been retained in memory. If the data was written to\n     * disk, this method returns <code>null</code>.\n     *\n     * @return The data for this output stream, or <code>null</code> if no such\n     * data is available.\n     */\n    public byte[] getData()\n    {\n        if ( memoryOutputStream != null )\n        {\n            return memoryOutputStream.toByteArray();\n        }\n        return null;\n    }\n\n    /**\n     * Returns either the output file specified in the constructor or\n     * the temporary file created or null.\n     * <p>\n     * If the constructor specifying the file is used then it returns that\n     * same output file, even when threshold has not been reached.\n     * <p>\n     * If constructor specifying a temporary file prefix/suffix is used\n     * then the temporary file created once the threshold is reached is returned\n     * If the threshold was not reached then <code>null</code> is returned.\n     *\n     * @return The file for this output stream, or <code>null</code> if no such\n     * file exists.\n     */\n    public File getFile()\n    {\n        return outputFile;\n    }\n\n    /**\n     * Closes underlying output stream, and mark this as closed\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    public void close() throws IOException\n    {\n        super.close();\n        closed = true;\n        currentOutputStream.close();\n    }\n\n}\n\n'''\nThe error is caused by a change in the API of the dependency: commons-io 2.11.0->20030203.000550. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.apache.commons.io.output.ByteArrayOutputStream\n-- org.apache.commons.io.input.ClosedInputStream\n-- org.apache.commons.io.input.BoundedInputStream\n-- org.apache.commons.io.output.CountingOutputStream.getByteCount\n-- org.apache.commons.io.input.CountingInputStream.getByteCount\n~~ SUPERTYPE_REMOVED <- org.apache.commons.io.input.CountingInputStream\n-- org.apache.commons.io.output.NullPrintStream\n-- org.apache.commons.io.output.ThresholdingOutputStream\n~~ METHOD_NOW_FINAL <- org.apache.commons.io.output.DemuxOutputStream.write\n-- org.apache.commons.io.FileUtils.write\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(byte[])\n++ public void org.apache.commons.io.ProxyOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.compress.zip.ZipOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.ProxyOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(byte[])\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.ProxyOutputStream.write(byte[])\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.apache.commons.io.output.ThresholdingOutputStream;\nclass OffloadingOutputStream extends ThresholdingOutputStream\n    @Override\n    @Override\n    @Override\n        super.close();\nwith the following error message:\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[27,36] cannot find symbol  symbol:   class ThresholdingOutputStream\n  location: package org.apache.commons.io.output\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[32,38] cannot find symbol  symbol: class ThresholdingOutputStream\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[129,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[143,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[207,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[210,9] cannot find symbol  symbol:   variable super\n  location: class org.codehaus.plexus.archiver.zip.OffloadingOutputStream\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.apache.commons.io.output.ThresholdingOutputStream;\nclass OffloadingOutputStream extends ThresholdingOutputStream\n    @Override\n    @Override\n    @Override\n        super.close();",
    "error_message": "[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[27,36] cannot find symbol  symbol:   class ThresholdingOutputStream\n  location: package org.apache.commons.io.output\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[32,38] cannot find symbol  symbol: class ThresholdingOutputStream\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[129,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[143,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[207,5] method does not override or implement a method from a supertype\n[ERROR] /plexus-archiver/src/main/java/org/codehaus/plexus/archiver/zip/OffloadingOutputStream.java:[210,9] cannot find symbol  symbol:   variable super\n  location: class org.codehaus.plexus.archiver.zip.OffloadingOutputStream",
    "api_diff": "-- org.apache.commons.io.output.ByteArrayOutputStream\n-- org.apache.commons.io.input.ClosedInputStream\n-- org.apache.commons.io.input.BoundedInputStream\n-- org.apache.commons.io.output.CountingOutputStream.getByteCount\n-- org.apache.commons.io.input.CountingInputStream.getByteCount\n~~ SUPERTYPE_REMOVED <- org.apache.commons.io.input.CountingInputStream\n-- org.apache.commons.io.output.NullPrintStream\n-- org.apache.commons.io.output.ThresholdingOutputStream\n~~ METHOD_NOW_FINAL <- org.apache.commons.io.output.DemuxOutputStream.write\n-- org.apache.commons.io.FileUtils.write\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(byte[])\n++ public void org.apache.commons.io.ProxyOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.compress.zip.ZipOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.ProxyOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(byte[])\n++ public void org.apache.commons.io.compress.tar.TarOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(int)\n++ public void org.apache.commons.io.output.CountingOutputStream.write(byte[],int,int)\n++ public void org.apache.commons.io.ProxyOutputStream.write(byte[])",
    "original_code": "/*\n *  Licensed to the Apache Software Foundation (ASF) under one or more\n *  contributor license agreements.  See the NOTICE file distributed with\n *  this work for additional information regarding copyright ownership.\n *  The ASF licenses this file to You under the Apache License, Version 2.0\n *  (the \"License\"); you may not use this file except in compliance with\n *  the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\npackage org.codehaus.plexus.archiver.zip;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.io.SequenceInputStream;\nimport java.nio.file.Files;\n\nimport org.apache.commons.io.output.ThresholdingOutputStream;\n\n/**\n * Offloads to disk when a given memory consumption has been reacehd\n */\nclass OffloadingOutputStream extends ThresholdingOutputStream\n{\n\n    // ----------------------------------------------------------- Data members\n\n    /**\n     * The output stream to which data will be written prior to the theshold\n     * being reached.\n     */\n    private ByteArrayOutputStream memoryOutputStream;\n\n    /**\n     * The output stream to which data will be written at any given time. This\n     * will always be one of <code>memoryOutputStream</code> or\n     * <code>diskOutputStream</code>.\n     */\n    private OutputStream currentOutputStream;\n\n    /**\n     * The file to which output will be directed if the threshold is exceeded.\n     */\n    private File outputFile = null;\n\n    /**\n     * The temporary file prefix.\n     */\n    private final String prefix;\n\n    /**\n     * The temporary file suffix.\n     */\n    private final String suffix;\n\n    /**\n     * The directory to use for temporary files.\n     */\n    private final File directory;\n\n    /**\n     * True when close() has been called successfully.\n     */\n    private boolean closed = false;\n\n    // ----------------------------------------------------------- Constructors\n\n    /**\n     * Constructs an instance of this class which will trigger an event at the\n     * specified threshold, and save data to a temporary file beyond that point.\n     *\n     * @param threshold The number of bytes at which to trigger an event.\n     * @param prefix Prefix to use for the temporary file.\n     * @param suffix Suffix to use for the temporary file.\n     * @param directory Temporary file directory.\n     *\n     * @since 1.4\n     */\n    public OffloadingOutputStream( int threshold, String prefix, String suffix, File directory )\n    {\n        this( threshold, null, prefix, suffix, directory );\n        if ( prefix == null )\n        {\n            throw new IllegalArgumentException( \"Temporary file prefix is missing\" );\n        }\n    }\n\n    /**\n     * Constructs an instance of this class which will trigger an event at the\n     * specified threshold, and save data either to a file beyond that point.\n     *\n     * @param threshold The number of bytes at which to trigger an event.\n     * @param outputFile The file to which data is saved beyond the threshold.\n     * @param prefix Prefix to use for the temporary file.\n     * @param suffix Suffix to use for the temporary file.\n     * @param directory Temporary file directory.\n     */\n    private OffloadingOutputStream( int threshold, File outputFile, String prefix, String suffix, File directory )\n    {\n        super( threshold );\n        this.outputFile = outputFile;\n\n        memoryOutputStream = new ByteArrayOutputStream( threshold / 10 );\n        currentOutputStream = memoryOutputStream;\n        this.prefix = prefix;\n        this.suffix = suffix;\n        this.directory = directory;\n    }\n\n    // --------------------------------------- ThresholdingOutputStream methods\n\n    /**\n     * Returns the current output stream. This may be memory based or disk\n     * based, depending on the current state with respect to the threshold.\n     *\n     * @return The underlying output stream.\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    protected OutputStream getStream() throws IOException\n    {\n        return currentOutputStream;\n    }\n\n    /**\n     * Switches the underlying output stream from a memory based stream to one\n     * that is backed by disk. This is the point at which we realise that too\n     * much data is being written to keep in memory, so we elect to switch to\n     * disk-based storage.\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    protected void thresholdReached() throws IOException\n    {\n        if ( prefix != null )\n        {\n            outputFile = File.createTempFile( prefix, suffix, directory );\n        }\n        currentOutputStream = Files.newOutputStream( outputFile.toPath() );\n    }\n\n    public InputStream getInputStream() throws IOException\n    {\n\n        InputStream memoryAsInput = memoryOutputStream.toInputStream();\n        if ( outputFile == null )\n        {\n            return memoryAsInput;\n        }\n        return new SequenceInputStream( memoryAsInput, Files.newInputStream( outputFile.toPath() ) );\n    }\n\n    // --------------------------------------------------------- Public methods\n\n    /**\n     * Returns the data for this output stream as an array of bytes, assuming\n     * that the data has been retained in memory. If the data was written to\n     * disk, this method returns <code>null</code>.\n     *\n     * @return The data for this output stream, or <code>null</code> if no such\n     * data is available.\n     */\n    public byte[] getData()\n    {\n        if ( memoryOutputStream != null )\n        {\n            return memoryOutputStream.toByteArray();\n        }\n        return null;\n    }\n\n    /**\n     * Returns either the output file specified in the constructor or\n     * the temporary file created or null.\n     * <p>\n     * If the constructor specifying the file is used then it returns that\n     * same output file, even when threshold has not been reached.\n     * <p>\n     * If constructor specifying a temporary file prefix/suffix is used\n     * then the temporary file created once the threshold is reached is returned\n     * If the threshold was not reached then <code>null</code> is returned.\n     *\n     * @return The file for this output stream, or <code>null</code> if no such\n     * file exists.\n     */\n    public File getFile()\n    {\n        return outputFile;\n    }\n\n    /**\n     * Closes underlying output stream, and mark this as closed\n     *\n     * @exception java.io.IOException if an error occurs.\n     */\n    @Override\n    public void close() throws IOException\n    {\n        super.close();\n        closed = true;\n        currentOutputStream.close();\n    }\n\n}\n",
    "project": "plexus-archiver",
    "libraryName": "commons-io",
    "libraryGroupID": "commons-io",
    "newVersion": "20030203.000550",
    "previousVersion": "2.11.0",
    "breakingCommit": "ee0827d4c9bf80982241e8c3559dceb8b39063e4"
}