{
    "absolute_path_to_file_in_container": "/ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java",
    "errors": [
        {
            "line_number": 13,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[13,43] cannot find symbol",
            "additional_info": "  symbol:   class ClientConnectionEvent\n  location: package org.spongepowered.api.event.network",
            "file_name": "LoginListener.java",
            "BCs": [
                {
                    "element": "org.spongepowered.api.event.network.ClientConnectionEvent",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "3f917154-7a3b-5895-a5cd-66b2384bc5db"
        },
        {
            "line_number": 29,
            "message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[29,55] package ClientConnectionEvent does not exist",
            "additional_info": "",
            "file_name": "LoginListener.java",
            "BCs": [
                {
                    "element": "org.spongepowered.api.event.network.ClientConnectionEvent",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "bbbaae75-913e-5c6b-a04c-25dbff02b603"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage com.github.games647.changeskin.sponge;\n\nimport com.github.games647.changeskin.core.SkinStorage;\nimport com.github.games647.changeskin.core.model.UserPreference;\nimport com.github.games647.changeskin.core.model.skin.SkinModel;\nimport com.github.games647.changeskin.core.shared.SharedListener;\nimport com.google.inject.Inject;\n\nimport java.util.Optional;\nimport java.util.UUID;\n\nimport org.spongepowered.api.event.Listener;\nimport org.spongepowered.api.event.network.ClientConnectionEvent;\nimport org.spongepowered.api.profile.GameProfile;\nimport org.spongepowered.api.scheduler.Task;\n\npublic class LoginListener extends SharedListener {\n\n    private final ChangeSkinSponge plugin;\n\n    @Inject\n    LoginListener(ChangeSkinSponge plugin) {\n        super(plugin.getCore());\n\n        this.plugin = plugin;\n    }\n\n    @Listener\n    public void onPlayerPreLogin(ClientConnectionEvent.Auth preLoginEvent) {\n        SkinStorage storage = core.getStorage();\n        GameProfile profile = preLoginEvent.getProfile();\n        UUID playerUUID = profile.getUniqueId();\n\n        UserPreference preferences = storage.getPreferences(playerUUID);\n        Optional<SkinModel> optSkin = preferences.getTargetSkin();\n        if (optSkin.isPresent()) {\n            SkinModel targetSkin = optSkin.get();\n            if (!preferences.isKeepSkin()) {\n                targetSkin = core.checkAutoUpdate(targetSkin);\n            }\n\n            plugin.getApi().applyProperties(profile, targetSkin);\n            save(preferences);\n        } else {\n            String playerName = profile.getName().get();\n            if (!core.getConfig().getBoolean(\"restoreSkins\") || !refetchSkin(playerName, preferences)) {\n                setDefaultSkin(preferences, profile);\n            }\n        }\n    }\n\n    private void setDefaultSkin(UserPreference preferences, GameProfile profile) {\n        Optional<SkinModel> randomSkin = getRandomSkin();\n        if (randomSkin.isPresent()) {\n            SkinModel targetSkin = randomSkin.get();\n            preferences.setTargetSkin(targetSkin);\n            plugin.getApi().applyProperties(profile, targetSkin);\n        }\n    }\n\n    @Override\n    protected void save(final UserPreference preferences) {\n        Task.builder()\n                .async()\n                .execute(() -> {\n                    Optional<SkinModel> optSkin = preferences.getTargetSkin();\n                    if (optSkin.isPresent()) {\n                        if (core.getStorage().save(optSkin.get())) {\n                            core.getStorage().save(preferences);\n                        }\n                    } else {\n                        core.getStorage().save(preferences);\n                    }\n                }).submit(plugin);\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: spongeapi 7.4.0->8.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.spongepowered.api.command.CommandManager\n-- org.spongepowered.api.command.CommandSource\n-- org.spongepowered.api.network.ChannelRegistrar\n-- org.spongepowered.api.plugin.Plugin\n-- org.spongepowered.api.event.game.state.GamePreInitializationEvent\n-- org.spongepowered.api.event.game.state.GameInitializationEvent\n-- org.spongepowered.api.event.game.state.GameStoppingServerEvent\n-- org.spongepowered.api.command.spec.CommandSpec\n-- org.spongepowered.api.network.ChannelBuf\n-- org.spongepowered.api.network.RawDataListener\n-- org.spongepowered.api.event.network.ClientConnectionEvent\n-- org.spongepowered.api.command.spec.CommandExecutor\n-- org.spongepowered.api.command.CommandException\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable,boolean)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,boolean)\n++ public abstract interface null org.spongepowered.api.command.CommandExecutor\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component)\n++ public abstract interface null org.spongepowered.api.network.channel.raw.RawDataChannel\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.spongepowered.api.event.network.ClientConnectionEvent;\n    public void onPlayerPreLogin(ClientConnectionEvent.Auth preLoginEvent) {\nwith the following error message:\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[13,43] cannot find symbol  symbol:   class ClientConnectionEvent\n  location: package org.spongepowered.api.event.network\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[29,55] package ClientConnectionEvent does not exist\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.spongepowered.api.event.network.ClientConnectionEvent;\n    public void onPlayerPreLogin(ClientConnectionEvent.Auth preLoginEvent) {",
    "error_message": "[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[13,43] cannot find symbol  symbol:   class ClientConnectionEvent\n  location: package org.spongepowered.api.event.network\n[ERROR] /ChangeSkin/sponge/src/main/java/com/github/games647/changeskin/sponge/LoginListener.java:[29,55] package ClientConnectionEvent does not exist",
    "api_diff": "-- org.spongepowered.api.command.CommandManager\n-- org.spongepowered.api.command.CommandSource\n-- org.spongepowered.api.network.ChannelRegistrar\n-- org.spongepowered.api.plugin.Plugin\n-- org.spongepowered.api.event.game.state.GamePreInitializationEvent\n-- org.spongepowered.api.event.game.state.GameInitializationEvent\n-- org.spongepowered.api.event.game.state.GameStoppingServerEvent\n-- org.spongepowered.api.command.spec.CommandSpec\n-- org.spongepowered.api.network.ChannelBuf\n-- org.spongepowered.api.network.RawDataListener\n-- org.spongepowered.api.event.network.ClientConnectionEvent\n-- org.spongepowered.api.command.spec.CommandExecutor\n-- org.spongepowered.api.command.CommandException\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable,boolean)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,java.lang.Throwable)\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component,boolean)\n++ public abstract interface null org.spongepowered.api.command.CommandExecutor\n++ public CommandException org.spongepowered.api.command.exception.CommandException(net.kyori.adventure.text.Component)\n++ public abstract interface null org.spongepowered.api.network.channel.raw.RawDataChannel",
    "original_code": "package com.github.games647.changeskin.sponge;\n\nimport com.github.games647.changeskin.core.SkinStorage;\nimport com.github.games647.changeskin.core.model.UserPreference;\nimport com.github.games647.changeskin.core.model.skin.SkinModel;\nimport com.github.games647.changeskin.core.shared.SharedListener;\nimport com.google.inject.Inject;\n\nimport java.util.Optional;\nimport java.util.UUID;\n\nimport org.spongepowered.api.event.Listener;\nimport org.spongepowered.api.event.network.ClientConnectionEvent;\nimport org.spongepowered.api.profile.GameProfile;\nimport org.spongepowered.api.scheduler.Task;\n\npublic class LoginListener extends SharedListener {\n\n    private final ChangeSkinSponge plugin;\n\n    @Inject\n    LoginListener(ChangeSkinSponge plugin) {\n        super(plugin.getCore());\n\n        this.plugin = plugin;\n    }\n\n    @Listener\n    public void onPlayerPreLogin(ClientConnectionEvent.Auth preLoginEvent) {\n        SkinStorage storage = core.getStorage();\n        GameProfile profile = preLoginEvent.getProfile();\n        UUID playerUUID = profile.getUniqueId();\n\n        UserPreference preferences = storage.getPreferences(playerUUID);\n        Optional<SkinModel> optSkin = preferences.getTargetSkin();\n        if (optSkin.isPresent()) {\n            SkinModel targetSkin = optSkin.get();\n            if (!preferences.isKeepSkin()) {\n                targetSkin = core.checkAutoUpdate(targetSkin);\n            }\n\n            plugin.getApi().applyProperties(profile, targetSkin);\n            save(preferences);\n        } else {\n            String playerName = profile.getName().get();\n            if (!core.getConfig().getBoolean(\"restoreSkins\") || !refetchSkin(playerName, preferences)) {\n                setDefaultSkin(preferences, profile);\n            }\n        }\n    }\n\n    private void setDefaultSkin(UserPreference preferences, GameProfile profile) {\n        Optional<SkinModel> randomSkin = getRandomSkin();\n        if (randomSkin.isPresent()) {\n            SkinModel targetSkin = randomSkin.get();\n            preferences.setTargetSkin(targetSkin);\n            plugin.getApi().applyProperties(profile, targetSkin);\n        }\n    }\n\n    @Override\n    protected void save(final UserPreference preferences) {\n        Task.builder()\n                .async()\n                .execute(() -> {\n                    Optional<SkinModel> optSkin = preferences.getTargetSkin();\n                    if (optSkin.isPresent()) {\n                        if (core.getStorage().save(optSkin.get())) {\n                            core.getStorage().save(preferences);\n                        }\n                    } else {\n                        core.getStorage().save(preferences);\n                    }\n                }).submit(plugin);\n    }\n}\n",
    "project": "ChangeSkin",
    "libraryName": "spongeapi",
    "libraryGroupID": "org.spongepowered",
    "newVersion": "8.0.0",
    "previousVersion": "7.4.0",
    "breakingCommit": "402082609522c66a3b790aedafd0570148a7d53f"
}