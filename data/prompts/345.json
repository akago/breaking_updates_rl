{
    "absolute_path_to_file_in_container": "/license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java",
    "errors": [
        {
            "line_number": 21,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist",
            "additional_info": "",
            "file_name": "ReportTest.java",
            "BCs": [],
            "Additions": [],
            "uid": "9c0cb70c-fb72-5954-b2e5-39fb76795a2b"
        },
        {
            "line_number": 22,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist",
            "additional_info": "",
            "file_name": "ReportTest.java",
            "BCs": [],
            "Additions": [],
            "uid": "9c0cb70c-fb72-5954-b2e5-39fb76795a2b"
        },
        {
            "line_number": 37,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[37,3] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.ReportTest",
            "file_name": "ReportTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "95da7a45-48ce-5df6-891b-cb6ae96ebe52"
        },
        {
            "line_number": 41,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[41,5] cannot find symbol",
            "additional_info": "  symbol:   class ArtifactStub\n  location: class com.mycila.maven.plugin.license.ReportTest",
            "file_name": "ReportTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.ArtifactStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "752f0e11-511f-54a0-80cd-700295e7864c"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport com.mycila.maven.plugin.license.util.FileUtils;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.MojoFailureException;\nimport org.apache.maven.plugin.testing.stubs.ArtifactStub;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.nio.charset.Charset;\nimport java.time.Clock;\nimport java.time.Instant;\nimport java.time.ZoneId;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nclass ReportTest {\n\n  MavenProjectStub mavenProjectStub = new MavenProjectStub();\n\n  @BeforeEach\n  void setUp() {\n    ArtifactStub artifact = new ArtifactStub();\n    mavenProjectStub.setArtifact(artifact);\n    artifact.setGroupId(\"com.mycila\");\n    artifact.setArtifactId(\"license-maven-plugin\");\n    artifact.setVersion(\"4.2-SNAPSHOT\");\n  }\n\n  @Test\n  void test_check_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_check_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException | MojoFailureException e) {\n    }\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/check.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_check_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_check_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException | MojoFailureException e) {\n    }\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/check.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_format_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_format_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/format.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_format_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_format_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/format.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_remove_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_remove_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseRemoveMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/remove.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_remove_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_remove_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseRemoveMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/remove.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  private static String unixify(String s) {\n    return s.replace(\"\\r\", \"\").replace(\"\\\\\", \"/\").replace(\"//\", \"/\");\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: maven-plugin-testing-harness 4.0.0-alpha-2->4.0.0-beta-3. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.apache.maven.plugin.testing.stubs.ArtifactStub;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n  MavenProjectStub mavenProjectStub = new MavenProjectStub();\n    ArtifactStub artifact = new ArtifactStub();\nwith the following error message:\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[37,3] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.ReportTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[41,5] cannot find symbol  symbol:   class ArtifactStub\n  location: class com.mycila.maven.plugin.license.ReportTest\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.apache.maven.plugin.testing.stubs.ArtifactStub;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n  MavenProjectStub mavenProjectStub = new MavenProjectStub();\n    ArtifactStub artifact = new ArtifactStub();",
    "error_message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[22,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[37,3] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.ReportTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/ReportTest.java:[41,5] cannot find symbol  symbol:   class ArtifactStub\n  location: class com.mycila.maven.plugin.license.ReportTest",
    "api_diff": "-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub",
    "original_code": "/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport com.mycila.maven.plugin.license.util.FileUtils;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.MojoFailureException;\nimport org.apache.maven.plugin.testing.stubs.ArtifactStub;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.nio.charset.Charset;\nimport java.time.Clock;\nimport java.time.Instant;\nimport java.time.ZoneId;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nclass ReportTest {\n\n  MavenProjectStub mavenProjectStub = new MavenProjectStub();\n\n  @BeforeEach\n  void setUp() {\n    ArtifactStub artifact = new ArtifactStub();\n    mavenProjectStub.setArtifact(artifact);\n    artifact.setGroupId(\"com.mycila\");\n    artifact.setArtifactId(\"license-maven-plugin\");\n    artifact.setVersion(\"4.2-SNAPSHOT\");\n  }\n\n  @Test\n  void test_check_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_check_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException | MojoFailureException e) {\n    }\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/check.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_check_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_check_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseCheckMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    try {\n      plugin.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException | MojoFailureException e) {\n    }\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/check.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_format_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_format_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/format.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_format_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_format_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseFormatMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/format.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_remove_xml() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_remove_xml\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseRemoveMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.xml\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/remove.xml\"), Charset.defaultCharset());\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  @Test\n  void test_remove_json() throws Exception {\n    File tmp = new File(\"target/test/issues/issue-122/test_remove_json\");\n    FileUtils.copyFilesToFolder(new File(\"src/test/resources/issues/issue-122\"), tmp);\n\n    AbstractLicenseMojo plugin = new LicenseRemoveMojo();\n    plugin.clock = Clock.fixed(Instant.ofEpochMilli(1631615047644L), ZoneId.systemDefault());\n    plugin.project = mavenProjectStub;\n    plugin.defaultBasedir = tmp;\n    plugin.legacyConfigHeader = \"src/test/resources/issues/issue-122/header.txt\";\n    plugin.legacyConfigIncludes = new String[]{\"file*.*\"};\n    plugin.reportLocation = new File(tmp, \"report/license-plugin-report.json\");\n\n    plugin.execute();\n\n    String processed = unixify(FileUtils.read(plugin.reportLocation, Charset.defaultCharset()));\n    String expected = FileUtils.read(new File(\"src/test/resources/issues/issue-122/remove.json\"), Charset.defaultCharset()).trim();\n    assertThat(processed).isEqualTo(expected);\n  }\n\n  private static String unixify(String s) {\n    return s.replace(\"\\r\", \"\").replace(\"\\\\\", \"/\").replace(\"//\", \"/\");\n  }\n}\n",
    "project": "license-maven-plugin",
    "libraryName": "maven-plugin-testing-harness",
    "libraryGroupID": "org.apache.maven.plugin-testing",
    "newVersion": "4.0.0-beta-3",
    "previousVersion": "4.0.0-alpha-2",
    "breakingCommit": "f3c21936175d1aada8ae02617b66d32a748953f4"
}