{
    "absolute_path_to_file_in_container": "/license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java",
    "errors": [
        {
            "line_number": 21,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist",
            "additional_info": "",
            "file_name": "MappingMojoTest.java",
            "BCs": [],
            "Additions": [],
            "uid": "b5079509-a1a7-5611-bcc6-ef53c510e0b9"
        },
        {
            "line_number": 38,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[38,25] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
            "file_name": "MappingMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "651d9ebb-d4ca-524b-a122-1a99d01a372d"
        },
        {
            "line_number": 75,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[75,25] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
            "file_name": "MappingMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "651d9ebb-d4ca-524b-a122-1a99d01a372d"
        },
        {
            "line_number": 106,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[106,25] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
            "file_name": "MappingMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "651d9ebb-d4ca-524b-a122-1a99d01a372d"
        },
        {
            "line_number": 132,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[132,25] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
            "file_name": "MappingMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "651d9ebb-d4ca-524b-a122-1a99d01a372d"
        },
        {
            "line_number": 169,
            "message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[169,25] cannot find symbol",
            "additional_info": "  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
            "file_name": "MappingMojoTest.java",
            "BCs": [
                {
                    "element": "org.apache.maven.plugin.testing.stubs.MavenProjectStub",
                    "nature": "DELETION",
                    "kind": "TYPE_REMOVED"
                }
            ],
            "Additions": [],
            "uid": "651d9ebb-d4ca-524b-a122-1a99d01a372d"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\n/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport org.apache.maven.monitor.logging.DefaultLog;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.logging.SystemStreamLog;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.util.HashMap;\nimport java.util.LinkedHashMap;\n\nclass MappingMojoTest {\n\n  @Test\n  void test_mapping() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    check.defaultBasedir = new File(\"src/test/resources/check\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.useDefaultMapping = true;\n    check.strictCheck = true;\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      //assertFalse(logger.getContent().contains(\"header style: javadoc_style\"));\n      //assertTrue(logger.getContent().contains(\"header style: text\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n    logger.clear();\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"txt\", \"javadoc_style\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      Assertions.assertTrue(logger.getContent().contains(\"header style: javadoc_style\"));\n      Assertions.assertFalse(logger.getContent().contains(\"header style: text\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n  }\n\n  @Test\n  void test_mapping_composed_extension() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/check\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"test.apt.vm\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      Assertions.assertTrue(logger.getContent().contains(\"test.apt.vm [header style: sharpstar_style]\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n    check.setLog(new SystemStreamLog());\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"apt.vm\", \"DOUBLETILDE_STYLE\");\n    }};\n\n    check.execute();\n  }\n\n  @Test\n  void test_mapping_composed_extension_ordered() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/check/issue107\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"test.xml.tmpl\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    check.setLog(new SystemStreamLog());\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"jmx\", \"XML_STYLE\");\n      put(\"feature\", \"SCRIPT_STYLE\");\n      put(\"properties.tmpl\", \"SCRIPT_STYLE\");\n      put(\"xml.tmpl\", \"XML_STYLE\");\n      put(\"tmpl\", \"SCRIPT_STYLE\");\n    }};\n\n    check.execute();\n  }\n\n  @Test\n  void test_mapping_extension_less_file() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/extensionless\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"extensionless-file\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    /* Run with no mapping first */\n    check.execute();\n    Assertions.assertTrue(logger.getContent().contains(\"extensionless-file [header style: unknown]\"));\n\n    /* Add the mapping and expect the missing header */\n    MockedLog mappedLogger = new MockedLog();\n    check.setLog(new DefaultLog(mappedLogger));\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"extensionless-file\", \"SCRIPT_STYLE\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      Assertions.assertTrue(mappedLogger.getContent().contains(\"extensionless-file [header style: script_style]\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n  }\n\n\n  @Test\n  void test_mapping_unknown_file() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/unknown\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"file.unknown\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n    check.failIfUnknown = true;\n\n    /* Run with no mapping first */\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      String expected = \"Unable to find a comment style definition for some \"\n          + \"files. You may want to add a custom mapping for the relevant file extensions.\";\n      Assertions.assertEquals(expected, e.getMessage());\n    }\n\n  }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: maven-plugin-testing-harness 4.0.0-alpha-2->4.0.0-beta-3. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub\n\nThe error is triggered in the following specific lines in the previous code:\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\nwith the following error message:\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[38,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[75,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[106,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[132,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[169,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();\n    check.project = new MavenProjectStub();",
    "error_message": "[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[21,45] package org.apache.maven.plugin.testing.stubs does not exist\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[38,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[75,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[106,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[132,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest\n[ERROR] /license-maven-plugin/license-maven-plugin/src/test/java/com/mycila/maven/plugin/license/MappingMojoTest.java:[169,25] cannot find symbol  symbol:   class MavenProjectStub\n  location: class com.mycila.maven.plugin.license.MappingMojoTest",
    "api_diff": "-- org.apache.maven.plugin.testing.stubs.MavenProjectStub\n-- org.apache.maven.plugin.testing.stubs.ArtifactStub",
    "original_code": "/**\n * Copyright (C) 2008 Mycila (mathieu.carbou@gmail.com)\n * <p>\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * <p>\n * http://www.apache.org/licenses/LICENSE-2.0\n * <p>\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage com.mycila.maven.plugin.license;\n\nimport org.apache.maven.monitor.logging.DefaultLog;\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.logging.SystemStreamLog;\nimport org.apache.maven.plugin.testing.stubs.MavenProjectStub;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.util.HashMap;\nimport java.util.LinkedHashMap;\n\nclass MappingMojoTest {\n\n  @Test\n  void test_mapping() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    check.defaultBasedir = new File(\"src/test/resources/check\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.useDefaultMapping = true;\n    check.strictCheck = true;\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      //assertFalse(logger.getContent().contains(\"header style: javadoc_style\"));\n      //assertTrue(logger.getContent().contains(\"header style: text\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n    logger.clear();\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"txt\", \"javadoc_style\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      Assertions.assertTrue(logger.getContent().contains(\"header style: javadoc_style\"));\n      Assertions.assertFalse(logger.getContent().contains(\"header style: text\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n  }\n\n  @Test\n  void test_mapping_composed_extension() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/check\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"test.apt.vm\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      Assertions.assertTrue(logger.getContent().contains(\"test.apt.vm [header style: sharpstar_style]\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n    check.setLog(new SystemStreamLog());\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"apt.vm\", \"DOUBLETILDE_STYLE\");\n    }};\n\n    check.execute();\n  }\n\n  @Test\n  void test_mapping_composed_extension_ordered() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/check/issue107\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"test.xml.tmpl\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    check.setLog(new SystemStreamLog());\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"jmx\", \"XML_STYLE\");\n      put(\"feature\", \"SCRIPT_STYLE\");\n      put(\"properties.tmpl\", \"SCRIPT_STYLE\");\n      put(\"xml.tmpl\", \"XML_STYLE\");\n      put(\"tmpl\", \"SCRIPT_STYLE\");\n    }};\n\n    check.execute();\n  }\n\n  @Test\n  void test_mapping_extension_less_file() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/extensionless\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"extensionless-file\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n\n    /* Run with no mapping first */\n    check.execute();\n    Assertions.assertTrue(logger.getContent().contains(\"extensionless-file [header style: unknown]\"));\n\n    /* Add the mapping and expect the missing header */\n    MockedLog mappedLogger = new MockedLog();\n    check.setLog(new DefaultLog(mappedLogger));\n    check.mapping = new LinkedHashMap<String, String>() {{\n      put(\"extensionless-file\", \"SCRIPT_STYLE\");\n    }};\n\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      e.printStackTrace(System.out);\n      Assertions.assertTrue(mappedLogger.getContent().contains(\"extensionless-file [header style: script_style]\"));\n      Assertions.assertEquals(\"Some files do not have the expected license header. Run license:format to update them.\", e.getMessage());\n    }\n\n  }\n\n\n  @Test\n  void test_mapping_unknown_file() throws Exception {\n    LicenseCheckMojo check = new LicenseCheckMojo();\n    MockedLog logger = new MockedLog();\n    check.setLog(new DefaultLog(logger));\n    //check.setLog(new SystemStreamLog());\n    check.defaultBasedir = new File(\"src/test/resources/unknown\");\n    check.legacyConfigHeader = \"header.txt\";\n    check.project = new MavenProjectStub();\n    check.legacyConfigIncludes = new String[]{\"file.unknown\"};\n    check.defaultProperties = new HashMap<String, String>() {{\n      put(\"year\", \"2008\");\n    }};\n    check.failIfUnknown = true;\n\n    /* Run with no mapping first */\n    try {\n      check.execute();\n      Assertions.fail();\n    } catch (MojoExecutionException e) {\n      String expected = \"Unable to find a comment style definition for some \"\n          + \"files. You may want to add a custom mapping for the relevant file extensions.\";\n      Assertions.assertEquals(expected, e.getMessage());\n    }\n\n  }\n}\n",
    "project": "license-maven-plugin",
    "libraryName": "maven-plugin-testing-harness",
    "libraryGroupID": "org.apache.maven.plugin-testing",
    "newVersion": "4.0.0-beta-3",
    "previousVersion": "4.0.0-alpha-2",
    "breakingCommit": "f3c21936175d1aada8ae02617b66d32a748953f4"
}