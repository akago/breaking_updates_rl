{
    "absolute_path_to_file_in_container": "/lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java",
    "errors": [
        {
            "line_number": 3,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[3,26] cannot find symbol",
            "additional_info": "  symbol:   class Strings\n  location: package io.dropwizard.util",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "7dacb869-83ef-5e34-b3ad-dd1345b254a4"
        },
        {
            "line_number": 7,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[7,29] package javax.ws.rs.container does not exist",
            "additional_info": "",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "f2ab3757-555b-53e9-afe1-65650e3fa48e"
        },
        {
            "line_number": 8,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[8,29] package javax.ws.rs.container does not exist",
            "additional_info": "",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "f2ab3757-555b-53e9-afe1-65650e3fa48e"
        },
        {
            "line_number": 9,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[9,23] package javax.ws.rs.ext does not exist",
            "additional_info": "",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "ed4915a6-5553-5de6-9ccc-38b74d98db1f"
        },
        {
            "line_number": 15,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[15,2] cannot find symbol",
            "additional_info": "  symbol: class Provider",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "68f0a486-0829-576a-a3a2-92fc32b7e778"
        },
        {
            "line_number": 16,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[16,49] cannot find symbol",
            "additional_info": "  symbol: class ContainerRequestFilter",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "548bbb42-f58e-5494-a609-53623ae5c039"
        },
        {
            "line_number": 18,
            "message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[18,24] cannot find symbol",
            "additional_info": "  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.monitoring.RequestMdcFactoryFilter",
            "file_name": "RequestMdcFactoryFilter.java",
            "BCs": [],
            "Additions": [],
            "uid": "4797c755-d5f5-5e94-961c-5fc07a25fc7c"
        }
    ],
    "prompt": "\nThe following Java client code fails: \n'''java\npackage com.wire.lithium.server.monitoring;\n\nimport io.dropwizard.util.Strings;\nimport org.slf4j.MDC;\n\nimport javax.annotation.Nullable;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.ext.Provider;\nimport java.util.UUID;\n\n/**\n * Filter that sets MDC.\n */\n@Provider\npublic class RequestMdcFactoryFilter implements ContainerRequestFilter {\n    @Override\n    public void filter(ContainerRequestContext requestContext) {\n        // save id generated by the Nginx\n        addIfNotNull(\"forwardedFor\", requestContext.getHeaderString(\"X-Request-Id\"));\n        // generate unique id for each request in the application\n        addIfNotNull(\"appRequest\", UUID.randomUUID().toString());\n        // header from proxy\n        addIfNotNull(\"forwardedFor\", requestContext.getHeaderString(\"X-Forwarded-For\"));\n        addIfNotNull(\"realIp\", requestContext.getHeaderString(\"X-Real-IP\"));\n    }\n\n    private void addIfNotNull(final String key, @Nullable String value) {\n        if (!Strings.isNullOrEmpty(value)) {\n            MDC.put(key, value);\n        }\n    }\n}\n\n'''\nThe error is caused by a change in the API of the dependency: dropwizard-core 2.1.5->4.0.0. \nThe new library version includes the following relevant backward incompatible changes on API. \n(API changes format: lines starting with '--' denote removed members, '++' denote added ones, '~~' denote mutations with change kind) \n-- io.dropwizard.Application\n-- io.dropwizard.setup.Environment\n-- io.dropwizard.setup.Bootstrap\n-- io.dropwizard.Configuration\n++ public Configuration io.dropwizard.core.Configuration()\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String,com.fasterxml.jackson.databind.ObjectMapper,jakarta.validation.ValidatorFactory,com.codahale.metrics.MetricRegistry,java.lang.ClassLoader,com.codahale.metrics.health.HealthCheckRegistry,io.dropwizard.core.Configuration)\n++ protected Application io.dropwizard.core.Application()\n++ public Bootstrap io.dropwizard.core.setup.Bootstrap(io.dropwizard.core.Application)\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String)\n\nThe error is triggered in the following specific lines in the previous code:\nimport io.dropwizard.util.Strings;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.ext.Provider;\n@Provider\npublic class RequestMdcFactoryFilter implements ContainerRequestFilter {\n    public void filter(ContainerRequestContext requestContext) {\nwith the following error message:\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[3,26] cannot find symbol  symbol:   class Strings\n  location: package io.dropwizard.util\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[7,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[8,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[9,23] package javax.ws.rs.ext does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[15,2] cannot find symbol  symbol: class Provider\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[16,49] cannot find symbol  symbol: class ContainerRequestFilter\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[18,24] cannot find symbol  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.monitoring.RequestMdcFactoryFilter\n\nPlease apply your reasoning and generate the fix following the system instruction.\n",
    "buggy_lines": "import io.dropwizard.util.Strings;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.ext.Provider;\n@Provider\npublic class RequestMdcFactoryFilter implements ContainerRequestFilter {\n    public void filter(ContainerRequestContext requestContext) {",
    "error_message": "[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[3,26] cannot find symbol  symbol:   class Strings\n  location: package io.dropwizard.util\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[7,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[8,29] package javax.ws.rs.container does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[9,23] package javax.ws.rs.ext does not exist\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[15,2] cannot find symbol  symbol: class Provider\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[16,49] cannot find symbol  symbol: class ContainerRequestFilter\n[ERROR] /lithium/src/main/java/com/wire/lithium/server/monitoring/RequestMdcFactoryFilter.java:[18,24] cannot find symbol  symbol:   class ContainerRequestContext\n  location: class com.wire.lithium.server.monitoring.RequestMdcFactoryFilter",
    "api_diff": "-- io.dropwizard.Application\n-- io.dropwizard.setup.Environment\n-- io.dropwizard.setup.Bootstrap\n-- io.dropwizard.Configuration\n++ public Configuration io.dropwizard.core.Configuration()\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String,com.fasterxml.jackson.databind.ObjectMapper,jakarta.validation.ValidatorFactory,com.codahale.metrics.MetricRegistry,java.lang.ClassLoader,com.codahale.metrics.health.HealthCheckRegistry,io.dropwizard.core.Configuration)\n++ protected Application io.dropwizard.core.Application()\n++ public Bootstrap io.dropwizard.core.setup.Bootstrap(io.dropwizard.core.Application)\n++ public Environment io.dropwizard.core.setup.Environment(java.lang.String)",
    "original_code": "package com.wire.lithium.server.monitoring;\n\nimport io.dropwizard.util.Strings;\nimport org.slf4j.MDC;\n\nimport javax.annotation.Nullable;\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.ext.Provider;\nimport java.util.UUID;\n\n/**\n * Filter that sets MDC.\n */\n@Provider\npublic class RequestMdcFactoryFilter implements ContainerRequestFilter {\n    @Override\n    public void filter(ContainerRequestContext requestContext) {\n        // save id generated by the Nginx\n        addIfNotNull(\"forwardedFor\", requestContext.getHeaderString(\"X-Request-Id\"));\n        // generate unique id for each request in the application\n        addIfNotNull(\"appRequest\", UUID.randomUUID().toString());\n        // header from proxy\n        addIfNotNull(\"forwardedFor\", requestContext.getHeaderString(\"X-Forwarded-For\"));\n        addIfNotNull(\"realIp\", requestContext.getHeaderString(\"X-Real-IP\"));\n    }\n\n    private void addIfNotNull(final String key, @Nullable String value) {\n        if (!Strings.isNullOrEmpty(value)) {\n            MDC.put(key, value);\n        }\n    }\n}\n",
    "project": "lithium",
    "libraryName": "dropwizard-core",
    "libraryGroupID": "io.dropwizard",
    "newVersion": "4.0.0",
    "previousVersion": "2.1.5",
    "breakingCommit": "686ea4e18114ac180e35ca1c07e1f2e6dfbffbe0"
}